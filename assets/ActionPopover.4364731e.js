import{_ as X,d as Y,r as i,z as b,A as D,w as N,e as V,o as h,f as j,i as T,g as G,k as I,B as H,j as O,C as M,D as U,E as W,G as q}from"./index.c99e83dd.js";import{g as P}from"./direction.8b21c0ae.js";const F=Y({__name:"ActionPopover",props:{popoverCustomClass:{type:String},closeOnClickOutside:{type:Boolean,default:!0},zIndex:{type:Number,default:2001}},emits:["opend","closed"],setup(v,{expose:E,emit:g}){const B=v,n=i(!1),a=i(!1),d=i(""),w=i();b(()=>{document.addEventListener("click",_)}),D(()=>{document.removeEventListener("click",_)});const _=e=>{!B.closeOnClickOutside||n.value&&!w.value.contains(e.target)&&(n.value=!1)},t=i({width:200,height:200,top:0,left:0});let p=null;const x=()=>{p&&clearTimeout(p),p=setTimeout(()=>{const e=(window.innerHeight-t.value.height)/2,o=(window.innerWidth-t.value.width)/2;t.value.top=e,t.value.left=o},200)},C=async(e,o)=>{setTimeout(()=>{if(!e.actionSetting)return;const{actionSetting:s}=e,{actionType:m,actionClickType:l,actionClickValue:r}=s;if(m===1&&l===1){const{w:c,h:u,direction:k}=r,[y,z,L,$]=P(o,{width:c||200,height:u||200},k);t.value={width:c||200,height:u||200,left:y,top:z},d.value=`${L-y}px ${$-z}px`,n.value=!0,a.value=k===0,a.value&&window.addEventListener("resize",x,!0)}})},f=()=>{a.value&&window.removeEventListener("resize",x,!0),n.value=!1,a.value=!1},S=(e,o)=>{n.value?f():C(e,o)},A=({w:e,h:o,direction:s},m)=>{setTimeout(()=>{const[l,r,c,u]=P(m,{width:e||200,height:o||200},s);t.value={width:e||200,height:o||200,left:l,top:r},d.value=`${c-l}px ${u-r}px`,n.value=!0,a.value=s===0})};return N(()=>n.value,e=>{g(e?"opend":"closed")}),E({open:C,close:f,toggle:S,defaultOpen:A}),(e,o)=>{const s=V("Icon");return h(),j(q,{to:"body"},[T(W,{name:"zoomIn"},{default:G(()=>[n.value?(h(),I("div",{key:0,ref_key:"actionPopover",ref:w,class:M(["action-popover",v.popoverCustomClass]),style:U({width:t.value.width+"px",height:t.value.height+"px",top:t.value.top+"px",left:t.value.left+"px",transformOrigin:d.value,zIndex:v.zIndex})},[H(e.$slots,"default",{},void 0,!0),a.value?(h(),I("div",{key:0,class:"close",onClick:f},[T(s,{name:"close"})])):O("",!0)],6)):O("",!0)]),_:3})])}}});var Q=X(F,[["__scopeId","data-v-362fa65f"]]);export{Q as default};
