import{_ as f,d as S,r as l,u as g,I as v,w as p,x as y,y as w,G as C,H as k,o as h,h as A,e as x,t as I,C as u,J as $,K as T,L as D}from"./index.66babb20.js";const E=S({name:"Verse",props:{componentSetting:{type:Object,required:!0}},setup(e){const t=l(""),o=l(),c=g(),{t:s}=v();async function a(){try{const i=await fetch(`${$}/api/randomVerse`),{content:d}=await i.json();t.value=d}catch{}}let n;const r=()=>{const i=(e.componentSetting.duration||5)*60*1e3;n&&(window.clearInterval(n),n=null),n=window.setInterval(a,i)};p(()=>e.componentSetting.duration,()=>r(),{immediate:!0}),y(()=>a()),w(()=>n&&window.clearInterval(n));const m=C(()=>k(e.componentSetting.position));return p(()=>t.value,()=>{o.value&&o.value.animate&&o.value.animate({opacity:[0,1]},400)}),{verse:t,positionCSS:m,verseElement:o,handleClickAction:()=>{e.componentSetting.clickActionType===1?(a(),r()):e.componentSetting.clickActionType===2?window.open(`https://hanyu.baidu.com/s?wd=${encodeURIComponent(t.value)}`):e.componentSetting.clickActionType===3&&T(t.value)&&D({title:s("\u63D0\u793A"),type:"success",message:s("\u590D\u5236\u6210\u529F")})},contextmenu:i=>{c.isLock&&i.stopPropagation()}}}});function F(e,t,o,c,s,a){return h(),A("div",{class:"wrapper",ref:"verseElement",style:u({fontSize:e.componentSetting.textFontSize+"px",color:e.componentSetting.textColor,textShadow:e.componentSetting.textShadow,padding:e.componentSetting.padding+"px",fontFamily:e.componentSetting.fontFamily,...e.positionCSS})},[x("span",{style:u(e.componentSetting.clickActionType?"cursor: pointer":""),onClick:t[0]||(t[0]=(...n)=>e.handleClickAction&&e.handleClickAction(...n)),onContextmenu:t[1]||(t[1]=(...n)=>e.contextmenu&&e.contextmenu(...n))},I(e.verse),37)],4)}var B=f(E,[["render",F],["__scopeId","data-v-379f32e4"]]);export{B as default};
