var L=Object.defineProperty;var _=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var y=(t,e,n)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w=(t,e)=>{for(var n in e||(e={}))F.call(e,n)&&y(t,n,e[n]);if(_)for(var n of _(e))E.call(e,n)&&y(t,n,e[n]);return t};import{_ as T,m as z,d as B}from"./index.b41e5053.js";import{h as D,k as $,i as f,r as g,o as j,b as N,K as U,e as s,g as c,A as d,D as r,F as V,v as q,u as k,p as K,f as M,d as i,E as x}from"./vendor.f6148a0a.js";const O=t=>(K("data-v-1d6b49c2"),t=t(),M(),t),P={class:"weibo"},R=O(()=>c("div",{class:"logo-text"},"\u5FAE\u535A\u70ED\u641C",-1)),W={key:1,class:"loading"},G={key:2,class:"error"},H={key:3,class:"list"},J={class:"num",style:{width:"24px",height:"24px"}},Q=["src"],X={class:"title"},Y=["href"],Z={key:0,class:"count"},tt={class:"icon",style:{width:"24px",height:"24px"}},et=["src"],ot=D({props:{componentSetting:{type:Object,required:!0}},setup(t){const e=t,n=$(),b=f(()=>n.state.isLock),A="https://h5.sinaimg.cn/m/weibo-lite/img/pwalogo.417d1674.svg",m=g([]),u=g(!1),p=g(!1),v=async()=>{try{u.value=!0,p.value=!1;const l=await fetch(`${B}/api/weiboList?limit=${e.componentSetting.limit||10}`),{list:S}=await l.json();m.value=S.map(o=>({num:o.pic,id:o.desc,title:o.desc,icon:o.icon,link:o.scheme,count:~~(o.desc_extr/1e4)}))}catch(l){p.value=!0,console.error(l)}finally{u.value=!1}};let a;function h(){v(),a&&window.clearInterval(a),a=window.setInterval(()=>{v()},e.componentSetting.duration*60*1e3)}j(()=>h()),N(()=>window.clearInterval(a)),U(()=>[e.componentSetting.duration,e.componentSetting.limit],()=>h());const C=f(()=>z(e.componentSetting.position)),I=()=>{e.componentSetting.clickActionType===1?h():e.componentSetting.clickActionType===2&&window.open("https://weibo.com/")};return(l,S)=>(i(),s("div",{class:"wrapper",style:d(w({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily},k(C)))},[c("div",P,[t.componentSetting.showTitle!==!1?(i(),s("div",{key:0,class:"logo",style:d({cursor:t.componentSetting.clickActionType?"pointer":"default"}),onClick:I},[c("img",{src:A,alt:"Weibo",style:d({filter:`drop-shadow(${t.componentSetting.iconShadow})`})},null,4),R],4)):r("",!0),u.value?(i(),s("div",W,"Loading...")):p.value?(i(),s("div",G,"Something error!")):(i(),s("div",H,[(i(!0),s(V,null,q(m.value,o=>(i(),s("div",{class:"list-item",key:o.id},[c("div",J,[o.num?(i(),s("img",{key:0,src:o.num,style:{width:"100%",height:"100%"}},null,8,Q)):r("",!0)]),c("div",X,[c("a",{href:o.link,target:"_blank",style:d(k(b)?"":"pointer-events: none")},x(o.title),13,Y)]),o.count?(i(),s("div",Z,x(o.count)+"w",1)):r("",!0),c("div",tt,[o.icon?(i(),s("img",{key:0,src:o.icon,style:{width:"100%",height:"100%"}},null,8,et)):r("",!0)])]))),128))]))])],4))}});var ct=T(ot,[["__scopeId","data-v-1d6b49c2"]]);export{ct as default};
