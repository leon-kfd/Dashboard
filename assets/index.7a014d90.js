import{_ as C,d as I,u as L,G as _,r as h,x as A,y as F,w as T,H as j,o,h as n,e as i,C as l,g as d,F as z,j as B,k as y,t as S,s as E,v as $,R as D}from"./index.824ed447.js";const N=e=>(E("data-v-1c9fb5f7"),e=e(),$(),e),R={class:"weibo"},U=N(()=>i("div",{class:"logo-text"},"\u5FAE\u535A\u70ED\u641C",-1)),V={key:1,class:"loading"},q={key:2,class:"error"},G={key:3,class:"list"},H={class:"num",style:{width:"24px",height:"24px"}},M=["src"],O={class:"title"},P=["href"],W={key:0,class:"count"},J={class:"icon",style:{width:"24px",height:"24px"}},K=["src"],Q=I({__name:"index",props:{componentSetting:{type:Object,required:!0}},setup(e){const s=e,f=L(),w=_(()=>f.isLock),k="https://h5.sinaimg.cn/m/weibo-lite/img/pwalogo.417d1674.svg",g=h([]),r=h(!1),u=h(!1),m=async()=>{try{r.value=!0,u.value=!1;const a=await fetch(`${D}/api/weiboList?limit=${s.componentSetting.limit||10}`),{list:v}=await a.json();g.value=v.map(t=>({num:t.pic,id:t.desc,title:t.desc,icon:t.icon,link:t.scheme,count:~~(t.desc_extr/1e4)}))}catch(a){u.value=!0,console.error(a)}finally{r.value=!1}};let c;function p(){m(),c&&window.clearInterval(c),c=window.setInterval(()=>{m()},s.componentSetting.duration*60*1e3)}A(()=>p()),F(()=>window.clearInterval(c)),T(()=>[s.componentSetting.duration,s.componentSetting.limit],()=>p());const x=_(()=>j(s.componentSetting.position)),b=()=>{s.componentSetting.clickActionType===1?p():s.componentSetting.clickActionType===2&&window.open("https://weibo.com/")};return(a,v)=>(o(),n("div",{class:"wrapper",style:l({fontSize:e.componentSetting.textFontSize+"px",color:e.componentSetting.textColor,textShadow:e.componentSetting.textShadow,padding:e.componentSetting.padding+"px",fontFamily:e.componentSetting.fontFamily,...y(x)})},[i("div",R,[e.componentSetting.showTitle!==!1?(o(),n("div",{key:0,class:"logo",style:l({cursor:e.componentSetting.clickActionType?"pointer":"default"}),onClick:b},[i("img",{src:k,alt:"Weibo",style:l({filter:`drop-shadow(${e.componentSetting.iconShadow})`})},null,4),U],4)):d("",!0),r.value?(o(),n("div",V,"Loading...")):u.value?(o(),n("div",q,"Something error!")):(o(),n("div",G,[(o(!0),n(z,null,B(g.value,t=>(o(),n("div",{class:"list-item",key:t.id},[i("div",H,[t.num?(o(),n("img",{key:0,src:t.num,style:{width:"100%",height:"100%"}},null,8,M)):d("",!0)]),i("div",O,[i("a",{href:t.link,target:"_blank",style:l(y(w)?"":"pointer-events: none")},S(t.title),13,P)]),t.count?(o(),n("div",W,S(t.count)+"w",1)):d("",!0),i("div",J,[t.icon?(o(),n("img",{key:0,src:t.icon,style:{width:"100%",height:"100%"}},null,8,K)):d("",!0)])]))),128))]))])],4))}});var Y=C(Q,[["__scopeId","data-v-1c9fb5f7"]]);export{Y as default};
