import{W as h,X as j,d as T,r as C,w as q,G as p,_ as z,o as c,k as r,g as a,t as D,F as A,m as P,D as H,E as L,p as F,q as V,u as R,x as K,L as b,h as W,f as Z,Y as G,N as Y,Z as X,R as B}from"./index.ae08bcff.js";import{g as Q,l as U}from"./color.556e4bcb.js";h.extend(j);const x=T({name:"DatePicker",props:{date:String,todo:{type:Object,required:!0},isDark:{type:Boolean,default:!1}},emit:["selectDate"],setup(e,{emit:o}){const d=C("");q(()=>e.date,k=>{d.value=h(k).format("YYYY-MM")},{immediate:!0});const y=["S","M","T","W","T","F","S"],n=p(()=>{const k=h().month(h(d.value).month()).startOf("month");let g=h().week(h(k).week()).startOf("week");const w=[];for(let M=0;M<35;M++){const E=~~g.format("DD"),N=g.format("YYYY-MM-DD"),O=~~g.format("MM");w.push({label:E,value:N,month:O}),g=g.add(1,"d")}return w}),S=p(()=>~~h(d.value).format("MM")),s=p(()=>h(d.value).format("MMM, YYYY")),u=p(()=>Object.keys(e.todo).filter(k=>e.todo[k].some(g=>!g.isChecked)));return{weekStrArr:y,dayList:n,selectedMonth:S,labelMonth:s,hasTodoListDates:u,handleClickDay:k=>o("selectDate",k),handlePrevClick:()=>{d.value=h(d.value).subtract(1,"month").format("YYYY-MM")},handleNextClick:()=>{d.value=h(d.value).add(1,"month").format("YYYY-MM")}}}}),J=e=>(F("data-v-1bb6d588"),e=e(),V(),e),ee={class:"calendar__date"},te=J(()=>a("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[a("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1)),oe=[te],ne={class:"calendar__head content"},ae=J(()=>a("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[a("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1)),se=[ae],ie=["onClick"];function le(e,o,d,y,n,S){return c(),r("div",{class:"date-picker",style:L({"--themeTextColor1":e.isDark?"#fff":"#464646","--themeTextColor2":e.isDark?"#464646":"#fff"})},[a("div",ee,[a("div",{class:"calendar__head prev",onClick:o[0]||(o[0]=(...s)=>e.handlePrevClick&&e.handlePrevClick(...s))},oe),a("div",ne,D(e.labelMonth),1),a("div",{class:"calendar__head next",onClick:o[1]||(o[1]=(...s)=>e.handleNextClick&&e.handleNextClick(...s))},se),(c(!0),r(A,null,P(e.weekStrArr,(s,u)=>(c(),r("div",{class:"calendar__day",key:s+u},D(s),1))),128)),(c(!0),r(A,null,P(e.dayList,s=>(c(),r("div",{class:H(["calendar__number",{"not-this-month":s.month!==e.selectedMonth,active:s.value===e.date,tips:e.hasTodoListDates.includes(s.value)}]),key:s.value,onClick:u=>e.handleClickDay(s)},D(s.label),11,ie))),128))])],4)}var de=z(x,[["render",le],["__scopeId","data-v-1bb6d588"]]);const ce=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],re=T({name:"TodoList",components:{DatePicker:de},directives:{focus(e){document.activeElement!==e&&e.focus()}},props:{componentSetting:{type:Object,required:!0},element:{type:Object,required:!0},isAction:{type:Boolean,default:!1}},setup(e){const o=R(),d=p(()=>Q(e.componentSetting.themeColor||"#643a7a")<150),y=p(()=>U(e.componentSetting.themeColor||"#643a7a",d.value?50:-50)),n=C(),S=C(),s=C(270);K(()=>{var t,l;n.value=h().format("YYYY-MM-DD"),(l=(t=S.value)==null?void 0:t.$el)!=null&&l.offsetHeight&&(s.value=S.value.$el.offsetHeight+30)});const u=C(""),i=C(!1),m=p(()=>e.componentSetting.todo[n.value]||[]),v=p(()=>ce[new Date(n.value).getDay()]),k=p(()=>{const t=new Date(n.value).toDateString().split(" ");return`${t[1]} ${t[2]}, ${t[3]}`});return{weekDay:v,formatterDate:k,todoList:m,handleChecked:t=>{const l=!m.value[t].isChecked,f=JSON.parse(JSON.stringify(e.element));e.isAction?(f.actionSetting.actionClickValue.componentSetting.todo[n.value][t].isChecked=l,o.updateActionElement(f)):f.componentSetting.todo[n.value][t].isChecked=l,o.editComponent(f)},handleRemove:t=>{const l=JSON.parse(JSON.stringify(e.element));e.isAction?(l.actionSetting.actionClickValue.componentSetting.todo[n.value].splice(t,1),o.updateActionElement(l)):l.componentSetting.todo[n.value].splice(t,1),o.editComponent(l)},handleAdd:()=>{u.value="";const t=JSON.parse(JSON.stringify(e.element)),l={content:"",isChecked:!1,isEditing:!0};e.isAction?(t.actionSetting.actionClickValue.componentSetting.todo[n.value]?t.actionSetting.actionClickValue.componentSetting.todo[n.value].push(l):t.actionSetting.actionClickValue.componentSetting.todo[n.value]=[l],o.updateActionElement(t)):t.componentSetting.todo[n.value]?t.componentSetting.todo[n.value].push(l):t.componentSetting.todo[n.value]=[l],o.editComponent(t)},handleEditSubmit:(t,l,f)=>{if(l.isEditing){const _=JSON.parse(JSON.stringify(e.element)),$=e.isAction?_.actionSetting.actionClickValue.componentSetting.todo[n.value]:_.componentSetting.todo[n.value];t.currentTarget.value?($[f].content=u.value=t.currentTarget.value,$[f].isEditing=!1):$.splice(f,1),e.isAction&&o.updateActionElement(_),o.editComponent(_)}},editingValue:u,showDatePicker:i,date:n,updateDate:t=>{n.value=t.value},themeLightColor:y,isDark:d,dateTimePickerDom:S,pickerHeight:s,contextmenu:t=>{o.isLock&&t.stopPropagation()}}}}),I=e=>(F("data-v-607f9d98"),e=e(),V(),e),he={class:"head"},ue={class:"list"},me=["checked"],ve=["onClick"],ke=["value","onBlur","onKeyup"],pe=["onClick"],ge={class:"wrapper"},fe=["width","height"],Se=I(()=>a("path",{class:"checkmark",fill:"none","stroke-width":"8","stroke-miterlimit":"10",d:"M81.7,17.8C73.5,9.3,62,4,49.2,4C24.3,4,4,24.3,4,49.2s20.3,45.2,45.2,45.2s45.2-20.3,45.2-45.2c0-8.6-2.4-16.6-6.5-23.4l0,0L45.6,68.2L24.7,47.3"},null,-1)),Ce=[Se],De=["onClick"],ye=["width","height"],_e=I(()=>a("path",{d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,-1)),we=[_e],Me={viewBox:"0 0 1024 1024",width:"20",height:"20"},$e=["fill"];function be(e,o,d,y,n,S){const s=Z("DatePicker"),u=G("focus");return c(),r("div",{class:"todo-list-card",style:L({"--themeColor":e.componentSetting.themeColor,"--themeLightColor":e.themeLightColor,fontSize:e.componentSetting.baseFontSize+"px",padding:e.componentSetting.padding+"px"}),onContextmenu:o[3]||(o[3]=(...i)=>e.contextmenu&&e.contextmenu(...i))},[a("div",he,[a("div",{class:"title",onClick:o[0]||(o[0]=b(i=>e.showDatePicker=!e.showDatePicker,["stop"]))},D(e.weekDay),1),a("div",{class:"subtitle",onClick:o[1]||(o[1]=b(i=>e.showDatePicker=!e.showDatePicker,["stop"]))},D(e.formatterDate),1),a("div",{class:"picker",style:L(e.showDatePicker?`border-bottom: 1px solid var(--themeLightColor); height: ${e.pickerHeight}px`:"")},[W(s,{ref:"dateTimePickerDom",date:e.date,todo:e.componentSetting.todo,onSelectDate:e.updateDate,isDark:e.isDark},null,8,["date","todo","onSelectDate","isDark"])],4)]),a("ul",ue,[(c(!0),r(A,null,P(e.todoList,(i,m)=>(c(),r("li",{class:"list-item",key:i.content+m},[a("input",{type:"checkbox",name:"todo",checked:i.isChecked},null,8,me),i.isEditing?Y((c(),r("input",{key:1,type:"text",class:"edit",value:e.editingValue,onBlur:v=>e.handleEditSubmit(v,i,m),onKeyup:X(v=>e.handleEditSubmit(v,i,m),["enter"])},null,40,ke)),[[u]]):(c(),r("div",{key:0,class:"text",onClick:v=>e.handleChecked(m)},D(i.content),9,ve)),Y(a("div",{class:"button",onClick:v=>e.handleChecked(m)},null,8,pe),[[B,!i.isChecked]]),Y(a("div",ge,[(c(),r("svg",{viewBox:"0 0 98.5 98.5",width:20*e.componentSetting.baseFontSize/16,height:20*e.componentSetting.baseFontSize/16},Ce,8,fe))],512),[[B,i.isChecked]]),a("div",{class:"close",onClick:b(v=>e.handleRemove(m),["stop"])},[(c(),r("svg",{viewBox:"0 0 1024 1024",width:20*e.componentSetting.baseFontSize/16,height:20*e.componentSetting.baseFontSize/16},we,8,ye))],8,De)]))),128))]),a("div",{class:"add",onClick:o[2]||(o[2]=(...i)=>e.handleAdd&&e.handleAdd(...i))},[(c(),r("svg",Me,[a("path",{fill:e.isDark?"#fff":"#464646",d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,8,$e)]))])],36)}var Pe=z(re,[["render",be],["__scopeId","data-v-607f9d98"]]);export{Pe as default};
