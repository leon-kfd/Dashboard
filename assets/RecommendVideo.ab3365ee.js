import{_ as B,d as E,I as L,r as u,x as S,R as g,b as $,o as s,i as t,f as i,t as y,g as I,e as R,F as v,k as f,h as _,K as A,s as D,v as N}from"./index.8a015512.js";const j=l=>(D("data-v-81bfa0ac"),l=l(),N(),l),F={class:"tips"},U={key:0,class:"video-wrapper"},O=["onClick"],z={class:"img-wrapper"},K=["src"],M={key:1,class:"loading-wrapper"},T=j(()=>i("div",{class:"custom-loading"},[i("span",{class:"loader"})],-1)),q=[T],G=E({__name:"RecommendVideo",emits:["submit"],setup(l,{emit:b}){const{t:m}=L(),c=u(!1),d=u(!1),r=u(!1),h=u([]);S(async()=>{const n=await(await fetch(`${g}/pixabayVideos`)).json();h.value=n.data.list});const V=()=>{d.value=!0,c.value||(c.value=!0)},k=async o=>{try{r.value=!0;const a=await(await fetch(`${g}/tapi/pixabay/videos/?id=${o.id}`)).json();if((a==null?void 0:a.hits)&&a.hits.length){const e=a.hits[0];let p=Object.values(e.videos).find(C=>C.width===1920);p||(p=e.videos.large);const x=p.url;b("submit",x),d.value=!1}else throw new Error("Something error")}catch{A({title:m("\u9519\u8BEF"),type:"error",message:m("\u83B7\u53D6\u52A8\u6001\u58C1\u7EB8URL\u5931\u8D25")})}finally{r.value=!1}};return(o,n)=>{const a=$("easy-dialog");return s(),t(v,null,[i("button",{type:"button",class:"btn btn-small btn-primary",style:{margin:"0","margin-right":"5px"},onClick:V},y(o.$t("\u52A8\u6001\u58C1\u7EB8\u63A8\u8350")),1),I(a,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=e=>d.value=e),title:o.$t("\u52A8\u6001\u58C1\u7EB8\u63A8\u8350"),width:"min(760px, 94vw)",height:"min(480px, 80vh)"},{default:R(()=>[i("div",F,y(o.$t("recommendVideoTips")),1),c.value?(s(),t("div",U,[(s(!0),t(v,null,f(h.value,e=>(s(),t("div",{class:"video",key:e.img,onClick:w=>k(e)},[i("div",z,[e.img?(s(),t("img",{key:0,src:e.img,loading:"lazy"},null,8,K)):_("",!0)])],8,O))),128)),(s(),t(v,null,f(4,e=>i("div",{class:"video-fake",key:e})),64))])):_("",!0),r.value?(s(),t("div",M,q)):_("",!0)]),_:1},8,["modelValue","title"])],64)}}});var J=B(G,[["__scopeId","data-v-81bfa0ac"]]);export{J as default};
