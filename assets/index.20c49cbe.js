var t=Object.defineProperty,e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(e,o,n)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,a=(t,a)=>{for(var r in a||(a={}))o.call(a,r)&&i(t,r,a[r]);if(e)for(var r of e(a))n.call(a,r)&&i(t,r,a[r]);return t};import{_ as r,m as l,b as s,a as c}from"./index.25a52ed2.js";import{z as d,C as p,Z as m,F as u,x as v,D as g,a1 as f,a6 as y,a2 as S,H as w,I as _,M as j,U as b}from"./element-plus.bd20adc7.js";const h=d({name:"JueJin",props:{componentSetting:{type:Object,required:!0}},setup(t){const e=p([]),o=p(!1),n=p(!1),i=async()=>{try{o.value=!0,n.value=!1;const{data:i,err_no:a}=await s(`${c}/api/transfer`,{target:"https://api.juejin.cn/recommend_api/v1/article/recommend_all_feed",_noHeaders:1,client_type:2680,cursor:"0",id_type:2,limit:t.componentSetting.limit||10,sort_type:200});if(0!==a)throw new Error("Api server error");{const t=i.map((t=>{var e;const o=null==(e=null==t?void 0:t.item_info)?void 0:e.article_info;return{id:null==o?void 0:o.article_id,title:null==o?void 0:o.title,like:null==o?void 0:o.digg_count,view:null==o?void 0:o.view_count}}));e.value=t}}catch(i){n.value=!0,console.error(i)}finally{o.value=!1}};let a;function r(){i(),a&&window.clearInterval(a),a=window.setInterval((()=>{i()}),60*t.componentSetting.duration*1e3)}m((()=>r())),u((()=>window.clearInterval(a))),v((()=>[t.componentSetting.duration,t.componentSetting.limit]),(()=>r()));const d=g((()=>l(t.componentSetting.position)));return{logo:"https://sf3-scmcdn2-tos.pstatp.com/xitu_juejin_web/img/logo.a7995ad.svg",list:e,positionCSS:d,loading:o,error:n}}}),x={class:"juejin"},k={class:"logo"},O=["src"],I={key:0,class:"loading"},C={key:1,class:"error"},F={key:2,class:"list"},$={class:"title"},z=["href"],J={class:"like"};var P=r(h,[["render",function(t,e,o,n,i,r){return j(),f("div",{class:"wrapper",style:S(a({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily},t.positionCSS))},[y("div",x,[y("div",k,[y("img",{src:t.logo,alt:"Juejin",style:S({filter:`drop-shadow(${t.componentSetting.iconShadow})`})},null,12,O)]),t.loading?(j(),f("div",I,"Loading...")):t.error?(j(),f("div",C,"Something error!")):(j(),f("div",F,[(j(!0),f(w,null,_(t.list,(e=>(j(),f("div",{class:"list-item",key:e.id},[y("div",$,[y("a",{href:`https://juejin.cn/post/${e.id}`,target:"_blank",style:S(!t.$store.state.isLock&&"pointer-events: none")},b(e.title),13,z)]),y("div",J,"ğŸ‘"+b(e.like),1)])))),128))]))])],4)}],["__scopeId","data-v-320ca56e"]]);export{P as default};
