import{ah as h,ai as I,i as T,r as C,M as H,j as k,e as d,f as c,h as a,H as D,F as A,y as P,B as q,D as L,p as V,g as z,o as K,V as b,v as R,q as W,t as Z,A as Y,aj as G,ag as N}from"./vendor.6c4554d3.js";import{_ as F,u as Q}from"./index.aa7b76d5.js";import{l as U,g as X}from"./color.556e4bcb.js";h.extend(I);const x=T({name:"DatePicker",props:{date:String,todo:{type:Object,required:!0},isDark:{type:Boolean,default:!1}},emit:["selectDate"],setup(e,{emit:o}){const r=C("");H(()=>e.date,p=>{r.value=h(p).format("YYYY-MM")},{immediate:!0});const y=["S","M","T","W","T","F","S"],n=k(()=>{const p=h().month(h(r.value).month()).startOf("month");let g=h().week(h(p).week()).startOf("week");const w=[];for(let M=0;M<35;M++){const O=~~g.format("DD"),B=g.format("YYYY-MM-DD"),E=~~g.format("MM");w.push({label:O,value:B,month:E}),g=g.add(1,"d")}return w}),S=k(()=>~~h(r.value).format("MM")),i=k(()=>h(r.value).format("MMM, YYYY")),u=k(()=>Object.keys(e.todo).filter(p=>e.todo[p].some(g=>!g.isChecked)));return{weekStrArr:y,dayList:n,selectedMonth:S,labelMonth:i,hasTodoListDates:u,handleClickDay:p=>o("selectDate",p),handlePrevClick:()=>{r.value=h(r.value).subtract(1,"month").format("YYYY-MM")},handleNextClick:()=>{r.value=h(r.value).add(1,"month").format("YYYY-MM")}}}}),J=e=>(V("data-v-d74834b0"),e=e(),z(),e),ee={class:"calendar__date"},te=J(()=>a("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[a("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1)),oe=[te],ne={class:"calendar__head content"},ae=J(()=>a("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[a("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1)),ie=[ae],se=["onClick"];function le(e,o,r,y,n,S){return d(),c("div",{class:"date-picker",style:L({"--themeTextColor1":e.isDark?"#fff":"#464646","--themeTextColor2":e.isDark?"#464646":"#fff"})},[a("div",ee,[a("div",{class:"calendar__head prev",onClick:o[0]||(o[0]=(...i)=>e.handlePrevClick&&e.handlePrevClick(...i))},oe),a("div",ne,D(e.labelMonth),1),a("div",{class:"calendar__head next",onClick:o[1]||(o[1]=(...i)=>e.handleNextClick&&e.handleNextClick(...i))},ie),(d(!0),c(A,null,P(e.weekStrArr,(i,u)=>(d(),c("div",{class:"calendar__day",key:i+u},D(i),1))),128)),(d(!0),c(A,null,P(e.dayList,i=>(d(),c("div",{class:q(["calendar__number",{"not-this-month":i.month!==e.selectedMonth,active:i.value===e.date,tips:e.hasTodoListDates.includes(i.value)}]),key:i.value,onClick:u=>e.handleClickDay(i)},D(i.label),11,se))),128))])],4)}var de=F(x,[["render",le],["__scopeId","data-v-d74834b0"]]);const ce=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],re=T({name:"TodoList",components:{DatePicker:de},directives:{focus(e){document.activeElement!==e&&e.focus()}},props:{componentSetting:{type:Object,required:!0},element:{type:Object,required:!0},isAction:{type:Boolean,default:!1}},setup(e){const o=Q(),r=k(()=>U(e.componentSetting.themeColor||"#643a7a",50)),y=k(()=>X(e.componentSetting.themeColor||"#643a7a")<150),n=C(),S=C(),i=C(270);K(()=>{var t,l;n.value=h().format("YYYY-MM-DD"),(l=(t=S.value)==null?void 0:t.$el)!=null&&l.offsetHeight&&(i.value=S.value.$el.offsetHeight+30)});const u=C(""),s=C(!1),m=k(()=>e.componentSetting.todo[n.value]||[]),v=k(()=>ce[new Date(n.value).getDay()]),p=k(()=>{const t=new Date(n.value).toDateString().split(" ");return`${t[1]} ${t[2]}, ${t[3]}`});return{weekDay:v,formatterDate:p,todoList:m,handleChecked:t=>{const l=!m.value[t].isChecked,f=JSON.parse(JSON.stringify(e.element));e.isAction?(f.actionSetting.actionClickValue.componentSetting.todo[n.value][t].isChecked=l,o.updateActionElement(f)):f.componentSetting.todo[n.value][t].isChecked=l,o.editComponent(f)},handleRemove:t=>{const l=JSON.parse(JSON.stringify(e.element));e.isAction?(l.actionSetting.actionClickValue.componentSetting.todo[n.value].splice(t,1),o.updateActionElement(l)):l.componentSetting.todo[n.value].splice(t,1),o.editComponent(l)},handleAdd:()=>{u.value="";const t=JSON.parse(JSON.stringify(e.element)),l={content:"",isChecked:!1,isEditing:!0};e.isAction?(t.actionSetting.actionClickValue.componentSetting.todo[n.value]?t.actionSetting.actionClickValue.componentSetting.todo[n.value].push(l):t.actionSetting.actionClickValue.componentSetting.todo[n.value]=[l],o.updateActionElement(t)):t.componentSetting.todo[n.value]?t.componentSetting.todo[n.value].push(l):t.componentSetting.todo[n.value]=[l],o.editComponent(t)},handleEditSubmit:(t,l,f)=>{if(l.isEditing){const _=JSON.parse(JSON.stringify(e.element)),$=e.isAction?_.actionSetting.actionClickValue.componentSetting.todo[n.value]:_.componentSetting.todo[n.value];t.currentTarget.value?($[f].content=u.value=t.currentTarget.value,$[f].isEditing=!1):$.splice(f,1),e.isAction&&o.updateActionElement(_),o.editComponent(_)}},editingValue:u,showDatePicker:s,date:n,updateDate:t=>{n.value=t.value},themeLightColor:r,isDark:y,dateTimePickerDom:S,pickerHeight:i,contextmenu:t=>{o.isLock&&t.stopPropagation()}}}}),j=e=>(V("data-v-440c9e7a"),e=e(),z(),e),he={class:"head"},ue={class:"list"},me=["checked"],ve=["onClick"],pe=["value","onBlur","onKeyup"],ke=["onClick"],ge={class:"wrapper"},fe=["width","height"],Se=j(()=>a("path",{class:"checkmark",fill:"none","stroke-width":"8","stroke-miterlimit":"10",d:"M81.7,17.8C73.5,9.3,62,4,49.2,4C24.3,4,4,24.3,4,49.2s20.3,45.2,45.2,45.2s45.2-20.3,45.2-45.2c0-8.6-2.4-16.6-6.5-23.4l0,0L45.6,68.2L24.7,47.3"},null,-1)),Ce=[Se],De=["onClick"],ye=["width","height"],_e=j(()=>a("path",{d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,-1)),we=[_e],Me={viewBox:"0 0 1024 1024",width:"20",height:"20"},$e=["fill"];function be(e,o,r,y,n,S){const i=W("DatePicker"),u=Z("focus");return d(),c("div",{class:"todo-list-card",style:L({"--themeColor":e.componentSetting.themeColor,"--themeLightColor":e.themeLightColor,fontSize:e.componentSetting.baseFontSize+"px",padding:e.componentSetting.padding+"px"}),onContextmenu:o[3]||(o[3]=(...s)=>e.contextmenu&&e.contextmenu(...s))},[a("div",he,[a("div",{class:"title",onClick:o[0]||(o[0]=b(s=>e.showDatePicker=!e.showDatePicker,["stop"]))},D(e.weekDay),1),a("div",{class:"subtitle",onClick:o[1]||(o[1]=b(s=>e.showDatePicker=!e.showDatePicker,["stop"]))},D(e.formatterDate),1),a("div",{class:"picker",style:L(e.showDatePicker?`border-bottom: 1px solid var(--themeLightColor); height: ${e.pickerHeight}px`:"")},[R(i,{ref:"dateTimePickerDom",date:e.date,todo:e.componentSetting.todo,onSelectDate:e.updateDate,isDark:e.isDark},null,8,["date","todo","onSelectDate","isDark"])],4)]),a("ul",ue,[(d(!0),c(A,null,P(e.todoList,(s,m)=>(d(),c("li",{class:"list-item",key:s.content+m},[a("input",{type:"checkbox",name:"todo",checked:s.isChecked},null,8,me),s.isEditing?Y((d(),c("input",{key:1,type:"text",class:"edit",value:e.editingValue,onBlur:v=>e.handleEditSubmit(v,s,m),onKeyup:G(v=>e.handleEditSubmit(v,s,m),["enter"])},null,40,pe)),[[u]]):(d(),c("div",{key:0,class:"text",onClick:v=>e.handleChecked(m)},D(s.content),9,ve)),Y(a("div",{class:"button",onClick:v=>e.handleChecked(m)},null,8,ke),[[N,!s.isChecked]]),Y(a("div",ge,[(d(),c("svg",{viewBox:"0 0 98.5 98.5",width:20*e.componentSetting.baseFontSize/16,height:20*e.componentSetting.baseFontSize/16},Ce,8,fe))],512),[[N,s.isChecked]]),a("div",{class:"close",onClick:b(v=>e.handleRemove(m),["stop"])},[(d(),c("svg",{viewBox:"0 0 1024 1024",width:20*e.componentSetting.baseFontSize/16,height:20*e.componentSetting.baseFontSize/16},we,8,ye))],8,De)]))),128))]),a("div",{class:"add",onClick:o[2]||(o[2]=(...s)=>e.handleAdd&&e.handleAdd(...s))},[(d(),c("svg",Me,[a("path",{fill:e.isDark?"#fff":"#464646",d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,8,$e)]))])],36)}var Le=F(re,[["render",be],["__scopeId","data-v-440c9e7a"]]);export{Le as default};
