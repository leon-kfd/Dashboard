import{_ as k,d as j,u as x,G as f,r as u,x as C,y as L,w as F,H as b,o,i,f as s,C as p,h as A,F as I,k as T,t as S,R as $}from"./index.63d099ed.js";const z={class:"juejin"},B={key:0,class:"logo"},D={key:1,class:"loading"},N={key:2,class:"error"},R={key:3,class:"list"},U={class:"title"},V=["href"],q={class:"like"},E="https://sf3-scmcdn2-tos.pstatp.com/xitu_juejin_web/img/logo.a7995ad.svg",G=j({__name:"index",props:{componentSetting:{type:Object,required:!0}},setup(t){const n=t,_=x(),h=f(()=>_.isLock),m=u([]),l=u(!1),r=u(!1),g=async()=>{try{l.value=!0,r.value=!1;const c=await fetch(`${$}/api/juejinList?limit=${n.componentSetting.limit||10}`),{list:v}=await c.json();m.value=v.map(e=>({id:e.article_id,title:e.title,like:e.digg_count,view:e.view_count}))}catch(c){r.value=!0,console.error(c)}finally{l.value=!1}};let a;function d(){g(),a&&window.clearInterval(a),a=window.setInterval(()=>{g()},n.componentSetting.duration*60*1e3)}C(()=>d()),L(()=>window.clearInterval(a)),F(()=>[n.componentSetting.duration,n.componentSetting.limit],()=>d());const y=f(()=>b(n.componentSetting.position)),w=()=>{n.componentSetting.clickActionType===1?d():n.componentSetting.clickActionType===2&&window.open("https://juejin.cn/")};return(c,v)=>(o(),i("div",{class:"wrapper material-juejinlist",style:p({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily,...y.value})},[s("div",z,[t.componentSetting.showTitle!==!1?(o(),i("div",B,[s("img",{src:E,style:p({filter:`drop-shadow(${t.componentSetting.iconShadow})`,cursor:t.componentSetting.clickActionType?"pointer":"default"}),alt:"Juejin",onClick:w},null,4)])):A("",!0),l.value?(o(),i("div",D,"Loading...")):r.value?(o(),i("div",N,"Something error!")):(o(),i("div",R,[(o(!0),i(I,null,T(m.value,e=>(o(),i("div",{class:"list-item",key:e.id},[s("div",U,[s("a",{href:`https://juejin.cn/post/${e.id}`,target:"_blank",style:p(h.value?"":"pointer-events: none")},S(e.title),13,V)]),s("div",q,"\u{1F44D}"+S(e.like),1)]))),128))]))])],4))}});var J=k(G,[["__scopeId","data-v-4e4bf6db"]]);export{J as default};
