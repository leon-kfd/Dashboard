import{_ as q,d as H,u as O,G as a,r as y,x as P,y as R,w as U,H as J,o,h as n,e as s,C as d,g as c,F as K,j as Q,k as g,t as l,R as _,s as W,v as X}from"./index.857852b3.js";import{g as Y}from"./color.556e4bcb.js";const f=t=>(W("data-v-2e828ca8"),t=t(),X(),t),Z={class:"github"},tt=["fill"],et=f(()=>s("div",{class:"logo-text"},"Github Trending",-1)),ot={key:1,class:"loading"},nt={key:2,class:"error"},it={key:3,class:"list"},st=["onClick"],at={class:"title"},ct={key:0,class:"desc"},lt={key:1,class:"today-star"},rt={class:"footer"},dt={key:0,class:"language item"},gt={key:1,class:"total-star item"},ut=["width","height"],ht=f(()=>s("path",{"fill-rule":"evenodd",d:"M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"},null,-1)),vt=[ht],pt={key:2,class:"forked item"},St=["width","height"],mt=f(()=>s("path",{"fill-rule":"evenodd",d:"M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"},null,-1)),yt=[mt],_t=H({__name:"index",props:{componentSetting:{type:Object,required:!0}},setup(t){const i=t,z=O(),C=a(()=>z.isLock),k=y([]),h=y(!1),v=y(!1),p=a(()=>Y(i.componentSetting.textColor||"#262626")<150),b=a(()=>p.value?"#666":"#ccc"),A=a(()=>p.value?"#777":"#bbb"),F=a(()=>p.value?"#888":"#aaa"),w=async()=>{try{h.value=!0,v.value=!1;const m=await(await fetch("https://www.unpkg.com/@wcj/github-rank/dist/trending-daily.json")).json();if(m){const e=m.slice(0,i.componentSetting.limit).map(x=>{const{rank:I,full_name:T,language:j,color:M,description:N,forked:$,stargazers_count:D,todayStar:E,html_url:G}=x;return{id:I,title:T,language:j,color:M,description:N,forked:$,todayStar:E,totalStar:D,link:G}});k.value=e}else throw new Error("Api server error")}catch(r){v.value=!0,console.error(r)}finally{h.value=!1}};let u;function S(){w(),u&&window.clearInterval(u),u=window.setInterval(()=>{w()},i.componentSetting.duration*60*1e3)}P(()=>S()),R(()=>window.clearInterval(u)),U(()=>[i.componentSetting.duration,i.componentSetting.limit],()=>S());const L=a(()=>J(i.componentSetting.position)),V=r=>{window.open(r.link)},B=()=>{i.componentSetting.clickActionType===1?S():i.componentSetting.clickActionType===2&&window.open("https://github.com/")};return(r,m)=>(o(),n("div",{class:"wrapper",style:d({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily,...g(L),"--grey1":g(b),"--grey2":g(A),"--grey3":g(F)})},[s("div",Z,[t.componentSetting.showTitle!==!1?(o(),n("div",{key:0,class:"logo",style:d({cursor:t.componentSetting.clickActionType?"pointer":"default"}),onClick:B},[(o(),n("svg",{viewBox:"0 0 1024 1024",style:d({filter:`drop-shadow(${t.componentSetting.iconShadow})`})},[s("path",{fill:t.componentSetting.textColor,d:"M512 42.666667A464.64 464.64 0 0 0 42.666667 502.186667 460.373333 460.373333 0 0 0 363.52 938.666667c23.466667 4.266667 32-9.813333 32-22.186667v-78.08c-130.56 27.733333-158.293333-61.44-158.293333-61.44a122.026667 122.026667 0 0 0-52.053334-67.413333c-42.666667-28.16 3.413333-27.733333 3.413334-27.733334a98.56 98.56 0 0 1 71.68 47.36 101.12 101.12 0 0 0 136.533333 37.973334 99.413333 99.413333 0 0 1 29.866667-61.44c-104.106667-11.52-213.333333-50.773333-213.333334-226.986667a177.066667 177.066667 0 0 1 47.36-124.16 161.28 161.28 0 0 1 4.693334-121.173333s39.68-12.373333 128 46.933333a455.68 455.68 0 0 1 234.666666 0c89.6-59.306667 128-46.933333 128-46.933333a161.28 161.28 0 0 1 4.693334 121.173333A177.066667 177.066667 0 0 1 810.666667 477.866667c0 176.64-110.08 215.466667-213.333334 226.986666a106.666667 106.666667 0 0 1 32 85.333334v125.866666c0 14.933333 8.533333 26.88 32 22.186667A460.8 460.8 0 0 0 981.333333 502.186667 464.64 464.64 0 0 0 512 42.666667"},null,8,tt)],4)),et],4)):c("",!0),h.value?(o(),n("div",ot,"Loading...")):v.value?(o(),n("div",nt,"Something error!")):(o(),n("div",it,[(o(!0),n(K,null,Q(k.value,e=>(o(),n("div",{class:"list-item",key:e.id,style:d(g(C)?"":"pointer-events: none"),onClick:x=>V(e)},[s("div",at,l(e.title),1),e.description?(o(),n("div",ct,l(e.description),1)):c("",!0),e.todayStar?(o(),n("div",lt,l(e.todayStar),1)):c("",!0),s("div",rt,[e.language?(o(),n("div",dt,[s("div",{class:"language-circle",style:d(`background: ${e.color}`)},null,4),_(" "+l(e.language),1)])):c("",!0),e.totalStar?(o(),n("div",gt,[(o(),n("svg",{"aria-label":"star",width:t.componentSetting.textFontSize*.7,height:t.componentSetting.textFontSize*.8,viewBox:"0 0 14 16",version:"1.1",role:"img"},vt,8,ut)),_(" "+l(e.totalStar),1)])):c("",!0),e.forked?(o(),n("div",pt,[(o(),n("svg",{"aria-label":"repo-forked",width:t.componentSetting.textFontSize*.64,height:t.componentSetting.textFontSize*.8,viewBox:"0 0 10 16",version:"1.1",role:"img"},yt,8,St)),_(" "+l(e.forked),1)])):c("",!0)])],12,st))),128))]))])],4))}});var wt=q(_t,[["__scopeId","data-v-2e828ca8"]]);export{wt as default};
