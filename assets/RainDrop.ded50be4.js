import{aa as hr,_ as Or,d as Ur,r as Lr,u as Gr,I as Nr,x as Fr,y as kr,K as _r,w as Vr,o as jr,h as zr}from"./index.0836eb03.js";var Qr=Object.create,rr=Object.defineProperty,Yr=Object.getPrototypeOf,Kr=Object.prototype.hasOwnProperty,qr=Object.getOwnPropertyNames,dr=Object.getOwnPropertyDescriptor,Wr=r=>rr(r,"__esModule",{value:!0}),It=(r,o)=>()=>(o||(o={exports:{}},r(o.exports,o)),o.exports),Jr=(r,o,u)=>{if(o&&typeof o=="object"||typeof o=="function")for(let I of qr(o))!Kr.call(r,I)&&I!=="default"&&rr(r,I,{get:()=>o[I],enumerable:!(u=dr(o,I))||u.enumerable});return r},Jt=r=>r&&r.__esModule?r:Jr(Wr(rr(r!=null?Qr(Yr(r)):{},"default",{value:r,enumerable:!0})),r),wt=(r,o,u,I)=>{for(var w=I>1?void 0:I?dr(o,u):o,C=r.length-1,s;C>=0;C--)(s=r[C])&&(w=(I?s(o,u,w):s(w))||w);return I&&w&&rr(o,u,w),w},Hr=(()=>{for(var r=new Uint8Array(128),o=0;o<64;o++)r[o<26?o+65:o<52?o+71:o<62?o-4:o*4-205]=o;return u=>{for(var I=u.length,w=new Uint8Array((I-(u[I-1]=="=")-(u[I-2]=="="))*3/4|0),C=0,s=0;C<I;){var l=r[u.charCodeAt(C++)],p=r[u.charCodeAt(C++)],E=r[u.charCodeAt(C++)],v=r[u.charCodeAt(C++)];w[s++]=l<<2|p>>4,w[s++]=p<<4|E>>2,w[s++]=E<<6|v}return w}})(),_t=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.setMatrixArrayType=w,r.toRadian=s,r.equals=l,r.RANDOM=r.ARRAY_TYPE=r.EPSILON=void 0;var o=1e-6;r.EPSILON=o;var u=typeof Float32Array!="undefined"?Float32Array:Array;r.ARRAY_TYPE=u;var I=Math.random;r.RANDOM=I;function w(p){r.ARRAY_TYPE=u=p}var C=Math.PI/180;function s(p){return p*C}function l(p,E){return Math.abs(p-E)<=o*Math.max(1,Math.abs(p),Math.abs(E))}Math.hypot||(Math.hypot=function(){for(var p=0,E=arguments.length;E--;)p+=arguments[E]*arguments[E];return Math.sqrt(p)})}),Xr=It(r=>{function o(y){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(G){return typeof G}:o=function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},o(y)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=C,r.clone=s,r.copy=l,r.identity=p,r.fromValues=E,r.set=v,r.transpose=D,r.invert=F,r.adjoint=Y,r.determinant=z,r.multiply=k,r.rotate=j,r.scale=U,r.fromRotation=J,r.fromScaling=At,r.str=ht,r.frob=lt,r.LDU=ct,r.add=dt,r.subtract=vt,r.exactEquals=yt,r.equals=Mt,r.multiplyScalar=xt,r.multiplyScalarAndAdd=et,r.sub=r.mul=void 0;var u=w(_t());function I(){if(typeof WeakMap!="function")return null;var y=new WeakMap;return I=function(){return y},y}function w(y){if(y&&y.__esModule)return y;if(y===null||o(y)!=="object"&&typeof y!="function")return{default:y};var G=I();if(G&&G.has(y))return G.get(y);var K={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var rt in y)if(Object.prototype.hasOwnProperty.call(y,rt)){var nt=$?Object.getOwnPropertyDescriptor(y,rt):null;nt&&(nt.get||nt.set)?Object.defineProperty(K,rt,nt):K[rt]=y[rt]}return K.default=y,G&&G.set(y,K),K}function C(){var y=new u.ARRAY_TYPE(4);return u.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y}function s(y){var G=new u.ARRAY_TYPE(4);return G[0]=y[0],G[1]=y[1],G[2]=y[2],G[3]=y[3],G}function l(y,G){return y[0]=G[0],y[1]=G[1],y[2]=G[2],y[3]=G[3],y}function p(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=1,y}function E(y,G,K,$){var rt=new u.ARRAY_TYPE(4);return rt[0]=y,rt[1]=G,rt[2]=K,rt[3]=$,rt}function v(y,G,K,$,rt){return y[0]=G,y[1]=K,y[2]=$,y[3]=rt,y}function D(y,G){if(y===G){var K=G[1];y[1]=G[2],y[2]=K}else y[0]=G[0],y[1]=G[2],y[2]=G[1],y[3]=G[3];return y}function F(y,G){var K=G[0],$=G[1],rt=G[2],nt=G[3],h=K*nt-rt*$;return h?(h=1/h,y[0]=nt*h,y[1]=-$*h,y[2]=-rt*h,y[3]=K*h,y):null}function Y(y,G){var K=G[0];return y[0]=G[3],y[1]=-G[1],y[2]=-G[2],y[3]=K,y}function z(y){return y[0]*y[3]-y[2]*y[1]}function k(y,G,K){var $=G[0],rt=G[1],nt=G[2],h=G[3],M=K[0],V=K[1],H=K[2],Z=K[3];return y[0]=$*M+nt*V,y[1]=rt*M+h*V,y[2]=$*H+nt*Z,y[3]=rt*H+h*Z,y}function j(y,G,K){var $=G[0],rt=G[1],nt=G[2],h=G[3],M=Math.sin(K),V=Math.cos(K);return y[0]=$*V+nt*M,y[1]=rt*V+h*M,y[2]=$*-M+nt*V,y[3]=rt*-M+h*V,y}function U(y,G,K){var $=G[0],rt=G[1],nt=G[2],h=G[3],M=K[0],V=K[1];return y[0]=$*M,y[1]=rt*M,y[2]=nt*V,y[3]=h*V,y}function J(y,G){var K=Math.sin(G),$=Math.cos(G);return y[0]=$,y[1]=K,y[2]=-K,y[3]=$,y}function At(y,G){return y[0]=G[0],y[1]=0,y[2]=0,y[3]=G[1],y}function ht(y){return"mat2("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+")"}function lt(y){return Math.hypot(y[0],y[1],y[2],y[3])}function ct(y,G,K,$){return y[2]=$[2]/$[0],K[0]=$[0],K[1]=$[1],K[3]=$[3]-y[2]*K[1],[y,G,K]}function dt(y,G,K){return y[0]=G[0]+K[0],y[1]=G[1]+K[1],y[2]=G[2]+K[2],y[3]=G[3]+K[3],y}function vt(y,G,K){return y[0]=G[0]-K[0],y[1]=G[1]-K[1],y[2]=G[2]-K[2],y[3]=G[3]-K[3],y}function yt(y,G){return y[0]===G[0]&&y[1]===G[1]&&y[2]===G[2]&&y[3]===G[3]}function Mt(y,G){var K=y[0],$=y[1],rt=y[2],nt=y[3],h=G[0],M=G[1],V=G[2],H=G[3];return Math.abs(K-h)<=u.EPSILON*Math.max(1,Math.abs(K),Math.abs(h))&&Math.abs($-M)<=u.EPSILON*Math.max(1,Math.abs($),Math.abs(M))&&Math.abs(rt-V)<=u.EPSILON*Math.max(1,Math.abs(rt),Math.abs(V))&&Math.abs(nt-H)<=u.EPSILON*Math.max(1,Math.abs(nt),Math.abs(H))}function xt(y,G,K){return y[0]=G[0]*K,y[1]=G[1]*K,y[2]=G[2]*K,y[3]=G[3]*K,y}function et(y,G,K,$){return y[0]=G[0]+K[0]*$,y[1]=G[1]+K[1]*$,y[2]=G[2]+K[2]*$,y[3]=G[3]+K[3]*$,y}var mt=k;r.mul=mt;var T=vt;r.sub=T}),Zr=It(r=>{function o(T){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(y){return typeof y}:o=function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},o(T)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=C,r.clone=s,r.copy=l,r.identity=p,r.fromValues=E,r.set=v,r.invert=D,r.determinant=F,r.multiply=Y,r.rotate=z,r.scale=k,r.translate=j,r.fromRotation=U,r.fromScaling=J,r.fromTranslation=At,r.str=ht,r.frob=lt,r.add=ct,r.subtract=dt,r.multiplyScalar=vt,r.multiplyScalarAndAdd=yt,r.exactEquals=Mt,r.equals=xt,r.sub=r.mul=void 0;var u=w(_t());function I(){if(typeof WeakMap!="function")return null;var T=new WeakMap;return I=function(){return T},T}function w(T){if(T&&T.__esModule)return T;if(T===null||o(T)!=="object"&&typeof T!="function")return{default:T};var y=I();if(y&&y.has(T))return y.get(T);var G={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in T)if(Object.prototype.hasOwnProperty.call(T,$)){var rt=K?Object.getOwnPropertyDescriptor(T,$):null;rt&&(rt.get||rt.set)?Object.defineProperty(G,$,rt):G[$]=T[$]}return G.default=T,y&&y.set(T,G),G}function C(){var T=new u.ARRAY_TYPE(6);return u.ARRAY_TYPE!=Float32Array&&(T[1]=0,T[2]=0,T[4]=0,T[5]=0),T[0]=1,T[3]=1,T}function s(T){var y=new u.ARRAY_TYPE(6);return y[0]=T[0],y[1]=T[1],y[2]=T[2],y[3]=T[3],y[4]=T[4],y[5]=T[5],y}function l(T,y){return T[0]=y[0],T[1]=y[1],T[2]=y[2],T[3]=y[3],T[4]=y[4],T[5]=y[5],T}function p(T){return T[0]=1,T[1]=0,T[2]=0,T[3]=1,T[4]=0,T[5]=0,T}function E(T,y,G,K,$,rt){var nt=new u.ARRAY_TYPE(6);return nt[0]=T,nt[1]=y,nt[2]=G,nt[3]=K,nt[4]=$,nt[5]=rt,nt}function v(T,y,G,K,$,rt,nt){return T[0]=y,T[1]=G,T[2]=K,T[3]=$,T[4]=rt,T[5]=nt,T}function D(T,y){var G=y[0],K=y[1],$=y[2],rt=y[3],nt=y[4],h=y[5],M=G*rt-K*$;return M?(M=1/M,T[0]=rt*M,T[1]=-K*M,T[2]=-$*M,T[3]=G*M,T[4]=($*h-rt*nt)*M,T[5]=(K*nt-G*h)*M,T):null}function F(T){return T[0]*T[3]-T[1]*T[2]}function Y(T,y,G){var K=y[0],$=y[1],rt=y[2],nt=y[3],h=y[4],M=y[5],V=G[0],H=G[1],Z=G[2],it=G[3],at=G[4],st=G[5];return T[0]=K*V+rt*H,T[1]=$*V+nt*H,T[2]=K*Z+rt*it,T[3]=$*Z+nt*it,T[4]=K*at+rt*st+h,T[5]=$*at+nt*st+M,T}function z(T,y,G){var K=y[0],$=y[1],rt=y[2],nt=y[3],h=y[4],M=y[5],V=Math.sin(G),H=Math.cos(G);return T[0]=K*H+rt*V,T[1]=$*H+nt*V,T[2]=K*-V+rt*H,T[3]=$*-V+nt*H,T[4]=h,T[5]=M,T}function k(T,y,G){var K=y[0],$=y[1],rt=y[2],nt=y[3],h=y[4],M=y[5],V=G[0],H=G[1];return T[0]=K*V,T[1]=$*V,T[2]=rt*H,T[3]=nt*H,T[4]=h,T[5]=M,T}function j(T,y,G){var K=y[0],$=y[1],rt=y[2],nt=y[3],h=y[4],M=y[5],V=G[0],H=G[1];return T[0]=K,T[1]=$,T[2]=rt,T[3]=nt,T[4]=K*V+rt*H+h,T[5]=$*V+nt*H+M,T}function U(T,y){var G=Math.sin(y),K=Math.cos(y);return T[0]=K,T[1]=G,T[2]=-G,T[3]=K,T[4]=0,T[5]=0,T}function J(T,y){return T[0]=y[0],T[1]=0,T[2]=0,T[3]=y[1],T[4]=0,T[5]=0,T}function At(T,y){return T[0]=1,T[1]=0,T[2]=0,T[3]=1,T[4]=y[0],T[5]=y[1],T}function ht(T){return"mat2d("+T[0]+", "+T[1]+", "+T[2]+", "+T[3]+", "+T[4]+", "+T[5]+")"}function lt(T){return Math.hypot(T[0],T[1],T[2],T[3],T[4],T[5],1)}function ct(T,y,G){return T[0]=y[0]+G[0],T[1]=y[1]+G[1],T[2]=y[2]+G[2],T[3]=y[3]+G[3],T[4]=y[4]+G[4],T[5]=y[5]+G[5],T}function dt(T,y,G){return T[0]=y[0]-G[0],T[1]=y[1]-G[1],T[2]=y[2]-G[2],T[3]=y[3]-G[3],T[4]=y[4]-G[4],T[5]=y[5]-G[5],T}function vt(T,y,G){return T[0]=y[0]*G,T[1]=y[1]*G,T[2]=y[2]*G,T[3]=y[3]*G,T[4]=y[4]*G,T[5]=y[5]*G,T}function yt(T,y,G,K){return T[0]=y[0]+G[0]*K,T[1]=y[1]+G[1]*K,T[2]=y[2]+G[2]*K,T[3]=y[3]+G[3]*K,T[4]=y[4]+G[4]*K,T[5]=y[5]+G[5]*K,T}function Mt(T,y){return T[0]===y[0]&&T[1]===y[1]&&T[2]===y[2]&&T[3]===y[3]&&T[4]===y[4]&&T[5]===y[5]}function xt(T,y){var G=T[0],K=T[1],$=T[2],rt=T[3],nt=T[4],h=T[5],M=y[0],V=y[1],H=y[2],Z=y[3],it=y[4],at=y[5];return Math.abs(G-M)<=u.EPSILON*Math.max(1,Math.abs(G),Math.abs(M))&&Math.abs(K-V)<=u.EPSILON*Math.max(1,Math.abs(K),Math.abs(V))&&Math.abs($-H)<=u.EPSILON*Math.max(1,Math.abs($),Math.abs(H))&&Math.abs(rt-Z)<=u.EPSILON*Math.max(1,Math.abs(rt),Math.abs(Z))&&Math.abs(nt-it)<=u.EPSILON*Math.max(1,Math.abs(nt),Math.abs(it))&&Math.abs(h-at)<=u.EPSILON*Math.max(1,Math.abs(h),Math.abs(at))}var et=Y;r.mul=et;var mt=dt;r.sub=mt}),vr=It(r=>{function o(h){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(M){return typeof M}:o=function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},o(h)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=C,r.fromMat4=s,r.clone=l,r.copy=p,r.fromValues=E,r.set=v,r.identity=D,r.transpose=F,r.invert=Y,r.adjoint=z,r.determinant=k,r.multiply=j,r.translate=U,r.rotate=J,r.scale=At,r.fromTranslation=ht,r.fromRotation=lt,r.fromScaling=ct,r.fromMat2d=dt,r.fromQuat=vt,r.normalFromMat4=yt,r.projection=Mt,r.str=xt,r.frob=et,r.add=mt,r.subtract=T,r.multiplyScalar=y,r.multiplyScalarAndAdd=G,r.exactEquals=K,r.equals=$,r.sub=r.mul=void 0;var u=w(_t());function I(){if(typeof WeakMap!="function")return null;var h=new WeakMap;return I=function(){return h},h}function w(h){if(h&&h.__esModule)return h;if(h===null||o(h)!=="object"&&typeof h!="function")return{default:h};var M=I();if(M&&M.has(h))return M.get(h);var V={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in h)if(Object.prototype.hasOwnProperty.call(h,Z)){var it=H?Object.getOwnPropertyDescriptor(h,Z):null;it&&(it.get||it.set)?Object.defineProperty(V,Z,it):V[Z]=h[Z]}return V.default=h,M&&M.set(h,V),V}function C(){var h=new u.ARRAY_TYPE(9);return u.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function s(h,M){return h[0]=M[0],h[1]=M[1],h[2]=M[2],h[3]=M[4],h[4]=M[5],h[5]=M[6],h[6]=M[8],h[7]=M[9],h[8]=M[10],h}function l(h){var M=new u.ARRAY_TYPE(9);return M[0]=h[0],M[1]=h[1],M[2]=h[2],M[3]=h[3],M[4]=h[4],M[5]=h[5],M[6]=h[6],M[7]=h[7],M[8]=h[8],M}function p(h,M){return h[0]=M[0],h[1]=M[1],h[2]=M[2],h[3]=M[3],h[4]=M[4],h[5]=M[5],h[6]=M[6],h[7]=M[7],h[8]=M[8],h}function E(h,M,V,H,Z,it,at,st,Ct){var A=new u.ARRAY_TYPE(9);return A[0]=h,A[1]=M,A[2]=V,A[3]=H,A[4]=Z,A[5]=it,A[6]=at,A[7]=st,A[8]=Ct,A}function v(h,M,V,H,Z,it,at,st,Ct,A){return h[0]=M,h[1]=V,h[2]=H,h[3]=Z,h[4]=it,h[5]=at,h[6]=st,h[7]=Ct,h[8]=A,h}function D(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=1,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h}function F(h,M){if(h===M){var V=M[1],H=M[2],Z=M[5];h[1]=M[3],h[2]=M[6],h[3]=V,h[5]=M[7],h[6]=H,h[7]=Z}else h[0]=M[0],h[1]=M[3],h[2]=M[6],h[3]=M[1],h[4]=M[4],h[5]=M[7],h[6]=M[2],h[7]=M[5],h[8]=M[8];return h}function Y(h,M){var V=M[0],H=M[1],Z=M[2],it=M[3],at=M[4],st=M[5],Ct=M[6],A=M[7],i=M[8],c=i*at-st*A,x=-i*it+st*Ct,a=A*it-at*Ct,f=V*c+H*x+Z*a;return f?(f=1/f,h[0]=c*f,h[1]=(-i*H+Z*A)*f,h[2]=(st*H-Z*at)*f,h[3]=x*f,h[4]=(i*V-Z*Ct)*f,h[5]=(-st*V+Z*it)*f,h[6]=a*f,h[7]=(-A*V+H*Ct)*f,h[8]=(at*V-H*it)*f,h):null}function z(h,M){var V=M[0],H=M[1],Z=M[2],it=M[3],at=M[4],st=M[5],Ct=M[6],A=M[7],i=M[8];return h[0]=at*i-st*A,h[1]=Z*A-H*i,h[2]=H*st-Z*at,h[3]=st*Ct-it*i,h[4]=V*i-Z*Ct,h[5]=Z*it-V*st,h[6]=it*A-at*Ct,h[7]=H*Ct-V*A,h[8]=V*at-H*it,h}function k(h){var M=h[0],V=h[1],H=h[2],Z=h[3],it=h[4],at=h[5],st=h[6],Ct=h[7],A=h[8];return M*(A*it-at*Ct)+V*(-A*Z+at*st)+H*(Ct*Z-it*st)}function j(h,M,V){var H=M[0],Z=M[1],it=M[2],at=M[3],st=M[4],Ct=M[5],A=M[6],i=M[7],c=M[8],x=V[0],a=V[1],f=V[2],t=V[3],e=V[4],g=V[5],n=V[6],d=V[7],b=V[8];return h[0]=x*H+a*at+f*A,h[1]=x*Z+a*st+f*i,h[2]=x*it+a*Ct+f*c,h[3]=t*H+e*at+g*A,h[4]=t*Z+e*st+g*i,h[5]=t*it+e*Ct+g*c,h[6]=n*H+d*at+b*A,h[7]=n*Z+d*st+b*i,h[8]=n*it+d*Ct+b*c,h}function U(h,M,V){var H=M[0],Z=M[1],it=M[2],at=M[3],st=M[4],Ct=M[5],A=M[6],i=M[7],c=M[8],x=V[0],a=V[1];return h[0]=H,h[1]=Z,h[2]=it,h[3]=at,h[4]=st,h[5]=Ct,h[6]=x*H+a*at+A,h[7]=x*Z+a*st+i,h[8]=x*it+a*Ct+c,h}function J(h,M,V){var H=M[0],Z=M[1],it=M[2],at=M[3],st=M[4],Ct=M[5],A=M[6],i=M[7],c=M[8],x=Math.sin(V),a=Math.cos(V);return h[0]=a*H+x*at,h[1]=a*Z+x*st,h[2]=a*it+x*Ct,h[3]=a*at-x*H,h[4]=a*st-x*Z,h[5]=a*Ct-x*it,h[6]=A,h[7]=i,h[8]=c,h}function At(h,M,V){var H=V[0],Z=V[1];return h[0]=H*M[0],h[1]=H*M[1],h[2]=H*M[2],h[3]=Z*M[3],h[4]=Z*M[4],h[5]=Z*M[5],h[6]=M[6],h[7]=M[7],h[8]=M[8],h}function ht(h,M){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=1,h[5]=0,h[6]=M[0],h[7]=M[1],h[8]=1,h}function lt(h,M){var V=Math.sin(M),H=Math.cos(M);return h[0]=H,h[1]=V,h[2]=0,h[3]=-V,h[4]=H,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h}function ct(h,M){return h[0]=M[0],h[1]=0,h[2]=0,h[3]=0,h[4]=M[1],h[5]=0,h[6]=0,h[7]=0,h[8]=1,h}function dt(h,M){return h[0]=M[0],h[1]=M[1],h[2]=0,h[3]=M[2],h[4]=M[3],h[5]=0,h[6]=M[4],h[7]=M[5],h[8]=1,h}function vt(h,M){var V=M[0],H=M[1],Z=M[2],it=M[3],at=V+V,st=H+H,Ct=Z+Z,A=V*at,i=H*at,c=H*st,x=Z*at,a=Z*st,f=Z*Ct,t=it*at,e=it*st,g=it*Ct;return h[0]=1-c-f,h[3]=i-g,h[6]=x+e,h[1]=i+g,h[4]=1-A-f,h[7]=a-t,h[2]=x-e,h[5]=a+t,h[8]=1-A-c,h}function yt(h,M){var V=M[0],H=M[1],Z=M[2],it=M[3],at=M[4],st=M[5],Ct=M[6],A=M[7],i=M[8],c=M[9],x=M[10],a=M[11],f=M[12],t=M[13],e=M[14],g=M[15],n=V*st-H*at,d=V*Ct-Z*at,b=V*A-it*at,P=H*Ct-Z*st,S=H*A-it*st,L=Z*A-it*Ct,m=i*t-c*f,R=i*e-x*f,B=i*g-a*f,O=c*e-x*t,N=c*g-a*t,X=x*g-a*e,Q=n*X-d*N+b*O+P*B-S*R+L*m;return Q?(Q=1/Q,h[0]=(st*X-Ct*N+A*O)*Q,h[1]=(Ct*B-at*X-A*R)*Q,h[2]=(at*N-st*B+A*m)*Q,h[3]=(Z*N-H*X-it*O)*Q,h[4]=(V*X-Z*B+it*R)*Q,h[5]=(H*B-V*N-it*m)*Q,h[6]=(t*L-e*S+g*P)*Q,h[7]=(e*b-f*L-g*d)*Q,h[8]=(f*S-t*b+g*n)*Q,h):null}function Mt(h,M,V){return h[0]=2/M,h[1]=0,h[2]=0,h[3]=0,h[4]=-2/V,h[5]=0,h[6]=-1,h[7]=1,h[8]=1,h}function xt(h){return"mat3("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+")"}function et(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8])}function mt(h,M,V){return h[0]=M[0]+V[0],h[1]=M[1]+V[1],h[2]=M[2]+V[2],h[3]=M[3]+V[3],h[4]=M[4]+V[4],h[5]=M[5]+V[5],h[6]=M[6]+V[6],h[7]=M[7]+V[7],h[8]=M[8]+V[8],h}function T(h,M,V){return h[0]=M[0]-V[0],h[1]=M[1]-V[1],h[2]=M[2]-V[2],h[3]=M[3]-V[3],h[4]=M[4]-V[4],h[5]=M[5]-V[5],h[6]=M[6]-V[6],h[7]=M[7]-V[7],h[8]=M[8]-V[8],h}function y(h,M,V){return h[0]=M[0]*V,h[1]=M[1]*V,h[2]=M[2]*V,h[3]=M[3]*V,h[4]=M[4]*V,h[5]=M[5]*V,h[6]=M[6]*V,h[7]=M[7]*V,h[8]=M[8]*V,h}function G(h,M,V,H){return h[0]=M[0]+V[0]*H,h[1]=M[1]+V[1]*H,h[2]=M[2]+V[2]*H,h[3]=M[3]+V[3]*H,h[4]=M[4]+V[4]*H,h[5]=M[5]+V[5]*H,h[6]=M[6]+V[6]*H,h[7]=M[7]+V[7]*H,h[8]=M[8]+V[8]*H,h}function K(h,M){return h[0]===M[0]&&h[1]===M[1]&&h[2]===M[2]&&h[3]===M[3]&&h[4]===M[4]&&h[5]===M[5]&&h[6]===M[6]&&h[7]===M[7]&&h[8]===M[8]}function $(h,M){var V=h[0],H=h[1],Z=h[2],it=h[3],at=h[4],st=h[5],Ct=h[6],A=h[7],i=h[8],c=M[0],x=M[1],a=M[2],f=M[3],t=M[4],e=M[5],g=M[6],n=M[7],d=M[8];return Math.abs(V-c)<=u.EPSILON*Math.max(1,Math.abs(V),Math.abs(c))&&Math.abs(H-x)<=u.EPSILON*Math.max(1,Math.abs(H),Math.abs(x))&&Math.abs(Z-a)<=u.EPSILON*Math.max(1,Math.abs(Z),Math.abs(a))&&Math.abs(it-f)<=u.EPSILON*Math.max(1,Math.abs(it),Math.abs(f))&&Math.abs(at-t)<=u.EPSILON*Math.max(1,Math.abs(at),Math.abs(t))&&Math.abs(st-e)<=u.EPSILON*Math.max(1,Math.abs(st),Math.abs(e))&&Math.abs(Ct-g)<=u.EPSILON*Math.max(1,Math.abs(Ct),Math.abs(g))&&Math.abs(A-n)<=u.EPSILON*Math.max(1,Math.abs(A),Math.abs(n))&&Math.abs(i-d)<=u.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))}var rt=j;r.mul=rt;var nt=T;r.sub=nt}),pr=It(r=>{function o(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(e){return typeof e}:o=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=C,r.clone=s,r.copy=l,r.fromValues=p,r.set=E,r.identity=v,r.transpose=D,r.invert=F,r.adjoint=Y,r.determinant=z,r.multiply=k,r.translate=j,r.scale=U,r.rotate=J,r.rotateX=At,r.rotateY=ht,r.rotateZ=lt,r.fromTranslation=ct,r.fromScaling=dt,r.fromRotation=vt,r.fromXRotation=yt,r.fromYRotation=Mt,r.fromZRotation=xt,r.fromRotationTranslation=et,r.fromQuat2=mt,r.getTranslation=T,r.getScaling=y,r.getRotation=G,r.fromRotationTranslationScale=K,r.fromRotationTranslationScaleOrigin=$,r.fromQuat=rt,r.frustum=nt,r.perspective=h,r.perspectiveFromFieldOfView=M,r.ortho=V,r.lookAt=H,r.targetTo=Z,r.str=it,r.frob=at,r.add=st,r.subtract=Ct,r.multiplyScalar=A,r.multiplyScalarAndAdd=i,r.exactEquals=c,r.equals=x,r.sub=r.mul=void 0;var u=w(_t());function I(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return I=function(){return t},t}function w(t){if(t&&t.__esModule)return t;if(t===null||o(t)!=="object"&&typeof t!="function")return{default:t};var e=I();if(e&&e.has(t))return e.get(t);var g={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in t)if(Object.prototype.hasOwnProperty.call(t,d)){var b=n?Object.getOwnPropertyDescriptor(t,d):null;b&&(b.get||b.set)?Object.defineProperty(g,d,b):g[d]=t[d]}return g.default=t,e&&e.set(t,g),g}function C(){var t=new u.ARRAY_TYPE(16);return u.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function s(t){var e=new u.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function l(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function p(t,e,g,n,d,b,P,S,L,m,R,B,O,N,X,Q){var _=new u.ARRAY_TYPE(16);return _[0]=t,_[1]=e,_[2]=g,_[3]=n,_[4]=d,_[5]=b,_[6]=P,_[7]=S,_[8]=L,_[9]=m,_[10]=R,_[11]=B,_[12]=O,_[13]=N,_[14]=X,_[15]=Q,_}function E(t,e,g,n,d,b,P,S,L,m,R,B,O,N,X,Q,_){return t[0]=e,t[1]=g,t[2]=n,t[3]=d,t[4]=b,t[5]=P,t[6]=S,t[7]=L,t[8]=m,t[9]=R,t[10]=B,t[11]=O,t[12]=N,t[13]=X,t[14]=Q,t[15]=_,t}function v(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function D(t,e){if(t===e){var g=e[1],n=e[2],d=e[3],b=e[6],P=e[7],S=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=g,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=b,t[11]=e[14],t[12]=d,t[13]=P,t[14]=S}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function F(t,e){var g=e[0],n=e[1],d=e[2],b=e[3],P=e[4],S=e[5],L=e[6],m=e[7],R=e[8],B=e[9],O=e[10],N=e[11],X=e[12],Q=e[13],_=e[14],q=e[15],gt=g*S-n*P,tt=g*L-d*P,ot=g*m-b*P,ut=n*L-d*S,ft=n*m-b*S,Bt=d*m-b*L,Rt=R*Q-B*X,Pt=R*_-O*X,Et=R*q-N*X,Tt=B*_-O*Q,St=B*q-N*Q,Dt=O*q-N*_,pt=gt*Dt-tt*St+ot*Tt+ut*Et-ft*Pt+Bt*Rt;return pt?(pt=1/pt,t[0]=(S*Dt-L*St+m*Tt)*pt,t[1]=(d*St-n*Dt-b*Tt)*pt,t[2]=(Q*Bt-_*ft+q*ut)*pt,t[3]=(O*ft-B*Bt-N*ut)*pt,t[4]=(L*Et-P*Dt-m*Pt)*pt,t[5]=(g*Dt-d*Et+b*Pt)*pt,t[6]=(_*ot-X*Bt-q*tt)*pt,t[7]=(R*Bt-O*ot+N*tt)*pt,t[8]=(P*St-S*Et+m*Rt)*pt,t[9]=(n*Et-g*St-b*Rt)*pt,t[10]=(X*ft-Q*ot+q*gt)*pt,t[11]=(B*ot-R*ft-N*gt)*pt,t[12]=(S*Pt-P*Tt-L*Rt)*pt,t[13]=(g*Tt-n*Pt+d*Rt)*pt,t[14]=(Q*tt-X*ut-_*gt)*pt,t[15]=(R*ut-B*tt+O*gt)*pt,t):null}function Y(t,e){var g=e[0],n=e[1],d=e[2],b=e[3],P=e[4],S=e[5],L=e[6],m=e[7],R=e[8],B=e[9],O=e[10],N=e[11],X=e[12],Q=e[13],_=e[14],q=e[15];return t[0]=S*(O*q-N*_)-B*(L*q-m*_)+Q*(L*N-m*O),t[1]=-(n*(O*q-N*_)-B*(d*q-b*_)+Q*(d*N-b*O)),t[2]=n*(L*q-m*_)-S*(d*q-b*_)+Q*(d*m-b*L),t[3]=-(n*(L*N-m*O)-S*(d*N-b*O)+B*(d*m-b*L)),t[4]=-(P*(O*q-N*_)-R*(L*q-m*_)+X*(L*N-m*O)),t[5]=g*(O*q-N*_)-R*(d*q-b*_)+X*(d*N-b*O),t[6]=-(g*(L*q-m*_)-P*(d*q-b*_)+X*(d*m-b*L)),t[7]=g*(L*N-m*O)-P*(d*N-b*O)+R*(d*m-b*L),t[8]=P*(B*q-N*Q)-R*(S*q-m*Q)+X*(S*N-m*B),t[9]=-(g*(B*q-N*Q)-R*(n*q-b*Q)+X*(n*N-b*B)),t[10]=g*(S*q-m*Q)-P*(n*q-b*Q)+X*(n*m-b*S),t[11]=-(g*(S*N-m*B)-P*(n*N-b*B)+R*(n*m-b*S)),t[12]=-(P*(B*_-O*Q)-R*(S*_-L*Q)+X*(S*O-L*B)),t[13]=g*(B*_-O*Q)-R*(n*_-d*Q)+X*(n*O-d*B),t[14]=-(g*(S*_-L*Q)-P*(n*_-d*Q)+X*(n*L-d*S)),t[15]=g*(S*O-L*B)-P*(n*O-d*B)+R*(n*L-d*S),t}function z(t){var e=t[0],g=t[1],n=t[2],d=t[3],b=t[4],P=t[5],S=t[6],L=t[7],m=t[8],R=t[9],B=t[10],O=t[11],N=t[12],X=t[13],Q=t[14],_=t[15],q=e*P-g*b,gt=e*S-n*b,tt=e*L-d*b,ot=g*S-n*P,ut=g*L-d*P,ft=n*L-d*S,Bt=m*X-R*N,Rt=m*Q-B*N,Pt=m*_-O*N,Et=R*Q-B*X,Tt=R*_-O*X,St=B*_-O*Q;return q*St-gt*Tt+tt*Et+ot*Pt-ut*Rt+ft*Bt}function k(t,e,g){var n=e[0],d=e[1],b=e[2],P=e[3],S=e[4],L=e[5],m=e[6],R=e[7],B=e[8],O=e[9],N=e[10],X=e[11],Q=e[12],_=e[13],q=e[14],gt=e[15],tt=g[0],ot=g[1],ut=g[2],ft=g[3];return t[0]=tt*n+ot*S+ut*B+ft*Q,t[1]=tt*d+ot*L+ut*O+ft*_,t[2]=tt*b+ot*m+ut*N+ft*q,t[3]=tt*P+ot*R+ut*X+ft*gt,tt=g[4],ot=g[5],ut=g[6],ft=g[7],t[4]=tt*n+ot*S+ut*B+ft*Q,t[5]=tt*d+ot*L+ut*O+ft*_,t[6]=tt*b+ot*m+ut*N+ft*q,t[7]=tt*P+ot*R+ut*X+ft*gt,tt=g[8],ot=g[9],ut=g[10],ft=g[11],t[8]=tt*n+ot*S+ut*B+ft*Q,t[9]=tt*d+ot*L+ut*O+ft*_,t[10]=tt*b+ot*m+ut*N+ft*q,t[11]=tt*P+ot*R+ut*X+ft*gt,tt=g[12],ot=g[13],ut=g[14],ft=g[15],t[12]=tt*n+ot*S+ut*B+ft*Q,t[13]=tt*d+ot*L+ut*O+ft*_,t[14]=tt*b+ot*m+ut*N+ft*q,t[15]=tt*P+ot*R+ut*X+ft*gt,t}function j(t,e,g){var n=g[0],d=g[1],b=g[2],P,S,L,m,R,B,O,N,X,Q,_,q;return e===t?(t[12]=e[0]*n+e[4]*d+e[8]*b+e[12],t[13]=e[1]*n+e[5]*d+e[9]*b+e[13],t[14]=e[2]*n+e[6]*d+e[10]*b+e[14],t[15]=e[3]*n+e[7]*d+e[11]*b+e[15]):(P=e[0],S=e[1],L=e[2],m=e[3],R=e[4],B=e[5],O=e[6],N=e[7],X=e[8],Q=e[9],_=e[10],q=e[11],t[0]=P,t[1]=S,t[2]=L,t[3]=m,t[4]=R,t[5]=B,t[6]=O,t[7]=N,t[8]=X,t[9]=Q,t[10]=_,t[11]=q,t[12]=P*n+R*d+X*b+e[12],t[13]=S*n+B*d+Q*b+e[13],t[14]=L*n+O*d+_*b+e[14],t[15]=m*n+N*d+q*b+e[15]),t}function U(t,e,g){var n=g[0],d=g[1],b=g[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*d,t[5]=e[5]*d,t[6]=e[6]*d,t[7]=e[7]*d,t[8]=e[8]*b,t[9]=e[9]*b,t[10]=e[10]*b,t[11]=e[11]*b,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function J(t,e,g,n){var d=n[0],b=n[1],P=n[2],S=Math.hypot(d,b,P),L,m,R,B,O,N,X,Q,_,q,gt,tt,ot,ut,ft,Bt,Rt,Pt,Et,Tt,St,Dt,pt,Gt;return S<u.EPSILON?null:(S=1/S,d*=S,b*=S,P*=S,L=Math.sin(g),m=Math.cos(g),R=1-m,B=e[0],O=e[1],N=e[2],X=e[3],Q=e[4],_=e[5],q=e[6],gt=e[7],tt=e[8],ot=e[9],ut=e[10],ft=e[11],Bt=d*d*R+m,Rt=b*d*R+P*L,Pt=P*d*R-b*L,Et=d*b*R-P*L,Tt=b*b*R+m,St=P*b*R+d*L,Dt=d*P*R+b*L,pt=b*P*R-d*L,Gt=P*P*R+m,t[0]=B*Bt+Q*Rt+tt*Pt,t[1]=O*Bt+_*Rt+ot*Pt,t[2]=N*Bt+q*Rt+ut*Pt,t[3]=X*Bt+gt*Rt+ft*Pt,t[4]=B*Et+Q*Tt+tt*St,t[5]=O*Et+_*Tt+ot*St,t[6]=N*Et+q*Tt+ut*St,t[7]=X*Et+gt*Tt+ft*St,t[8]=B*Dt+Q*pt+tt*Gt,t[9]=O*Dt+_*pt+ot*Gt,t[10]=N*Dt+q*pt+ut*Gt,t[11]=X*Dt+gt*pt+ft*Gt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function At(t,e,g){var n=Math.sin(g),d=Math.cos(g),b=e[4],P=e[5],S=e[6],L=e[7],m=e[8],R=e[9],B=e[10],O=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=b*d+m*n,t[5]=P*d+R*n,t[6]=S*d+B*n,t[7]=L*d+O*n,t[8]=m*d-b*n,t[9]=R*d-P*n,t[10]=B*d-S*n,t[11]=O*d-L*n,t}function ht(t,e,g){var n=Math.sin(g),d=Math.cos(g),b=e[0],P=e[1],S=e[2],L=e[3],m=e[8],R=e[9],B=e[10],O=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=b*d-m*n,t[1]=P*d-R*n,t[2]=S*d-B*n,t[3]=L*d-O*n,t[8]=b*n+m*d,t[9]=P*n+R*d,t[10]=S*n+B*d,t[11]=L*n+O*d,t}function lt(t,e,g){var n=Math.sin(g),d=Math.cos(g),b=e[0],P=e[1],S=e[2],L=e[3],m=e[4],R=e[5],B=e[6],O=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=b*d+m*n,t[1]=P*d+R*n,t[2]=S*d+B*n,t[3]=L*d+O*n,t[4]=m*d-b*n,t[5]=R*d-P*n,t[6]=B*d-S*n,t[7]=O*d-L*n,t}function ct(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function dt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vt(t,e,g){var n=g[0],d=g[1],b=g[2],P=Math.hypot(n,d,b),S,L,m;return P<u.EPSILON?null:(P=1/P,n*=P,d*=P,b*=P,S=Math.sin(e),L=Math.cos(e),m=1-L,t[0]=n*n*m+L,t[1]=d*n*m+b*S,t[2]=b*n*m-d*S,t[3]=0,t[4]=n*d*m-b*S,t[5]=d*d*m+L,t[6]=b*d*m+n*S,t[7]=0,t[8]=n*b*m+d*S,t[9]=d*b*m-n*S,t[10]=b*b*m+L,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function yt(t,e){var g=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=g,t[7]=0,t[8]=0,t[9]=-g,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Mt(t,e){var g=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-g,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=g,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xt(t,e){var g=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=g,t[2]=0,t[3]=0,t[4]=-g,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function et(t,e,g){var n=e[0],d=e[1],b=e[2],P=e[3],S=n+n,L=d+d,m=b+b,R=n*S,B=n*L,O=n*m,N=d*L,X=d*m,Q=b*m,_=P*S,q=P*L,gt=P*m;return t[0]=1-(N+Q),t[1]=B+gt,t[2]=O-q,t[3]=0,t[4]=B-gt,t[5]=1-(R+Q),t[6]=X+_,t[7]=0,t[8]=O+q,t[9]=X-_,t[10]=1-(R+N),t[11]=0,t[12]=g[0],t[13]=g[1],t[14]=g[2],t[15]=1,t}function mt(t,e){var g=new u.ARRAY_TYPE(3),n=-e[0],d=-e[1],b=-e[2],P=e[3],S=e[4],L=e[5],m=e[6],R=e[7],B=n*n+d*d+b*b+P*P;return B>0?(g[0]=(S*P+R*n+L*b-m*d)*2/B,g[1]=(L*P+R*d+m*n-S*b)*2/B,g[2]=(m*P+R*b+S*d-L*n)*2/B):(g[0]=(S*P+R*n+L*b-m*d)*2,g[1]=(L*P+R*d+m*n-S*b)*2,g[2]=(m*P+R*b+S*d-L*n)*2),et(t,e,g),t}function T(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function y(t,e){var g=e[0],n=e[1],d=e[2],b=e[4],P=e[5],S=e[6],L=e[8],m=e[9],R=e[10];return t[0]=Math.hypot(g,n,d),t[1]=Math.hypot(b,P,S),t[2]=Math.hypot(L,m,R),t}function G(t,e){var g=new u.ARRAY_TYPE(3);y(g,e);var n=1/g[0],d=1/g[1],b=1/g[2],P=e[0]*n,S=e[1]*d,L=e[2]*b,m=e[4]*n,R=e[5]*d,B=e[6]*b,O=e[8]*n,N=e[9]*d,X=e[10]*b,Q=P+R+X,_=0;return Q>0?(_=Math.sqrt(Q+1)*2,t[3]=.25*_,t[0]=(B-N)/_,t[1]=(O-L)/_,t[2]=(S-m)/_):P>R&&P>X?(_=Math.sqrt(1+P-R-X)*2,t[3]=(B-N)/_,t[0]=.25*_,t[1]=(S+m)/_,t[2]=(O+L)/_):R>X?(_=Math.sqrt(1+R-P-X)*2,t[3]=(O-L)/_,t[0]=(S+m)/_,t[1]=.25*_,t[2]=(B+N)/_):(_=Math.sqrt(1+X-P-R)*2,t[3]=(S-m)/_,t[0]=(O+L)/_,t[1]=(B+N)/_,t[2]=.25*_),t}function K(t,e,g,n){var d=e[0],b=e[1],P=e[2],S=e[3],L=d+d,m=b+b,R=P+P,B=d*L,O=d*m,N=d*R,X=b*m,Q=b*R,_=P*R,q=S*L,gt=S*m,tt=S*R,ot=n[0],ut=n[1],ft=n[2];return t[0]=(1-(X+_))*ot,t[1]=(O+tt)*ot,t[2]=(N-gt)*ot,t[3]=0,t[4]=(O-tt)*ut,t[5]=(1-(B+_))*ut,t[6]=(Q+q)*ut,t[7]=0,t[8]=(N+gt)*ft,t[9]=(Q-q)*ft,t[10]=(1-(B+X))*ft,t[11]=0,t[12]=g[0],t[13]=g[1],t[14]=g[2],t[15]=1,t}function $(t,e,g,n,d){var b=e[0],P=e[1],S=e[2],L=e[3],m=b+b,R=P+P,B=S+S,O=b*m,N=b*R,X=b*B,Q=P*R,_=P*B,q=S*B,gt=L*m,tt=L*R,ot=L*B,ut=n[0],ft=n[1],Bt=n[2],Rt=d[0],Pt=d[1],Et=d[2],Tt=(1-(Q+q))*ut,St=(N+ot)*ut,Dt=(X-tt)*ut,pt=(N-ot)*ft,Gt=(1-(O+q))*ft,Kt=(_+gt)*ft,qt=(X+tt)*Bt,ur=(_-gt)*Bt,lr=(1-(O+Q))*Bt;return t[0]=Tt,t[1]=St,t[2]=Dt,t[3]=0,t[4]=pt,t[5]=Gt,t[6]=Kt,t[7]=0,t[8]=qt,t[9]=ur,t[10]=lr,t[11]=0,t[12]=g[0]+Rt-(Tt*Rt+pt*Pt+qt*Et),t[13]=g[1]+Pt-(St*Rt+Gt*Pt+ur*Et),t[14]=g[2]+Et-(Dt*Rt+Kt*Pt+lr*Et),t[15]=1,t}function rt(t,e){var g=e[0],n=e[1],d=e[2],b=e[3],P=g+g,S=n+n,L=d+d,m=g*P,R=n*P,B=n*S,O=d*P,N=d*S,X=d*L,Q=b*P,_=b*S,q=b*L;return t[0]=1-B-X,t[1]=R+q,t[2]=O-_,t[3]=0,t[4]=R-q,t[5]=1-m-X,t[6]=N+Q,t[7]=0,t[8]=O+_,t[9]=N-Q,t[10]=1-m-B,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nt(t,e,g,n,d,b,P){var S=1/(g-e),L=1/(d-n),m=1/(b-P);return t[0]=b*2*S,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=b*2*L,t[6]=0,t[7]=0,t[8]=(g+e)*S,t[9]=(d+n)*L,t[10]=(P+b)*m,t[11]=-1,t[12]=0,t[13]=0,t[14]=P*b*2*m,t[15]=0,t}function h(t,e,g,n,d){var b=1/Math.tan(e/2),P;return t[0]=b/g,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=b,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,d!=null&&d!==1/0?(P=1/(n-d),t[10]=(d+n)*P,t[14]=2*d*n*P):(t[10]=-1,t[14]=-2*n),t}function M(t,e,g,n){var d=Math.tan(e.upDegrees*Math.PI/180),b=Math.tan(e.downDegrees*Math.PI/180),P=Math.tan(e.leftDegrees*Math.PI/180),S=Math.tan(e.rightDegrees*Math.PI/180),L=2/(P+S),m=2/(d+b);return t[0]=L,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=m,t[6]=0,t[7]=0,t[8]=-((P-S)*L*.5),t[9]=(d-b)*m*.5,t[10]=n/(g-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*g/(g-n),t[15]=0,t}function V(t,e,g,n,d,b,P){var S=1/(e-g),L=1/(n-d),m=1/(b-P);return t[0]=-2*S,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*L,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*m,t[11]=0,t[12]=(e+g)*S,t[13]=(d+n)*L,t[14]=(P+b)*m,t[15]=1,t}function H(t,e,g,n){var d,b,P,S,L,m,R,B,O,N,X=e[0],Q=e[1],_=e[2],q=n[0],gt=n[1],tt=n[2],ot=g[0],ut=g[1],ft=g[2];return Math.abs(X-ot)<u.EPSILON&&Math.abs(Q-ut)<u.EPSILON&&Math.abs(_-ft)<u.EPSILON?v(t):(R=X-ot,B=Q-ut,O=_-ft,N=1/Math.hypot(R,B,O),R*=N,B*=N,O*=N,d=gt*O-tt*B,b=tt*R-q*O,P=q*B-gt*R,N=Math.hypot(d,b,P),N?(N=1/N,d*=N,b*=N,P*=N):(d=0,b=0,P=0),S=B*P-O*b,L=O*d-R*P,m=R*b-B*d,N=Math.hypot(S,L,m),N?(N=1/N,S*=N,L*=N,m*=N):(S=0,L=0,m=0),t[0]=d,t[1]=S,t[2]=R,t[3]=0,t[4]=b,t[5]=L,t[6]=B,t[7]=0,t[8]=P,t[9]=m,t[10]=O,t[11]=0,t[12]=-(d*X+b*Q+P*_),t[13]=-(S*X+L*Q+m*_),t[14]=-(R*X+B*Q+O*_),t[15]=1,t)}function Z(t,e,g,n){var d=e[0],b=e[1],P=e[2],S=n[0],L=n[1],m=n[2],R=d-g[0],B=b-g[1],O=P-g[2],N=R*R+B*B+O*O;N>0&&(N=1/Math.sqrt(N),R*=N,B*=N,O*=N);var X=L*O-m*B,Q=m*R-S*O,_=S*B-L*R;return N=X*X+Q*Q+_*_,N>0&&(N=1/Math.sqrt(N),X*=N,Q*=N,_*=N),t[0]=X,t[1]=Q,t[2]=_,t[3]=0,t[4]=B*_-O*Q,t[5]=O*X-R*_,t[6]=R*Q-B*X,t[7]=0,t[8]=R,t[9]=B,t[10]=O,t[11]=0,t[12]=d,t[13]=b,t[14]=P,t[15]=1,t}function it(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function at(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function st(t,e,g){return t[0]=e[0]+g[0],t[1]=e[1]+g[1],t[2]=e[2]+g[2],t[3]=e[3]+g[3],t[4]=e[4]+g[4],t[5]=e[5]+g[5],t[6]=e[6]+g[6],t[7]=e[7]+g[7],t[8]=e[8]+g[8],t[9]=e[9]+g[9],t[10]=e[10]+g[10],t[11]=e[11]+g[11],t[12]=e[12]+g[12],t[13]=e[13]+g[13],t[14]=e[14]+g[14],t[15]=e[15]+g[15],t}function Ct(t,e,g){return t[0]=e[0]-g[0],t[1]=e[1]-g[1],t[2]=e[2]-g[2],t[3]=e[3]-g[3],t[4]=e[4]-g[4],t[5]=e[5]-g[5],t[6]=e[6]-g[6],t[7]=e[7]-g[7],t[8]=e[8]-g[8],t[9]=e[9]-g[9],t[10]=e[10]-g[10],t[11]=e[11]-g[11],t[12]=e[12]-g[12],t[13]=e[13]-g[13],t[14]=e[14]-g[14],t[15]=e[15]-g[15],t}function A(t,e,g){return t[0]=e[0]*g,t[1]=e[1]*g,t[2]=e[2]*g,t[3]=e[3]*g,t[4]=e[4]*g,t[5]=e[5]*g,t[6]=e[6]*g,t[7]=e[7]*g,t[8]=e[8]*g,t[9]=e[9]*g,t[10]=e[10]*g,t[11]=e[11]*g,t[12]=e[12]*g,t[13]=e[13]*g,t[14]=e[14]*g,t[15]=e[15]*g,t}function i(t,e,g,n){return t[0]=e[0]+g[0]*n,t[1]=e[1]+g[1]*n,t[2]=e[2]+g[2]*n,t[3]=e[3]+g[3]*n,t[4]=e[4]+g[4]*n,t[5]=e[5]+g[5]*n,t[6]=e[6]+g[6]*n,t[7]=e[7]+g[7]*n,t[8]=e[8]+g[8]*n,t[9]=e[9]+g[9]*n,t[10]=e[10]+g[10]*n,t[11]=e[11]+g[11]*n,t[12]=e[12]+g[12]*n,t[13]=e[13]+g[13]*n,t[14]=e[14]+g[14]*n,t[15]=e[15]+g[15]*n,t}function c(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function x(t,e){var g=t[0],n=t[1],d=t[2],b=t[3],P=t[4],S=t[5],L=t[6],m=t[7],R=t[8],B=t[9],O=t[10],N=t[11],X=t[12],Q=t[13],_=t[14],q=t[15],gt=e[0],tt=e[1],ot=e[2],ut=e[3],ft=e[4],Bt=e[5],Rt=e[6],Pt=e[7],Et=e[8],Tt=e[9],St=e[10],Dt=e[11],pt=e[12],Gt=e[13],Kt=e[14],qt=e[15];return Math.abs(g-gt)<=u.EPSILON*Math.max(1,Math.abs(g),Math.abs(gt))&&Math.abs(n-tt)<=u.EPSILON*Math.max(1,Math.abs(n),Math.abs(tt))&&Math.abs(d-ot)<=u.EPSILON*Math.max(1,Math.abs(d),Math.abs(ot))&&Math.abs(b-ut)<=u.EPSILON*Math.max(1,Math.abs(b),Math.abs(ut))&&Math.abs(P-ft)<=u.EPSILON*Math.max(1,Math.abs(P),Math.abs(ft))&&Math.abs(S-Bt)<=u.EPSILON*Math.max(1,Math.abs(S),Math.abs(Bt))&&Math.abs(L-Rt)<=u.EPSILON*Math.max(1,Math.abs(L),Math.abs(Rt))&&Math.abs(m-Pt)<=u.EPSILON*Math.max(1,Math.abs(m),Math.abs(Pt))&&Math.abs(R-Et)<=u.EPSILON*Math.max(1,Math.abs(R),Math.abs(Et))&&Math.abs(B-Tt)<=u.EPSILON*Math.max(1,Math.abs(B),Math.abs(Tt))&&Math.abs(O-St)<=u.EPSILON*Math.max(1,Math.abs(O),Math.abs(St))&&Math.abs(N-Dt)<=u.EPSILON*Math.max(1,Math.abs(N),Math.abs(Dt))&&Math.abs(X-pt)<=u.EPSILON*Math.max(1,Math.abs(X),Math.abs(pt))&&Math.abs(Q-Gt)<=u.EPSILON*Math.max(1,Math.abs(Q),Math.abs(Gt))&&Math.abs(_-Kt)<=u.EPSILON*Math.max(1,Math.abs(_),Math.abs(Kt))&&Math.abs(q-qt)<=u.EPSILON*Math.max(1,Math.abs(q),Math.abs(qt))}var a=k;r.mul=a;var f=Ct;r.sub=f}),mr=It(r=>{function o(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(g){return typeof g}:o=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},o(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=C,r.clone=s,r.length=l,r.fromValues=p,r.copy=E,r.set=v,r.add=D,r.subtract=F,r.multiply=Y,r.divide=z,r.ceil=k,r.floor=j,r.min=U,r.max=J,r.round=At,r.scale=ht,r.scaleAndAdd=lt,r.distance=ct,r.squaredDistance=dt,r.squaredLength=vt,r.negate=yt,r.inverse=Mt,r.normalize=xt,r.dot=et,r.cross=mt,r.lerp=T,r.hermite=y,r.bezier=G,r.random=K,r.transformMat4=$,r.transformMat3=rt,r.transformQuat=nt,r.rotateX=h,r.rotateY=M,r.rotateZ=V,r.angle=H,r.zero=Z,r.str=it,r.exactEquals=at,r.equals=st,r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0;var u=w(_t());function I(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return I=function(){return e},e}function w(e){if(e&&e.__esModule)return e;if(e===null||o(e)!=="object"&&typeof e!="function")return{default:e};var g=I();if(g&&g.has(e))return g.get(e);var n={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in e)if(Object.prototype.hasOwnProperty.call(e,b)){var P=d?Object.getOwnPropertyDescriptor(e,b):null;P&&(P.get||P.set)?Object.defineProperty(n,b,P):n[b]=e[b]}return n.default=e,g&&g.set(e,n),n}function C(){var e=new u.ARRAY_TYPE(3);return u.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function s(e){var g=new u.ARRAY_TYPE(3);return g[0]=e[0],g[1]=e[1],g[2]=e[2],g}function l(e){var g=e[0],n=e[1],d=e[2];return Math.hypot(g,n,d)}function p(e,g,n){var d=new u.ARRAY_TYPE(3);return d[0]=e,d[1]=g,d[2]=n,d}function E(e,g){return e[0]=g[0],e[1]=g[1],e[2]=g[2],e}function v(e,g,n,d){return e[0]=g,e[1]=n,e[2]=d,e}function D(e,g,n){return e[0]=g[0]+n[0],e[1]=g[1]+n[1],e[2]=g[2]+n[2],e}function F(e,g,n){return e[0]=g[0]-n[0],e[1]=g[1]-n[1],e[2]=g[2]-n[2],e}function Y(e,g,n){return e[0]=g[0]*n[0],e[1]=g[1]*n[1],e[2]=g[2]*n[2],e}function z(e,g,n){return e[0]=g[0]/n[0],e[1]=g[1]/n[1],e[2]=g[2]/n[2],e}function k(e,g){return e[0]=Math.ceil(g[0]),e[1]=Math.ceil(g[1]),e[2]=Math.ceil(g[2]),e}function j(e,g){return e[0]=Math.floor(g[0]),e[1]=Math.floor(g[1]),e[2]=Math.floor(g[2]),e}function U(e,g,n){return e[0]=Math.min(g[0],n[0]),e[1]=Math.min(g[1],n[1]),e[2]=Math.min(g[2],n[2]),e}function J(e,g,n){return e[0]=Math.max(g[0],n[0]),e[1]=Math.max(g[1],n[1]),e[2]=Math.max(g[2],n[2]),e}function At(e,g){return e[0]=Math.round(g[0]),e[1]=Math.round(g[1]),e[2]=Math.round(g[2]),e}function ht(e,g,n){return e[0]=g[0]*n,e[1]=g[1]*n,e[2]=g[2]*n,e}function lt(e,g,n,d){return e[0]=g[0]+n[0]*d,e[1]=g[1]+n[1]*d,e[2]=g[2]+n[2]*d,e}function ct(e,g){var n=g[0]-e[0],d=g[1]-e[1],b=g[2]-e[2];return Math.hypot(n,d,b)}function dt(e,g){var n=g[0]-e[0],d=g[1]-e[1],b=g[2]-e[2];return n*n+d*d+b*b}function vt(e){var g=e[0],n=e[1],d=e[2];return g*g+n*n+d*d}function yt(e,g){return e[0]=-g[0],e[1]=-g[1],e[2]=-g[2],e}function Mt(e,g){return e[0]=1/g[0],e[1]=1/g[1],e[2]=1/g[2],e}function xt(e,g){var n=g[0],d=g[1],b=g[2],P=n*n+d*d+b*b;return P>0&&(P=1/Math.sqrt(P)),e[0]=g[0]*P,e[1]=g[1]*P,e[2]=g[2]*P,e}function et(e,g){return e[0]*g[0]+e[1]*g[1]+e[2]*g[2]}function mt(e,g,n){var d=g[0],b=g[1],P=g[2],S=n[0],L=n[1],m=n[2];return e[0]=b*m-P*L,e[1]=P*S-d*m,e[2]=d*L-b*S,e}function T(e,g,n,d){var b=g[0],P=g[1],S=g[2];return e[0]=b+d*(n[0]-b),e[1]=P+d*(n[1]-P),e[2]=S+d*(n[2]-S),e}function y(e,g,n,d,b,P){var S=P*P,L=S*(2*P-3)+1,m=S*(P-2)+P,R=S*(P-1),B=S*(3-2*P);return e[0]=g[0]*L+n[0]*m+d[0]*R+b[0]*B,e[1]=g[1]*L+n[1]*m+d[1]*R+b[1]*B,e[2]=g[2]*L+n[2]*m+d[2]*R+b[2]*B,e}function G(e,g,n,d,b,P){var S=1-P,L=S*S,m=P*P,R=L*S,B=3*P*L,O=3*m*S,N=m*P;return e[0]=g[0]*R+n[0]*B+d[0]*O+b[0]*N,e[1]=g[1]*R+n[1]*B+d[1]*O+b[1]*N,e[2]=g[2]*R+n[2]*B+d[2]*O+b[2]*N,e}function K(e,g){g=g||1;var n=u.RANDOM()*2*Math.PI,d=u.RANDOM()*2-1,b=Math.sqrt(1-d*d)*g;return e[0]=Math.cos(n)*b,e[1]=Math.sin(n)*b,e[2]=d*g,e}function $(e,g,n){var d=g[0],b=g[1],P=g[2],S=n[3]*d+n[7]*b+n[11]*P+n[15];return S=S||1,e[0]=(n[0]*d+n[4]*b+n[8]*P+n[12])/S,e[1]=(n[1]*d+n[5]*b+n[9]*P+n[13])/S,e[2]=(n[2]*d+n[6]*b+n[10]*P+n[14])/S,e}function rt(e,g,n){var d=g[0],b=g[1],P=g[2];return e[0]=d*n[0]+b*n[3]+P*n[6],e[1]=d*n[1]+b*n[4]+P*n[7],e[2]=d*n[2]+b*n[5]+P*n[8],e}function nt(e,g,n){var d=n[0],b=n[1],P=n[2],S=n[3],L=g[0],m=g[1],R=g[2],B=b*R-P*m,O=P*L-d*R,N=d*m-b*L,X=b*N-P*O,Q=P*B-d*N,_=d*O-b*B,q=S*2;return B*=q,O*=q,N*=q,X*=2,Q*=2,_*=2,e[0]=L+B+X,e[1]=m+O+Q,e[2]=R+N+_,e}function h(e,g,n,d){var b=[],P=[];return b[0]=g[0]-n[0],b[1]=g[1]-n[1],b[2]=g[2]-n[2],P[0]=b[0],P[1]=b[1]*Math.cos(d)-b[2]*Math.sin(d),P[2]=b[1]*Math.sin(d)+b[2]*Math.cos(d),e[0]=P[0]+n[0],e[1]=P[1]+n[1],e[2]=P[2]+n[2],e}function M(e,g,n,d){var b=[],P=[];return b[0]=g[0]-n[0],b[1]=g[1]-n[1],b[2]=g[2]-n[2],P[0]=b[2]*Math.sin(d)+b[0]*Math.cos(d),P[1]=b[1],P[2]=b[2]*Math.cos(d)-b[0]*Math.sin(d),e[0]=P[0]+n[0],e[1]=P[1]+n[1],e[2]=P[2]+n[2],e}function V(e,g,n,d){var b=[],P=[];return b[0]=g[0]-n[0],b[1]=g[1]-n[1],b[2]=g[2]-n[2],P[0]=b[0]*Math.cos(d)-b[1]*Math.sin(d),P[1]=b[0]*Math.sin(d)+b[1]*Math.cos(d),P[2]=b[2],e[0]=P[0]+n[0],e[1]=P[1]+n[1],e[2]=P[2]+n[2],e}function H(e,g){var n=e[0],d=e[1],b=e[2],P=g[0],S=g[1],L=g[2],m=Math.sqrt(n*n+d*d+b*b),R=Math.sqrt(P*P+S*S+L*L),B=m*R,O=B&&et(e,g)/B;return Math.acos(Math.min(Math.max(O,-1),1))}function Z(e){return e[0]=0,e[1]=0,e[2]=0,e}function it(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function at(e,g){return e[0]===g[0]&&e[1]===g[1]&&e[2]===g[2]}function st(e,g){var n=e[0],d=e[1],b=e[2],P=g[0],S=g[1],L=g[2];return Math.abs(n-P)<=u.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(d-S)<=u.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(b-L)<=u.EPSILON*Math.max(1,Math.abs(b),Math.abs(L))}var Ct=F;r.sub=Ct;var A=Y;r.mul=A;var i=z;r.div=i;var c=ct;r.dist=c;var x=dt;r.sqrDist=x;var a=l;r.len=a;var f=vt;r.sqrLen=f;var t=function(){var e=C();return function(g,n,d,b,P,S){var L,m;for(n||(n=3),d||(d=0),b?m=Math.min(b*n+d,g.length):m=g.length,L=d;L<m;L+=n)e[0]=g[L],e[1]=g[L+1],e[2]=g[L+2],P(e,e,S),g[L]=e[0],g[L+1]=e[1],g[L+2]=e[2];return g}}();r.forEach=t}),br=It(r=>{function o(A){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(i){return typeof i}:o=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},o(A)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=C,r.clone=s,r.fromValues=l,r.copy=p,r.set=E,r.add=v,r.subtract=D,r.multiply=F,r.divide=Y,r.ceil=z,r.floor=k,r.min=j,r.max=U,r.round=J,r.scale=At,r.scaleAndAdd=ht,r.distance=lt,r.squaredDistance=ct,r.length=dt,r.squaredLength=vt,r.negate=yt,r.inverse=Mt,r.normalize=xt,r.dot=et,r.cross=mt,r.lerp=T,r.random=y,r.transformMat4=G,r.transformQuat=K,r.zero=$,r.str=rt,r.exactEquals=nt,r.equals=h,r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0;var u=w(_t());function I(){if(typeof WeakMap!="function")return null;var A=new WeakMap;return I=function(){return A},A}function w(A){if(A&&A.__esModule)return A;if(A===null||o(A)!=="object"&&typeof A!="function")return{default:A};var i=I();if(i&&i.has(A))return i.get(A);var c={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in A)if(Object.prototype.hasOwnProperty.call(A,a)){var f=x?Object.getOwnPropertyDescriptor(A,a):null;f&&(f.get||f.set)?Object.defineProperty(c,a,f):c[a]=A[a]}return c.default=A,i&&i.set(A,c),c}function C(){var A=new u.ARRAY_TYPE(4);return u.ARRAY_TYPE!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0),A}function s(A){var i=new u.ARRAY_TYPE(4);return i[0]=A[0],i[1]=A[1],i[2]=A[2],i[3]=A[3],i}function l(A,i,c,x){var a=new u.ARRAY_TYPE(4);return a[0]=A,a[1]=i,a[2]=c,a[3]=x,a}function p(A,i){return A[0]=i[0],A[1]=i[1],A[2]=i[2],A[3]=i[3],A}function E(A,i,c,x,a){return A[0]=i,A[1]=c,A[2]=x,A[3]=a,A}function v(A,i,c){return A[0]=i[0]+c[0],A[1]=i[1]+c[1],A[2]=i[2]+c[2],A[3]=i[3]+c[3],A}function D(A,i,c){return A[0]=i[0]-c[0],A[1]=i[1]-c[1],A[2]=i[2]-c[2],A[3]=i[3]-c[3],A}function F(A,i,c){return A[0]=i[0]*c[0],A[1]=i[1]*c[1],A[2]=i[2]*c[2],A[3]=i[3]*c[3],A}function Y(A,i,c){return A[0]=i[0]/c[0],A[1]=i[1]/c[1],A[2]=i[2]/c[2],A[3]=i[3]/c[3],A}function z(A,i){return A[0]=Math.ceil(i[0]),A[1]=Math.ceil(i[1]),A[2]=Math.ceil(i[2]),A[3]=Math.ceil(i[3]),A}function k(A,i){return A[0]=Math.floor(i[0]),A[1]=Math.floor(i[1]),A[2]=Math.floor(i[2]),A[3]=Math.floor(i[3]),A}function j(A,i,c){return A[0]=Math.min(i[0],c[0]),A[1]=Math.min(i[1],c[1]),A[2]=Math.min(i[2],c[2]),A[3]=Math.min(i[3],c[3]),A}function U(A,i,c){return A[0]=Math.max(i[0],c[0]),A[1]=Math.max(i[1],c[1]),A[2]=Math.max(i[2],c[2]),A[3]=Math.max(i[3],c[3]),A}function J(A,i){return A[0]=Math.round(i[0]),A[1]=Math.round(i[1]),A[2]=Math.round(i[2]),A[3]=Math.round(i[3]),A}function At(A,i,c){return A[0]=i[0]*c,A[1]=i[1]*c,A[2]=i[2]*c,A[3]=i[3]*c,A}function ht(A,i,c,x){return A[0]=i[0]+c[0]*x,A[1]=i[1]+c[1]*x,A[2]=i[2]+c[2]*x,A[3]=i[3]+c[3]*x,A}function lt(A,i){var c=i[0]-A[0],x=i[1]-A[1],a=i[2]-A[2],f=i[3]-A[3];return Math.hypot(c,x,a,f)}function ct(A,i){var c=i[0]-A[0],x=i[1]-A[1],a=i[2]-A[2],f=i[3]-A[3];return c*c+x*x+a*a+f*f}function dt(A){var i=A[0],c=A[1],x=A[2],a=A[3];return Math.hypot(i,c,x,a)}function vt(A){var i=A[0],c=A[1],x=A[2],a=A[3];return i*i+c*c+x*x+a*a}function yt(A,i){return A[0]=-i[0],A[1]=-i[1],A[2]=-i[2],A[3]=-i[3],A}function Mt(A,i){return A[0]=1/i[0],A[1]=1/i[1],A[2]=1/i[2],A[3]=1/i[3],A}function xt(A,i){var c=i[0],x=i[1],a=i[2],f=i[3],t=c*c+x*x+a*a+f*f;return t>0&&(t=1/Math.sqrt(t)),A[0]=c*t,A[1]=x*t,A[2]=a*t,A[3]=f*t,A}function et(A,i){return A[0]*i[0]+A[1]*i[1]+A[2]*i[2]+A[3]*i[3]}function mt(A,i,c,x){var a=c[0]*x[1]-c[1]*x[0],f=c[0]*x[2]-c[2]*x[0],t=c[0]*x[3]-c[3]*x[0],e=c[1]*x[2]-c[2]*x[1],g=c[1]*x[3]-c[3]*x[1],n=c[2]*x[3]-c[3]*x[2],d=i[0],b=i[1],P=i[2],S=i[3];return A[0]=b*n-P*g+S*e,A[1]=-(d*n)+P*t-S*f,A[2]=d*g-b*t+S*a,A[3]=-(d*e)+b*f-P*a,A}function T(A,i,c,x){var a=i[0],f=i[1],t=i[2],e=i[3];return A[0]=a+x*(c[0]-a),A[1]=f+x*(c[1]-f),A[2]=t+x*(c[2]-t),A[3]=e+x*(c[3]-e),A}function y(A,i){i=i||1;var c,x,a,f,t,e;do c=u.RANDOM()*2-1,x=u.RANDOM()*2-1,t=c*c+x*x;while(t>=1);do a=u.RANDOM()*2-1,f=u.RANDOM()*2-1,e=a*a+f*f;while(e>=1);var g=Math.sqrt((1-t)/e);return A[0]=i*c,A[1]=i*x,A[2]=i*a*g,A[3]=i*f*g,A}function G(A,i,c){var x=i[0],a=i[1],f=i[2],t=i[3];return A[0]=c[0]*x+c[4]*a+c[8]*f+c[12]*t,A[1]=c[1]*x+c[5]*a+c[9]*f+c[13]*t,A[2]=c[2]*x+c[6]*a+c[10]*f+c[14]*t,A[3]=c[3]*x+c[7]*a+c[11]*f+c[15]*t,A}function K(A,i,c){var x=i[0],a=i[1],f=i[2],t=c[0],e=c[1],g=c[2],n=c[3],d=n*x+e*f-g*a,b=n*a+g*x-t*f,P=n*f+t*a-e*x,S=-t*x-e*a-g*f;return A[0]=d*n+S*-t+b*-g-P*-e,A[1]=b*n+S*-e+P*-t-d*-g,A[2]=P*n+S*-g+d*-e-b*-t,A[3]=i[3],A}function $(A){return A[0]=0,A[1]=0,A[2]=0,A[3]=0,A}function rt(A){return"vec4("+A[0]+", "+A[1]+", "+A[2]+", "+A[3]+")"}function nt(A,i){return A[0]===i[0]&&A[1]===i[1]&&A[2]===i[2]&&A[3]===i[3]}function h(A,i){var c=A[0],x=A[1],a=A[2],f=A[3],t=i[0],e=i[1],g=i[2],n=i[3];return Math.abs(c-t)<=u.EPSILON*Math.max(1,Math.abs(c),Math.abs(t))&&Math.abs(x-e)<=u.EPSILON*Math.max(1,Math.abs(x),Math.abs(e))&&Math.abs(a-g)<=u.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(f-n)<=u.EPSILON*Math.max(1,Math.abs(f),Math.abs(n))}var M=D;r.sub=M;var V=F;r.mul=V;var H=Y;r.div=H;var Z=lt;r.dist=Z;var it=ct;r.sqrDist=it;var at=dt;r.len=at;var st=vt;r.sqrLen=st;var Ct=function(){var A=C();return function(i,c,x,a,f,t){var e,g;for(c||(c=4),x||(x=0),a?g=Math.min(a*c+x,i.length):g=i.length,e=x;e<g;e+=c)A[0]=i[e],A[1]=i[e+1],A[2]=i[e+2],A[3]=i[e+3],f(A,A,t),i[e]=A[0],i[e+1]=A[1],i[e+2]=A[2],i[e+3]=A[3];return i}}();r.forEach=Ct}),yr=It(r=>{function o(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(c){return typeof c}:o=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},o(i)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=p,r.identity=E,r.setAxisAngle=v,r.getAxisAngle=D,r.getAngle=F,r.multiply=Y,r.rotateX=z,r.rotateY=k,r.rotateZ=j,r.calculateW=U,r.exp=J,r.ln=At,r.pow=ht,r.slerp=lt,r.random=ct,r.invert=dt,r.conjugate=vt,r.fromMat3=yt,r.fromEuler=Mt,r.str=xt,r.setAxes=r.sqlerp=r.rotationTo=r.equals=r.exactEquals=r.normalize=r.sqrLen=r.squaredLength=r.len=r.length=r.lerp=r.dot=r.scale=r.mul=r.add=r.set=r.copy=r.fromValues=r.clone=void 0;var u=l(_t()),I=l(vr()),w=l(mr()),C=l(br());function s(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return s=function(){return i},i}function l(i){if(i&&i.__esModule)return i;if(i===null||o(i)!=="object"&&typeof i!="function")return{default:i};var c=s();if(c&&c.has(i))return c.get(i);var x={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in i)if(Object.prototype.hasOwnProperty.call(i,f)){var t=a?Object.getOwnPropertyDescriptor(i,f):null;t&&(t.get||t.set)?Object.defineProperty(x,f,t):x[f]=i[f]}return x.default=i,c&&c.set(i,x),x}function p(){var i=new u.ARRAY_TYPE(4);return u.ARRAY_TYPE!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function E(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i}function v(i,c,x){x=x*.5;var a=Math.sin(x);return i[0]=a*c[0],i[1]=a*c[1],i[2]=a*c[2],i[3]=Math.cos(x),i}function D(i,c){var x=Math.acos(c[3])*2,a=Math.sin(x/2);return a>u.EPSILON?(i[0]=c[0]/a,i[1]=c[1]/a,i[2]=c[2]/a):(i[0]=1,i[1]=0,i[2]=0),x}function F(i,c){var x=rt(i,c);return Math.acos(2*x*x-1)}function Y(i,c,x){var a=c[0],f=c[1],t=c[2],e=c[3],g=x[0],n=x[1],d=x[2],b=x[3];return i[0]=a*b+e*g+f*d-t*n,i[1]=f*b+e*n+t*g-a*d,i[2]=t*b+e*d+a*n-f*g,i[3]=e*b-a*g-f*n-t*d,i}function z(i,c,x){x*=.5;var a=c[0],f=c[1],t=c[2],e=c[3],g=Math.sin(x),n=Math.cos(x);return i[0]=a*n+e*g,i[1]=f*n+t*g,i[2]=t*n-f*g,i[3]=e*n-a*g,i}function k(i,c,x){x*=.5;var a=c[0],f=c[1],t=c[2],e=c[3],g=Math.sin(x),n=Math.cos(x);return i[0]=a*n-t*g,i[1]=f*n+e*g,i[2]=t*n+a*g,i[3]=e*n-f*g,i}function j(i,c,x){x*=.5;var a=c[0],f=c[1],t=c[2],e=c[3],g=Math.sin(x),n=Math.cos(x);return i[0]=a*n+f*g,i[1]=f*n-a*g,i[2]=t*n+e*g,i[3]=e*n-t*g,i}function U(i,c){var x=c[0],a=c[1],f=c[2];return i[0]=x,i[1]=a,i[2]=f,i[3]=Math.sqrt(Math.abs(1-x*x-a*a-f*f)),i}function J(i,c){var x=c[0],a=c[1],f=c[2],t=c[3],e=Math.sqrt(x*x+a*a+f*f),g=Math.exp(t),n=e>0?g*Math.sin(e)/e:0;return i[0]=x*n,i[1]=a*n,i[2]=f*n,i[3]=g*Math.cos(e),i}function At(i,c){var x=c[0],a=c[1],f=c[2],t=c[3],e=Math.sqrt(x*x+a*a+f*f),g=e>0?Math.atan2(e,t)/e:0;return i[0]=x*g,i[1]=a*g,i[2]=f*g,i[3]=.5*Math.log(x*x+a*a+f*f+t*t),i}function ht(i,c,x){return At(i,c),$(i,i,x),J(i,i),i}function lt(i,c,x,a){var f=c[0],t=c[1],e=c[2],g=c[3],n=x[0],d=x[1],b=x[2],P=x[3],S,L,m,R,B;return L=f*n+t*d+e*b+g*P,L<0&&(L=-L,n=-n,d=-d,b=-b,P=-P),1-L>u.EPSILON?(S=Math.acos(L),m=Math.sin(S),R=Math.sin((1-a)*S)/m,B=Math.sin(a*S)/m):(R=1-a,B=a),i[0]=R*f+B*n,i[1]=R*t+B*d,i[2]=R*e+B*b,i[3]=R*g+B*P,i}function ct(i){var c=u.RANDOM(),x=u.RANDOM(),a=u.RANDOM(),f=Math.sqrt(1-c),t=Math.sqrt(c);return i[0]=f*Math.sin(2*Math.PI*x),i[1]=f*Math.cos(2*Math.PI*x),i[2]=t*Math.sin(2*Math.PI*a),i[3]=t*Math.cos(2*Math.PI*a),i}function dt(i,c){var x=c[0],a=c[1],f=c[2],t=c[3],e=x*x+a*a+f*f+t*t,g=e?1/e:0;return i[0]=-x*g,i[1]=-a*g,i[2]=-f*g,i[3]=t*g,i}function vt(i,c){return i[0]=-c[0],i[1]=-c[1],i[2]=-c[2],i[3]=c[3],i}function yt(i,c){var x=c[0]+c[4]+c[8],a;if(x>0)a=Math.sqrt(x+1),i[3]=.5*a,a=.5/a,i[0]=(c[5]-c[7])*a,i[1]=(c[6]-c[2])*a,i[2]=(c[1]-c[3])*a;else{var f=0;c[4]>c[0]&&(f=1),c[8]>c[f*3+f]&&(f=2);var t=(f+1)%3,e=(f+2)%3;a=Math.sqrt(c[f*3+f]-c[t*3+t]-c[e*3+e]+1),i[f]=.5*a,a=.5/a,i[3]=(c[t*3+e]-c[e*3+t])*a,i[t]=(c[t*3+f]+c[f*3+t])*a,i[e]=(c[e*3+f]+c[f*3+e])*a}return i}function Mt(i,c,x,a){var f=.5*Math.PI/180;c*=f,x*=f,a*=f;var t=Math.sin(c),e=Math.cos(c),g=Math.sin(x),n=Math.cos(x),d=Math.sin(a),b=Math.cos(a);return i[0]=t*n*b-e*g*d,i[1]=e*g*b+t*n*d,i[2]=e*n*d-t*g*b,i[3]=e*n*b+t*g*d,i}function xt(i){return"quat("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")"}var et=C.clone;r.clone=et;var mt=C.fromValues;r.fromValues=mt;var T=C.copy;r.copy=T;var y=C.set;r.set=y;var G=C.add;r.add=G;var K=Y;r.mul=K;var $=C.scale;r.scale=$;var rt=C.dot;r.dot=rt;var nt=C.lerp;r.lerp=nt;var h=C.length;r.length=h;var M=h;r.len=M;var V=C.squaredLength;r.squaredLength=V;var H=V;r.sqrLen=H;var Z=C.normalize;r.normalize=Z;var it=C.exactEquals;r.exactEquals=it;var at=C.equals;r.equals=at;var st=function(){var i=w.create(),c=w.fromValues(1,0,0),x=w.fromValues(0,1,0);return function(a,f,t){var e=w.dot(f,t);return e<-.999999?(w.cross(i,c,f),w.len(i)<1e-6&&w.cross(i,x,f),w.normalize(i,i),v(a,i,Math.PI),a):e>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(w.cross(i,f,t),a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=1+e,Z(a,a))}}();r.rotationTo=st;var Ct=function(){var i=p(),c=p();return function(x,a,f,t,e,g){return lt(i,a,e,g),lt(c,f,t,g),lt(x,i,c,2*g*(1-g)),x}}();r.sqlerp=Ct;var A=function(){var i=I.create();return function(c,x,a,f){return i[0]=a[0],i[3]=a[1],i[6]=a[2],i[1]=f[0],i[4]=f[1],i[7]=f[2],i[2]=-x[0],i[5]=-x[1],i[8]=-x[2],Z(c,yt(c,i))}}();r.setAxes=A}),$r=It(r=>{function o(A){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(i){return typeof i}:o=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},o(A)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=l,r.clone=p,r.fromValues=E,r.fromRotationTranslationValues=v,r.fromRotationTranslation=D,r.fromTranslation=F,r.fromRotation=Y,r.fromMat4=z,r.copy=k,r.identity=j,r.set=U,r.getDual=At,r.setDual=lt,r.getTranslation=ct,r.translate=dt,r.rotateX=vt,r.rotateY=yt,r.rotateZ=Mt,r.rotateByQuatAppend=xt,r.rotateByQuatPrepend=et,r.rotateAroundAxis=mt,r.add=T,r.multiply=y,r.scale=K,r.lerp=rt,r.invert=nt,r.conjugate=h,r.normalize=it,r.str=at,r.exactEquals=st,r.equals=Ct,r.sqrLen=r.squaredLength=r.len=r.length=r.dot=r.mul=r.setReal=r.getReal=void 0;var u=s(_t()),I=s(yr()),w=s(pr());function C(){if(typeof WeakMap!="function")return null;var A=new WeakMap;return C=function(){return A},A}function s(A){if(A&&A.__esModule)return A;if(A===null||o(A)!=="object"&&typeof A!="function")return{default:A};var i=C();if(i&&i.has(A))return i.get(A);var c={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in A)if(Object.prototype.hasOwnProperty.call(A,a)){var f=x?Object.getOwnPropertyDescriptor(A,a):null;f&&(f.get||f.set)?Object.defineProperty(c,a,f):c[a]=A[a]}return c.default=A,i&&i.set(A,c),c}function l(){var A=new u.ARRAY_TYPE(8);return u.ARRAY_TYPE!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[4]=0,A[5]=0,A[6]=0,A[7]=0),A[3]=1,A}function p(A){var i=new u.ARRAY_TYPE(8);return i[0]=A[0],i[1]=A[1],i[2]=A[2],i[3]=A[3],i[4]=A[4],i[5]=A[5],i[6]=A[6],i[7]=A[7],i}function E(A,i,c,x,a,f,t,e){var g=new u.ARRAY_TYPE(8);return g[0]=A,g[1]=i,g[2]=c,g[3]=x,g[4]=a,g[5]=f,g[6]=t,g[7]=e,g}function v(A,i,c,x,a,f,t){var e=new u.ARRAY_TYPE(8);e[0]=A,e[1]=i,e[2]=c,e[3]=x;var g=a*.5,n=f*.5,d=t*.5;return e[4]=g*x+n*c-d*i,e[5]=n*x+d*A-g*c,e[6]=d*x+g*i-n*A,e[7]=-g*A-n*i-d*c,e}function D(A,i,c){var x=c[0]*.5,a=c[1]*.5,f=c[2]*.5,t=i[0],e=i[1],g=i[2],n=i[3];return A[0]=t,A[1]=e,A[2]=g,A[3]=n,A[4]=x*n+a*g-f*e,A[5]=a*n+f*t-x*g,A[6]=f*n+x*e-a*t,A[7]=-x*t-a*e-f*g,A}function F(A,i){return A[0]=0,A[1]=0,A[2]=0,A[3]=1,A[4]=i[0]*.5,A[5]=i[1]*.5,A[6]=i[2]*.5,A[7]=0,A}function Y(A,i){return A[0]=i[0],A[1]=i[1],A[2]=i[2],A[3]=i[3],A[4]=0,A[5]=0,A[6]=0,A[7]=0,A}function z(A,i){var c=I.create();w.getRotation(c,i);var x=new u.ARRAY_TYPE(3);return w.getTranslation(x,i),D(A,c,x),A}function k(A,i){return A[0]=i[0],A[1]=i[1],A[2]=i[2],A[3]=i[3],A[4]=i[4],A[5]=i[5],A[6]=i[6],A[7]=i[7],A}function j(A){return A[0]=0,A[1]=0,A[2]=0,A[3]=1,A[4]=0,A[5]=0,A[6]=0,A[7]=0,A}function U(A,i,c,x,a,f,t,e,g){return A[0]=i,A[1]=c,A[2]=x,A[3]=a,A[4]=f,A[5]=t,A[6]=e,A[7]=g,A}var J=I.copy;r.getReal=J;function At(A,i){return A[0]=i[4],A[1]=i[5],A[2]=i[6],A[3]=i[7],A}var ht=I.copy;r.setReal=ht;function lt(A,i){return A[4]=i[0],A[5]=i[1],A[6]=i[2],A[7]=i[3],A}function ct(A,i){var c=i[4],x=i[5],a=i[6],f=i[7],t=-i[0],e=-i[1],g=-i[2],n=i[3];return A[0]=(c*n+f*t+x*g-a*e)*2,A[1]=(x*n+f*e+a*t-c*g)*2,A[2]=(a*n+f*g+c*e-x*t)*2,A}function dt(A,i,c){var x=i[0],a=i[1],f=i[2],t=i[3],e=c[0]*.5,g=c[1]*.5,n=c[2]*.5,d=i[4],b=i[5],P=i[6],S=i[7];return A[0]=x,A[1]=a,A[2]=f,A[3]=t,A[4]=t*e+a*n-f*g+d,A[5]=t*g+f*e-x*n+b,A[6]=t*n+x*g-a*e+P,A[7]=-x*e-a*g-f*n+S,A}function vt(A,i,c){var x=-i[0],a=-i[1],f=-i[2],t=i[3],e=i[4],g=i[5],n=i[6],d=i[7],b=e*t+d*x+g*f-n*a,P=g*t+d*a+n*x-e*f,S=n*t+d*f+e*a-g*x,L=d*t-e*x-g*a-n*f;return I.rotateX(A,i,c),x=A[0],a=A[1],f=A[2],t=A[3],A[4]=b*t+L*x+P*f-S*a,A[5]=P*t+L*a+S*x-b*f,A[6]=S*t+L*f+b*a-P*x,A[7]=L*t-b*x-P*a-S*f,A}function yt(A,i,c){var x=-i[0],a=-i[1],f=-i[2],t=i[3],e=i[4],g=i[5],n=i[6],d=i[7],b=e*t+d*x+g*f-n*a,P=g*t+d*a+n*x-e*f,S=n*t+d*f+e*a-g*x,L=d*t-e*x-g*a-n*f;return I.rotateY(A,i,c),x=A[0],a=A[1],f=A[2],t=A[3],A[4]=b*t+L*x+P*f-S*a,A[5]=P*t+L*a+S*x-b*f,A[6]=S*t+L*f+b*a-P*x,A[7]=L*t-b*x-P*a-S*f,A}function Mt(A,i,c){var x=-i[0],a=-i[1],f=-i[2],t=i[3],e=i[4],g=i[5],n=i[6],d=i[7],b=e*t+d*x+g*f-n*a,P=g*t+d*a+n*x-e*f,S=n*t+d*f+e*a-g*x,L=d*t-e*x-g*a-n*f;return I.rotateZ(A,i,c),x=A[0],a=A[1],f=A[2],t=A[3],A[4]=b*t+L*x+P*f-S*a,A[5]=P*t+L*a+S*x-b*f,A[6]=S*t+L*f+b*a-P*x,A[7]=L*t-b*x-P*a-S*f,A}function xt(A,i,c){var x=c[0],a=c[1],f=c[2],t=c[3],e=i[0],g=i[1],n=i[2],d=i[3];return A[0]=e*t+d*x+g*f-n*a,A[1]=g*t+d*a+n*x-e*f,A[2]=n*t+d*f+e*a-g*x,A[3]=d*t-e*x-g*a-n*f,e=i[4],g=i[5],n=i[6],d=i[7],A[4]=e*t+d*x+g*f-n*a,A[5]=g*t+d*a+n*x-e*f,A[6]=n*t+d*f+e*a-g*x,A[7]=d*t-e*x-g*a-n*f,A}function et(A,i,c){var x=i[0],a=i[1],f=i[2],t=i[3],e=c[0],g=c[1],n=c[2],d=c[3];return A[0]=x*d+t*e+a*n-f*g,A[1]=a*d+t*g+f*e-x*n,A[2]=f*d+t*n+x*g-a*e,A[3]=t*d-x*e-a*g-f*n,e=c[4],g=c[5],n=c[6],d=c[7],A[4]=x*d+t*e+a*n-f*g,A[5]=a*d+t*g+f*e-x*n,A[6]=f*d+t*n+x*g-a*e,A[7]=t*d-x*e-a*g-f*n,A}function mt(A,i,c,x){if(Math.abs(x)<u.EPSILON)return k(A,i);var a=Math.hypot(c[0],c[1],c[2]);x=x*.5;var f=Math.sin(x),t=f*c[0]/a,e=f*c[1]/a,g=f*c[2]/a,n=Math.cos(x),d=i[0],b=i[1],P=i[2],S=i[3];A[0]=d*n+S*t+b*g-P*e,A[1]=b*n+S*e+P*t-d*g,A[2]=P*n+S*g+d*e-b*t,A[3]=S*n-d*t-b*e-P*g;var L=i[4],m=i[5],R=i[6],B=i[7];return A[4]=L*n+B*t+m*g-R*e,A[5]=m*n+B*e+R*t-L*g,A[6]=R*n+B*g+L*e-m*t,A[7]=B*n-L*t-m*e-R*g,A}function T(A,i,c){return A[0]=i[0]+c[0],A[1]=i[1]+c[1],A[2]=i[2]+c[2],A[3]=i[3]+c[3],A[4]=i[4]+c[4],A[5]=i[5]+c[5],A[6]=i[6]+c[6],A[7]=i[7]+c[7],A}function y(A,i,c){var x=i[0],a=i[1],f=i[2],t=i[3],e=c[4],g=c[5],n=c[6],d=c[7],b=i[4],P=i[5],S=i[6],L=i[7],m=c[0],R=c[1],B=c[2],O=c[3];return A[0]=x*O+t*m+a*B-f*R,A[1]=a*O+t*R+f*m-x*B,A[2]=f*O+t*B+x*R-a*m,A[3]=t*O-x*m-a*R-f*B,A[4]=x*d+t*e+a*n-f*g+b*O+L*m+P*B-S*R,A[5]=a*d+t*g+f*e-x*n+P*O+L*R+S*m-b*B,A[6]=f*d+t*n+x*g-a*e+S*O+L*B+b*R-P*m,A[7]=t*d-x*e-a*g-f*n+L*O-b*m-P*R-S*B,A}var G=y;r.mul=G;function K(A,i,c){return A[0]=i[0]*c,A[1]=i[1]*c,A[2]=i[2]*c,A[3]=i[3]*c,A[4]=i[4]*c,A[5]=i[5]*c,A[6]=i[6]*c,A[7]=i[7]*c,A}var $=I.dot;r.dot=$;function rt(A,i,c,x){var a=1-x;return $(i,c)<0&&(x=-x),A[0]=i[0]*a+c[0]*x,A[1]=i[1]*a+c[1]*x,A[2]=i[2]*a+c[2]*x,A[3]=i[3]*a+c[3]*x,A[4]=i[4]*a+c[4]*x,A[5]=i[5]*a+c[5]*x,A[6]=i[6]*a+c[6]*x,A[7]=i[7]*a+c[7]*x,A}function nt(A,i){var c=H(i);return A[0]=-i[0]/c,A[1]=-i[1]/c,A[2]=-i[2]/c,A[3]=i[3]/c,A[4]=-i[4]/c,A[5]=-i[5]/c,A[6]=-i[6]/c,A[7]=i[7]/c,A}function h(A,i){return A[0]=-i[0],A[1]=-i[1],A[2]=-i[2],A[3]=i[3],A[4]=-i[4],A[5]=-i[5],A[6]=-i[6],A[7]=i[7],A}var M=I.length;r.length=M;var V=M;r.len=V;var H=I.squaredLength;r.squaredLength=H;var Z=H;r.sqrLen=Z;function it(A,i){var c=H(i);if(c>0){c=Math.sqrt(c);var x=i[0]/c,a=i[1]/c,f=i[2]/c,t=i[3]/c,e=i[4],g=i[5],n=i[6],d=i[7],b=x*e+a*g+f*n+t*d;A[0]=x,A[1]=a,A[2]=f,A[3]=t,A[4]=(e-x*b)/c,A[5]=(g-a*b)/c,A[6]=(n-f*b)/c,A[7]=(d-t*b)/c}return A}function at(A){return"quat2("+A[0]+", "+A[1]+", "+A[2]+", "+A[3]+", "+A[4]+", "+A[5]+", "+A[6]+", "+A[7]+")"}function st(A,i){return A[0]===i[0]&&A[1]===i[1]&&A[2]===i[2]&&A[3]===i[3]&&A[4]===i[4]&&A[5]===i[5]&&A[6]===i[6]&&A[7]===i[7]}function Ct(A,i){var c=A[0],x=A[1],a=A[2],f=A[3],t=A[4],e=A[5],g=A[6],n=A[7],d=i[0],b=i[1],P=i[2],S=i[3],L=i[4],m=i[5],R=i[6],B=i[7];return Math.abs(c-d)<=u.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(x-b)<=u.EPSILON*Math.max(1,Math.abs(x),Math.abs(b))&&Math.abs(a-P)<=u.EPSILON*Math.max(1,Math.abs(a),Math.abs(P))&&Math.abs(f-S)<=u.EPSILON*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(t-L)<=u.EPSILON*Math.max(1,Math.abs(t),Math.abs(L))&&Math.abs(e-m)<=u.EPSILON*Math.max(1,Math.abs(e),Math.abs(m))&&Math.abs(g-R)<=u.EPSILON*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(n-B)<=u.EPSILON*Math.max(1,Math.abs(n),Math.abs(B))}}),te=It(r=>{function o(a){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(f){return typeof f}:o=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},o(a)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=C,r.clone=s,r.fromValues=l,r.copy=p,r.set=E,r.add=v,r.subtract=D,r.multiply=F,r.divide=Y,r.ceil=z,r.floor=k,r.min=j,r.max=U,r.round=J,r.scale=At,r.scaleAndAdd=ht,r.distance=lt,r.squaredDistance=ct,r.length=dt,r.squaredLength=vt,r.negate=yt,r.inverse=Mt,r.normalize=xt,r.dot=et,r.cross=mt,r.lerp=T,r.random=y,r.transformMat2=G,r.transformMat2d=K,r.transformMat3=$,r.transformMat4=rt,r.rotate=nt,r.angle=h,r.zero=M,r.str=V,r.exactEquals=H,r.equals=Z,r.forEach=r.sqrLen=r.sqrDist=r.dist=r.div=r.mul=r.sub=r.len=void 0;var u=w(_t());function I(){if(typeof WeakMap!="function")return null;var a=new WeakMap;return I=function(){return a},a}function w(a){if(a&&a.__esModule)return a;if(a===null||o(a)!=="object"&&typeof a!="function")return{default:a};var f=I();if(f&&f.has(a))return f.get(a);var t={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if(Object.prototype.hasOwnProperty.call(a,g)){var n=e?Object.getOwnPropertyDescriptor(a,g):null;n&&(n.get||n.set)?Object.defineProperty(t,g,n):t[g]=a[g]}return t.default=a,f&&f.set(a,t),t}function C(){var a=new u.ARRAY_TYPE(2);return u.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0),a}function s(a){var f=new u.ARRAY_TYPE(2);return f[0]=a[0],f[1]=a[1],f}function l(a,f){var t=new u.ARRAY_TYPE(2);return t[0]=a,t[1]=f,t}function p(a,f){return a[0]=f[0],a[1]=f[1],a}function E(a,f,t){return a[0]=f,a[1]=t,a}function v(a,f,t){return a[0]=f[0]+t[0],a[1]=f[1]+t[1],a}function D(a,f,t){return a[0]=f[0]-t[0],a[1]=f[1]-t[1],a}function F(a,f,t){return a[0]=f[0]*t[0],a[1]=f[1]*t[1],a}function Y(a,f,t){return a[0]=f[0]/t[0],a[1]=f[1]/t[1],a}function z(a,f){return a[0]=Math.ceil(f[0]),a[1]=Math.ceil(f[1]),a}function k(a,f){return a[0]=Math.floor(f[0]),a[1]=Math.floor(f[1]),a}function j(a,f,t){return a[0]=Math.min(f[0],t[0]),a[1]=Math.min(f[1],t[1]),a}function U(a,f,t){return a[0]=Math.max(f[0],t[0]),a[1]=Math.max(f[1],t[1]),a}function J(a,f){return a[0]=Math.round(f[0]),a[1]=Math.round(f[1]),a}function At(a,f,t){return a[0]=f[0]*t,a[1]=f[1]*t,a}function ht(a,f,t,e){return a[0]=f[0]+t[0]*e,a[1]=f[1]+t[1]*e,a}function lt(a,f){var t=f[0]-a[0],e=f[1]-a[1];return Math.hypot(t,e)}function ct(a,f){var t=f[0]-a[0],e=f[1]-a[1];return t*t+e*e}function dt(a){var f=a[0],t=a[1];return Math.hypot(f,t)}function vt(a){var f=a[0],t=a[1];return f*f+t*t}function yt(a,f){return a[0]=-f[0],a[1]=-f[1],a}function Mt(a,f){return a[0]=1/f[0],a[1]=1/f[1],a}function xt(a,f){var t=f[0],e=f[1],g=t*t+e*e;return g>0&&(g=1/Math.sqrt(g)),a[0]=f[0]*g,a[1]=f[1]*g,a}function et(a,f){return a[0]*f[0]+a[1]*f[1]}function mt(a,f,t){var e=f[0]*t[1]-f[1]*t[0];return a[0]=a[1]=0,a[2]=e,a}function T(a,f,t,e){var g=f[0],n=f[1];return a[0]=g+e*(t[0]-g),a[1]=n+e*(t[1]-n),a}function y(a,f){f=f||1;var t=u.RANDOM()*2*Math.PI;return a[0]=Math.cos(t)*f,a[1]=Math.sin(t)*f,a}function G(a,f,t){var e=f[0],g=f[1];return a[0]=t[0]*e+t[2]*g,a[1]=t[1]*e+t[3]*g,a}function K(a,f,t){var e=f[0],g=f[1];return a[0]=t[0]*e+t[2]*g+t[4],a[1]=t[1]*e+t[3]*g+t[5],a}function $(a,f,t){var e=f[0],g=f[1];return a[0]=t[0]*e+t[3]*g+t[6],a[1]=t[1]*e+t[4]*g+t[7],a}function rt(a,f,t){var e=f[0],g=f[1];return a[0]=t[0]*e+t[4]*g+t[12],a[1]=t[1]*e+t[5]*g+t[13],a}function nt(a,f,t,e){var g=f[0]-t[0],n=f[1]-t[1],d=Math.sin(e),b=Math.cos(e);return a[0]=g*b-n*d+t[0],a[1]=g*d+n*b+t[1],a}function h(a,f){var t=a[0],e=a[1],g=f[0],n=f[1],d=Math.sqrt(t*t+e*e)*Math.sqrt(g*g+n*n),b=d&&(t*g+e*n)/d;return Math.acos(Math.min(Math.max(b,-1),1))}function M(a){return a[0]=0,a[1]=0,a}function V(a){return"vec2("+a[0]+", "+a[1]+")"}function H(a,f){return a[0]===f[0]&&a[1]===f[1]}function Z(a,f){var t=a[0],e=a[1],g=f[0],n=f[1];return Math.abs(t-g)<=u.EPSILON*Math.max(1,Math.abs(t),Math.abs(g))&&Math.abs(e-n)<=u.EPSILON*Math.max(1,Math.abs(e),Math.abs(n))}var it=dt;r.len=it;var at=D;r.sub=at;var st=F;r.mul=st;var Ct=Y;r.div=Ct;var A=lt;r.dist=A;var i=ct;r.sqrDist=i;var c=vt;r.sqrLen=c;var x=function(){var a=C();return function(f,t,e,g,n,d){var b,P;for(t||(t=2),e||(e=0),g?P=Math.min(g*t+e,f.length):P=f.length,b=e;b<P;b+=t)a[0]=f[b],a[1]=f[b+1],n(a,a,d),f[b]=a[0],f[b+1]=a[1];return f}}();r.forEach=x}),ar=It(r=>{function o(z){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(k){return typeof k}:o=function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},o(z)}Object.defineProperty(r,"__esModule",{value:!0}),r.vec4=r.vec3=r.vec2=r.quat2=r.quat=r.mat4=r.mat3=r.mat2d=r.mat2=r.glMatrix=void 0;var u=Y(_t());r.glMatrix=u;var I=Y(Xr());r.mat2=I;var w=Y(Zr());r.mat2d=w;var C=Y(vr());r.mat3=C;var s=Y(pr());r.mat4=s;var l=Y(yr());r.quat=l;var p=Y($r());r.quat2=p;var E=Y(te());r.vec2=E;var v=Y(mr());r.vec3=v;var D=Y(br());r.vec4=D;function F(){if(typeof WeakMap!="function")return null;var z=new WeakMap;return F=function(){return z},z}function Y(z){if(z&&z.__esModule)return z;if(z===null||o(z)!=="object"&&typeof z!="function")return{default:z};var k=F();if(k&&k.has(z))return k.get(z);var j={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var J in z)if(Object.prototype.hasOwnProperty.call(z,J)){var At=U?Object.getOwnPropertyDescriptor(z,J):null;At&&(At.get||At.set)?Object.defineProperty(j,J,At):j[J]=z[J]}return j.default=z,k&&k.set(z,j),j}}),Vt=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.vec3=r.Vector3=void 0;var o=zt(),u=Lt(),I=Array,w=class extends I{get x(){return this[0]}set x(s){this[0]=s}get y(){return this[1]}set y(s){this[1]=s}get z(){return this[2]}set z(s){this[2]=s}get magnitude(){return Math.hypot(...this)}get normalized(){let s=this.magnitude;return s==0?C.zero():this.clone().div(C(s,s,s))}get negative(){return this.clone().negate()}get inversed(){return this.clone().inverse()}constructor(s,l,p){super(s,l,p)}static zero(){return new w(0,0,0)}static one(){return new w(1,1,1)}plus(s){return this[0]+=s[0],this[1]+=s[1],this[2]+=s[2],this}minus(s){return this[0]-=s[0],this[1]-=s[1],this[2]-=s[2],this}mul(s){return this[0]*=s[0],this[1]*=s[1],this[2]*=s[2],this}div(s){return this[0]/=s[0],this[1]/=s[1],this[2]/=s[2],this}dot(s){return this[0]*s[0]+this[1]*s[1]+this[2]*s[2]}normalize(){let s=this.magnitude;return s==0?C.zero():this.clone().div(C(s,s,s))}inverse(){return this[0]=1/this[0],this[1]=1/this[1],this[2]=1/this[2],this}negate(){return this[0]=-this[0],this[1]=-this[1],this[2]=-this[2],this}cross(s){return C(this.y*s.z-this.z*s.y,this.z*s.x-this.x*s.z,this.x*s.y-this.y*s.x)}clone(){return C(this[0],this[1],this[2])}toVec2(){return u.vec2(this[0],this[1])}equals(s){return s===void 0?!1:s[0]===this[0]&&s[1]===this[1]&&s[2]===this[2]}__to(s){switch(s){case o.Vector4:return o.vec4(this[0],this[1],this[2],0);case u.Vector2:return u.vec2(this[0],this[1])}return this.clone()}};r.Vector3=w;function C(s,l=s,p=s){return new w(s,l,p)}r.vec3=C,C.from=s=>{let[l=0,p=0,E=0]=s;return C(l,p,E)},C.floor=s=>C(Math.floor(s.x),Math.floor(s.y),Math.floor(s.z)),C.zero=w.zero,C.one=w.one}),zt=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.vec4=r.Vector4=void 0;var o=Vt(),u=Lt(),I=Array,w=class extends I{get x(){return this[0]}set x(s){this[0]=s}get y(){return this[1]}set y(s){this[1]=s}get z(){return this[2]}set z(s){this[2]=s}get w(){return this[3]}set w(s){this[3]=s}get magnitude(){return Math.hypot(...this)}get normalized(){let s=this.magnitude;return s==0?C.zero():this.clone().div(C(s,s,s,s))}get negative(){return this.clone().negate()}get inversed(){return this.clone().inverse()}constructor(s,l,p=0,E=0){super(s,l,p||0,E||0)}static zero(){return new w(0,0,0,0)}static one(){return new w(1,1,1,1)}plus(s){return this[0]+=s[0],this[1]+=s[1],this[2]+=s[2],this[3]+=s[3],this}minus(s){return this[0]-=s[0],this[1]-=s[1],this[2]-=s[2],this[3]-=s[3],this}mul(s){return this[0]*=s[0],this[1]*=s[1],this[2]*=s[2],this[3]*=s[3],this}div(s){return this[0]/=s[0],this[1]/=s[1],this[2]/=s[2],this[3]/=s[3],this}dot(s){return this[0]*s[0]+this[1]*s[1]+this[2]*s[2]+this[3]*s[3]}normalize(){let s=this.magnitude;return s==0?C.zero():this.clone().div(C(s,s,s,s))}inverse(){return this[0]=1/this[0],this[1]=1/this[1],this[2]=1/this[2],this[3]=1/this[3],this}negate(){return this[0]=-this[0],this[1]=-this[1],this[2]=-this[2],this[3]=-this[3],this}clone(){return C(this[0],this[1],this[2],this[3])}equals(s){return s===void 0?!1:s[0]===this[0]&&s[1]===this[1]&&s[2]===this[2]&&s[3]===this[3]}__to(s){switch(s){case w:return this.clone();case o.Vector3:return o.vec3(this[0],this[1],this[2]);case u.Vector2:return u.vec2(this[0],this[1])}return this.clone()}};r.Vector4=w;function C(s,l=s,p=s,E=s){return new w(s,l,p,E)}r.vec4=C,C.from=s=>{let[l=0,p=0,E=0,v=0]=s;return C(l,p,E,v)},C.floor=s=>C(Math.floor(s.x),Math.floor(s.y),Math.floor(s.z),Math.floor(s.w)),C.zero=w.zero,C.one=w.one}),Lt=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.vec2=r.Vector2=void 0;var o=zt(),u=Vt(),I=Array,w=class extends I{get x(){return this[0]}set x(s){this[0]=s}get y(){return this[1]}set y(s){this[1]=s}get magnitude(){return Math.hypot(...this)}get normalized(){let s=this.magnitude;return s==0?C.zero():this.clone().div(C(s,s))}get negative(){return this.clone().negate()}get inversed(){return this.clone().inverse()}constructor(s,l){super(s,l)}static zero(){return new w(0,0)}static one(){return new w(1,1)}static up(){return new w(0,1)}static down(){return new w(0,-1)}static left(){return new w(-1,0)}static right(){return new w(1,0)}static distance(s,l){return Math.sqrt((s.x-l.x)*(s.x-l.x)+(s.y-l.y)*(s.y-l.y))}static distanceSquared(s,l){return(s.x-l.x)*(s.x-l.x)+(s.y-l.y)*(s.y-l.y)}plus(s){return this[0]+=s[0],this[1]+=s[1],this}minus(s){return this[0]-=s[0],this[1]-=s[1],this}mul(s){return this[0]*=s[0],this[1]*=s[1],this}div(s){return this[0]/=s[0],this[1]/=s[1],this}dot(s){return this[0]*s[0]+this[1]*s[1]}normalize(){let s=this.magnitude;return s==0?C.zero():this.clone().div(C(s,s))}inverse(){return this[0]=1/this[0],this[1]=1/this[1],this}negate(){return this[0]=-this[0],this[1]=-this[1],this}cross(s){return this.x*s.y-this.y*s.x}clone(){return C(this[0],this[1])}toVec3(s=0){return u.vec3(this[0],this[1],s)}__to(s){switch(s){case o.Vector4:return o.vec4(this[0],this[1],0,0);case u.Vector3:return u.vec3(this[0],this[1],0)}return this.clone()}equals(s){return s===void 0?!1:s[0]===this[0]&&s[1]===this[1]}};r.Vector2=w;function C(s,l=s){return new w(s,l)}r.vec2=C,C.from=s=>{let[l=0,p=0]=s;return C(l,p)},C.floor=s=>C(Math.floor(s.x),Math.floor(s.y)),C.zero=w.zero,C.one=w.one,C.left=w.left,C.right=w.right,C.down=w.down,C.up=w.up}),Qt=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.rgb=r.rgba=r.Color=void 0;var o=zt(),u=class extends o.Vector4{get r(){return this[0]}set r(C){this[0]=C}get g(){return this[1]}set g(C){this[1]=C}get b(){return this[2]}set b(C){this[2]=C}get a(){return this[3]}set a(C){this[3]=C}constructor(C,s,l,p=1){super(C,s,l,p)}static get white(){return new u(1,1,1)}static get transparent(){return new u(1,1,1,0)}static get black(){return new u(0,0,0)}static get red(){return new u(1,0,0)}static get green(){return new u(0,1,0)}static get blue(){return new u(0,0,1)}static get cyan(){return new u(0,1,1)}static get yellow(){return new u(1,1,0)}static get magenta(){return new u(1,0,1)}static get gray(){return new u(.5,.5,.5)}transparent(){return new u(this.r,this.g,this.b,0)}};r.Color=u;var I=(C,s,l,p=1)=>new u(C,s,l,p);r.rgba=I;var w=(C,s,l)=>new u(C,s,l,1);r.rgb=w}),Ht=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Rad2Deg=r.Deg2Rad=r.distance=r.cross=r.dot=r.div=r.mul=r.minus=r.plus=void 0;var o=Vt(),u=zt(),I=Lt();Number.prototype.__to=function(F){switch(F){case u.Vector4:return u.vec4(this.valueOf(),this.valueOf(),this.valueOf(),this.valueOf());case o.Vector3:return o.vec3(this.valueOf(),this.valueOf(),this.valueOf());case I.Vector2:return I.vec2(this.valueOf(),this.valueOf())}return this.valueOf()};function w(F,Y){return typeof F=="number"?[Y,F,!0]:typeof Y=="number"?[F,Y,!1]:Y.length>F.length?[Y,F,!0]:[F,Y,!1]}function C(F,Y){let[z,k]=w(F,Y);return k.__to(z.constructor).plus(z)}r.plus=C;function s(F,Y){let[z,k,j]=w(F,Y);return j?k.__to(z.constructor).minus(z):k.__to(z.constructor).minus(z).negate()}r.minus=s;function l(F,Y){let[z,k]=w(F,Y);return k.__to(z.constructor).mul(z)}r.mul=l;function p(F,Y){let[z,k,j]=w(F,Y);return j?k.__to(z.constructor).div(z):k.__to(z.constructor).div(z).inversed}r.div=p;function E(F,Y){return F.dot(Y)}r.dot=E;function v(F,Y){return F.cross(Y)}r.cross=v;function D(F,Y){return s(Y,F).magnitude}r.distance=D,r.Deg2Rad=Math.PI/180,r.Rad2Deg=180/Math.PI}),Mr=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.mat4=r.Matrix4x4=void 0;var o=ar(),u=Vt(),I=zt();function w(l){return o.mat4.clone(l)}r.Matrix4x4=w,w.identity=()=>{let l=o.mat4.create();return o.mat4.identity(l)},w.rts=(l,p,E)=>{let v=r.mat4.identity();return o.mat4.fromRotationTranslationScale(v,l,p,E),v},w.translate=l=>{let p=r.mat4.identity();return o.mat4.translate(p,o.mat4.identity(p),l)},w.invert=l=>{let p=o.mat4.create();return o.mat4.invert(p,l),p},w.getTranslation=l=>{let p=u.vec3(0,0,0);return o.mat4.getTranslation(p,l),p},w.getRotation=l=>{let p=o.quat.create();return o.mat4.getRotation(p,l),p},w.getScaling=l=>{let p=u.vec3(0,0,0);return o.mat4.getScaling(p,l),p},w.mulPoint=(l,p)=>{let E=I.vec4(p.x,p.y,p.z,1),v=I.vec4.zero();return o.vec4.transformMat4(v,E,l),u.vec3(v.x,v.y,v.z)},w.mulVector=(l,p)=>{let E=I.vec4(p.x,p.y,p.z,0),v=I.vec4.zero();return o.vec4.transformMat4(v,E,l),u.vec3(v.x,v.y,v.z)},w.mulVec4=(l,p)=>{let E=I.vec4.zero();return o.vec4.transformMat4(E,p,l),E},w.perspective=(l,p,E,v)=>{let D=o.mat4.create();return o.mat4.perspective(D,l,p,E,v)},w.transpose=l=>o.mat4.transpose(o.mat4.create(),l);function C(l,p,E,v){let D=o.mat4.create();return o.mat4.ortho(D,-p*l,p*l,-l,l,E,v),D}function s(...l){if(l.length===4)return C(...l);let p=o.mat4.create();return o.mat4.ortho(p,...l),p}w.ortho=s,w.rotate=(l,p,E)=>o.mat4.rotate(o.mat4.create(),l,E,p),w.scale=(l,p)=>o.mat4.scale(o.mat4.create(),l,p),w.fromRotation=(l,p)=>o.mat4.fromRotation(o.mat4.create(),p,l),w.fromScaling=l=>o.mat4.fromScaling(o.mat4.create(),l),w.equal=(l,p)=>l===void 0||p===void 0||!(l instanceof Array||l instanceof Float32Array)||!(p instanceof Array||p instanceof Float32Array)?!1:o.mat4.exactEquals(l,p),w.mul=(l,p,E)=>(E||(E=p,p=l,l=o.mat4.create()),o.mat4.mul(l,p,E)),r.mat4=w}),re=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.quat=r.Quaternion=void 0;var o=ar(),u=Vt(),I=Ht();function w(){return o.quat.create()}r.Quaternion=w,w.identity=()=>{let C=o.quat.create();return o.quat.identity(C),C},w.axis=(C,s)=>o.quat.setAxisAngle(o.quat.create(),C,s),w.mul=(C,s)=>{let l=o.quat.create();return o.quat.mul(l,C,s)},w.invert=C=>{let s=o.quat.create();return o.quat.invert(s,C)},w.normalize=C=>o.quat.normalize(o.quat.create(),C),w.euler=C=>u.vec3(Math.atan2(2*(C[3]*C[0]+C[1]*C[2]),1-2*(C[0]**2+C[1]**2))*I.Rad2Deg,Math.asin(2*(C[3]*C[1]-C[2]*C[0]))*I.Rad2Deg,Math.atan2(2*(C[3]*C[2]+C[0]*C[1]),1-2*(C[1]**2,C[2]**2))*I.Rad2Deg),w.fromEuler=C=>o.quat.fromEuler(o.quat.create(),C[0],C[1],C[2]),w.rotate=(C,s)=>o.vec3.transformQuat(u.vec3(0,0,0),s,C),w.equals=(C,s)=>o.quat.exactEquals(C,s),r.quat=w,r.quat.identity=w.identity}),ee=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ray=void 0;function o(u,I){return{origin:u,direction:I.normalized}}r.ray=o}),sr=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Rect=void 0;var o=Ht(),u=Lt(),I=class{constructor(w,C){this.min=w,this.max=o.plus(w,C)}get xMin(){return this.min.x}get yMin(){return this.min.y}get xMax(){return this.max.x}get yMax(){return this.max.y}get size(){return o.minus(this.max,this.min)}get center(){return o.plus(this.min,this.max).mul(u.vec2(.5))}shrink(w){let C=o.plus(this.min,u.vec2(w)),s=o.minus(this.max,u.vec2(w));return C.x>s.x&&(C.x=s.x=(C.x+s.x)/2),C.y>s.y&&(C.y=s.y=(C.y+s.y)/2),new I(C,s.minus(C))}expand(w){return new I(o.minus(this.min,u.vec2(w)),o.plus(this.size,u.vec2(2*w)))}static box01(){return new I(u.vec2.zero(),u.vec2.one())}};r.Rect=I}),xr=It(r=>{var o=r&&r.__createBinding||(Object.create?function(w,C,s,l){l===void 0&&(l=s),Object.defineProperty(w,l,{enumerable:!0,get:function(){return C[s]}})}:function(w,C,s,l){l===void 0&&(l=s),w[l]=C[s]}),u=r&&r.__exportStar||function(w,C){for(var s in w)s!=="default"&&!Object.prototype.hasOwnProperty.call(C,s)&&o(C,w,s)};Object.defineProperty(r,"__esModule",{value:!0});var I=ar();I.glMatrix.setMatrixArrayType(Array),u(Lt(),r),u(Vt(),r),u(zt(),r),u(Qt(),r),u(Ht(),r),u(Mr(),r),u(re(),r),u(ee(),r),u(sr(),r)}),gr=It(()=>{var r;(function(o){(function(u){var I=typeof hr=="object"?hr:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),w=C(o);typeof I.Reflect=="undefined"?I.Reflect=o:w=C(I.Reflect,w),u(w);function C(s,l){return function(p,E){typeof s[p]!="function"&&Object.defineProperty(s,p,{configurable:!0,writable:!0,value:E}),l&&l(p,E)}}})(function(u){var I=Object.prototype.hasOwnProperty,w=typeof Symbol=="function",C=w&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",s=w&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",l=typeof Object.create=="function",p={__proto__:[]}instanceof Array,E=!l&&!p,v={create:l?function(){return L(Object.create(null))}:p?function(){return L({__proto__:null})}:function(){return L({})},has:E?function(m,R){return I.call(m,R)}:function(m,R){return R in m},get:E?function(m,R){return I.call(m,R)?m[R]:void 0}:function(m,R){return m[R]}},D=Object.getPrototypeOf(Function),F=typeof process=="object"&&process.env&&{}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",Y=!F&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:b(),z=!F&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:P(),k=!F&&typeof WeakMap=="function"?WeakMap:S(),j=new k;function U(m,R,B,O){if(M(B)){if(!i(m))throw new TypeError;if(!x(R))throw new TypeError;return xt(m,R)}else{if(!i(m))throw new TypeError;if(!Z(R))throw new TypeError;if(!Z(O)&&!M(O)&&!V(O))throw new TypeError;return V(O)&&(O=void 0),B=A(B),et(m,R,B,O)}}u("decorate",U);function J(m,R){function B(O,N){if(!Z(O))throw new TypeError;if(!M(N)&&!a(N))throw new TypeError;$(m,R,O,N)}return B}u("metadata",J);function At(m,R,B,O){if(!Z(B))throw new TypeError;return M(O)||(O=A(O)),$(m,R,B,O)}u("defineMetadata",At);function ht(m,R,B){if(!Z(R))throw new TypeError;return M(B)||(B=A(B)),T(m,R,B)}u("hasMetadata",ht);function lt(m,R,B){if(!Z(R))throw new TypeError;return M(B)||(B=A(B)),y(m,R,B)}u("hasOwnMetadata",lt);function ct(m,R,B){if(!Z(R))throw new TypeError;return M(B)||(B=A(B)),G(m,R,B)}u("getMetadata",ct);function dt(m,R,B){if(!Z(R))throw new TypeError;return M(B)||(B=A(B)),K(m,R,B)}u("getOwnMetadata",dt);function vt(m,R){if(!Z(m))throw new TypeError;return M(R)||(R=A(R)),rt(m,R)}u("getMetadataKeys",vt);function yt(m,R){if(!Z(m))throw new TypeError;return M(R)||(R=A(R)),nt(m,R)}u("getOwnMetadataKeys",yt);function Mt(m,R,B){if(!Z(R))throw new TypeError;M(B)||(B=A(B));var O=mt(R,B,!1);if(M(O)||!O.delete(m))return!1;if(O.size>0)return!0;var N=j.get(R);return N.delete(B),N.size>0||j.delete(R),!0}u("deleteMetadata",Mt);function xt(m,R){for(var B=m.length-1;B>=0;--B){var O=m[B],N=O(R);if(!M(N)&&!V(N)){if(!x(N))throw new TypeError;R=N}}return R}function et(m,R,B,O){for(var N=m.length-1;N>=0;--N){var X=m[N],Q=X(R,B,O);if(!M(Q)&&!V(Q)){if(!Z(Q))throw new TypeError;O=Q}}return O}function mt(m,R,B){var O=j.get(m);if(M(O)){if(!B)return;O=new Y,j.set(m,O)}var N=O.get(R);if(M(N)){if(!B)return;N=new Y,O.set(R,N)}return N}function T(m,R,B){var O=y(m,R,B);if(O)return!0;var N=d(R);return V(N)?!1:T(m,N,B)}function y(m,R,B){var O=mt(R,B,!1);return M(O)?!1:st(O.has(m))}function G(m,R,B){var O=y(m,R,B);if(O)return K(m,R,B);var N=d(R);if(!V(N))return G(m,N,B)}function K(m,R,B){var O=mt(R,B,!1);if(!M(O))return O.get(m)}function $(m,R,B,O){var N=mt(B,O,!0);N.set(m,R)}function rt(m,R){var B=nt(m,R),O=d(m);if(O===null)return B;var N=rt(O,R);if(N.length<=0)return B;if(B.length<=0)return N;for(var X=new z,Q=[],_=0,q=B;_<q.length;_++){var gt=q[_],tt=X.has(gt);tt||(X.add(gt),Q.push(gt))}for(var ot=0,ut=N;ot<ut.length;ot++){var gt=ut[ot],tt=X.has(gt);tt||(X.add(gt),Q.push(gt))}return Q}function nt(m,R){var B=[],O=mt(m,R,!1);if(M(O))return B;for(var N=O.keys(),X=t(N),Q=0;;){var _=g(X);if(!_)return B.length=Q,B;var q=e(_);try{B[Q]=q}catch(gt){try{n(X)}finally{throw gt}}Q++}}function h(m){if(m===null)return 1;switch(typeof m){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return m===null?1:6;default:return 6}}function M(m){return m===void 0}function V(m){return m===null}function H(m){return typeof m=="symbol"}function Z(m){return typeof m=="object"?m!==null:typeof m=="function"}function it(m,R){switch(h(m)){case 0:return m;case 1:return m;case 2:return m;case 3:return m;case 4:return m;case 5:return m}var B=R===3?"string":R===5?"number":"default",O=f(m,C);if(O!==void 0){var N=O.call(m,B);if(Z(N))throw new TypeError;return N}return at(m,B==="default"?"number":B)}function at(m,R){if(R==="string"){var B=m.toString;if(c(B)){var O=B.call(m);if(!Z(O))return O}var N=m.valueOf;if(c(N)){var O=N.call(m);if(!Z(O))return O}}else{var N=m.valueOf;if(c(N)){var O=N.call(m);if(!Z(O))return O}var X=m.toString;if(c(X)){var O=X.call(m);if(!Z(O))return O}}throw new TypeError}function st(m){return!!m}function Ct(m){return""+m}function A(m){var R=it(m,3);return H(R)?R:Ct(R)}function i(m){return Array.isArray?Array.isArray(m):m instanceof Object?m instanceof Array:Object.prototype.toString.call(m)==="[object Array]"}function c(m){return typeof m=="function"}function x(m){return typeof m=="function"}function a(m){switch(h(m)){case 3:return!0;case 4:return!0;default:return!1}}function f(m,R){var B=m[R];if(B!=null){if(!c(B))throw new TypeError;return B}}function t(m){var R=f(m,s);if(!c(R))throw new TypeError;var B=R.call(m);if(!Z(B))throw new TypeError;return B}function e(m){return m.value}function g(m){var R=m.next();return R.done?!1:R}function n(m){var R=m.return;R&&R.call(m)}function d(m){var R=Object.getPrototypeOf(m);if(typeof m!="function"||m===D||R!==D)return R;var B=m.prototype,O=B&&Object.getPrototypeOf(B);if(O==null||O===Object.prototype)return R;var N=O.constructor;return typeof N!="function"||N===m?R:N}function b(){var m={},R=[],B=function(){function Q(_,q,gt){this._index=0,this._keys=_,this._values=q,this._selector=gt}return Q.prototype["@@iterator"]=function(){return this},Q.prototype[s]=function(){return this},Q.prototype.next=function(){var _=this._index;if(_>=0&&_<this._keys.length){var q=this._selector(this._keys[_],this._values[_]);return _+1>=this._keys.length?(this._index=-1,this._keys=R,this._values=R):this._index++,{value:q,done:!1}}return{value:void 0,done:!0}},Q.prototype.throw=function(_){throw this._index>=0&&(this._index=-1,this._keys=R,this._values=R),_},Q.prototype.return=function(_){return this._index>=0&&(this._index=-1,this._keys=R,this._values=R),{value:_,done:!0}},Q}();return function(){function Q(){this._keys=[],this._values=[],this._cacheKey=m,this._cacheIndex=-2}return Object.defineProperty(Q.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Q.prototype.has=function(_){return this._find(_,!1)>=0},Q.prototype.get=function(_){var q=this._find(_,!1);return q>=0?this._values[q]:void 0},Q.prototype.set=function(_,q){var gt=this._find(_,!0);return this._values[gt]=q,this},Q.prototype.delete=function(_){var q=this._find(_,!1);if(q>=0){for(var gt=this._keys.length,tt=q+1;tt<gt;tt++)this._keys[tt-1]=this._keys[tt],this._values[tt-1]=this._values[tt];return this._keys.length--,this._values.length--,_===this._cacheKey&&(this._cacheKey=m,this._cacheIndex=-2),!0}return!1},Q.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=m,this._cacheIndex=-2},Q.prototype.keys=function(){return new B(this._keys,this._values,O)},Q.prototype.values=function(){return new B(this._keys,this._values,N)},Q.prototype.entries=function(){return new B(this._keys,this._values,X)},Q.prototype["@@iterator"]=function(){return this.entries()},Q.prototype[s]=function(){return this.entries()},Q.prototype._find=function(_,q){return this._cacheKey!==_&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=_)),this._cacheIndex<0&&q&&(this._cacheIndex=this._keys.length,this._keys.push(_),this._values.push(void 0)),this._cacheIndex},Q}();function O(Q,_){return Q}function N(Q,_){return _}function X(Q,_){return[Q,_]}}function P(){return function(){function m(){this._map=new Y}return Object.defineProperty(m.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),m.prototype.has=function(R){return this._map.has(R)},m.prototype.add=function(R){return this._map.set(R,R),this},m.prototype.delete=function(R){return this._map.delete(R)},m.prototype.clear=function(){this._map.clear()},m.prototype.keys=function(){return this._map.keys()},m.prototype.values=function(){return this._map.values()},m.prototype.entries=function(){return this._map.entries()},m.prototype["@@iterator"]=function(){return this.keys()},m.prototype[s]=function(){return this.keys()},m}()}function S(){var m=16,R=v.create(),B=O();return function(){function q(){this._key=O()}return q.prototype.has=function(gt){var tt=N(gt,!1);return tt!==void 0?v.has(tt,this._key):!1},q.prototype.get=function(gt){var tt=N(gt,!1);return tt!==void 0?v.get(tt,this._key):void 0},q.prototype.set=function(gt,tt){var ot=N(gt,!0);return ot[this._key]=tt,this},q.prototype.delete=function(gt){var tt=N(gt,!1);return tt!==void 0?delete tt[this._key]:!1},q.prototype.clear=function(){this._key=O()},q}();function O(){var q;do q="@@WeakMap@@"+_();while(v.has(R,q));return R[q]=!0,q}function N(q,gt){if(!I.call(q,B)){if(!gt)return;Object.defineProperty(q,B,{value:v.create()})}return q[B]}function X(q,gt){for(var tt=0;tt<gt;++tt)q[tt]=Math.random()*255|0;return q}function Q(q){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(q)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(q)):X(new Uint8Array(q),q):X(new Array(q),q)}function _(){var q=Q(m);q[6]=q[6]&79|64,q[8]=q[8]&191|128;for(var gt="",tt=0;tt<m;++tt){var ot=q[tt];(tt===4||tt===6||tt===8)&&(gt+="-"),ot<16&&(gt+="0"),gt+=ot.toString(16).toLowerCase()}return gt}}function L(m){return m.__=void 0,delete m.__,m}})})(r||(r={}))}),Ot=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.GL=r.GlobalContext=r.setGlobalContext=void 0;var o,u=C=>o=C;r.setGlobalContext=u;var I=()=>o;r.GlobalContext=I;var w=()=>{var C;return(C=r.GlobalContext())===null||C===void 0?void 0:C.gl};r.GL=w}),er=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.mapGLFormat=r.TextureFormat=void 0;var o;(function(I){I[I.RGB=1]="RGB",I[I.RGBA=2]="RGBA",I[I.LUMINANCE_ALPHA=3]="LUMINANCE_ALPHA",I[I.LUMINANCE=4]="LUMINANCE",I[I.ALPHA=5]="ALPHA",I[I.R8=6]="R8",I[I.R16F=7]="R16F",I[I.R32F=8]="R32F",I[I.R8UI=9]="R8UI",I[I.RG8=10]="RG8",I[I.RG16F=11]="RG16F",I[I.RG32F=12]="RG32F",I[I.RG8UI=13]="RG8UI",I[I.RGB8=14]="RGB8",I[I.SRGB8=15]="SRGB8",I[I.RGB565=16]="RGB565",I[I.R11F_G11F_B10F=17]="R11F_G11F_B10F",I[I.RGB9_E5=18]="RGB9_E5",I[I.RGB16F=19]="RGB16F",I[I.RGB32F=20]="RGB32F",I[I.RGB8UI=21]="RGB8UI",I[I.RGBA8=22]="RGBA8",I[I.SRGB8_ALPHA8=23]="SRGB8_ALPHA8",I[I.RGB5_A1=24]="RGB5_A1",I[I.RGB10_A2=25]="RGB10_A2",I[I.RGBA4=26]="RGBA4",I[I.RGBA16F=27]="RGBA16F",I[I.RGBA32F=28]="RGBA32F",I[I.RGBA8UI=29]="RGBA8UI",I[I.DEPTH_COMPONENT=30]="DEPTH_COMPONENT",I[I.DEPTH_STENCIL=31]="DEPTH_STENCIL"})(o=r.TextureFormat||(r.TextureFormat={}));function u(I,w){return{[o.RGB]:[I.RGB,I.RGB,I.UNSIGNED_BYTE],[o.RGBA]:[I.RGBA,I.RGBA,I.UNSIGNED_BYTE],[o.LUMINANCE_ALPHA]:[I.LUMINANCE_ALPHA,I.LUMINANCE_ALPHA,I.UNSIGNED_BYTE],[o.LUMINANCE]:[I.LUMINANCE,I.LUMINANCE,I.UNSIGNED_BYTE],[o.ALPHA]:[I.ALPHA,I.ALPHA,I.UNSIGNED_BYTE],[o.R8]:[I.R8,I.RED,I.UNSIGNED_BYTE],[o.R16F]:[I.R16F,I.RED,I.HALF_FLOAT],[o.R32F]:[I.R32F,I.RED,I.FLOAT],[o.R8UI]:[I.R8UI,I.RED_INTEGER,I.UNSIGNED_BYTE],[o.RG8]:[I.RG8,I.RG,I.UNSIGNED_BYTE],[o.RG16F]:[I.RG16F,I.RG,I.HALF_FLOAT],[o.RG32F]:[I.RG32F,I.RG,I.FLOAT],[o.RG8UI]:[I.RG8UI,I.RG_INTEGER,I.UNSIGNED_BYTE],[o.RGB8]:[I.RGB8,I.RGB,I.UNSIGNED_BYTE],[o.SRGB8]:[I.SRGB8,I.RGB,I.UNSIGNED_BYTE],[o.RGB565]:[I.RGB565,I.RGB,I.UNSIGNED_BYTE],[o.R11F_G11F_B10F]:[I.R11F_G11F_B10F,I.RGB,I.UNSIGNED_INT_10F_11F_11F_REV],[o.RGB9_E5]:[I.RGB9_E5,I.RGB,I.HALF_FLOAT],[o.RGB16F]:[I.RGB16F,I.RGB,I.HALF_FLOAT],[o.RGB32F]:[I.RGB32F,I.RGB,I.FLOAT],[o.RGB8UI]:[I.RGB8UI,I.RGB_INTEGER,I.UNSIGNED_BYTE],[o.RGBA8]:[I.RGBA8,I.RGBA,I.UNSIGNED_BYTE],[o.SRGB8_ALPHA8]:[I.SRGB8_ALPHA8,I.RGBA,I.UNSIGNED_BYTE],[o.RGB5_A1]:[I.RGB5_A1,I.RGBA,I.UNSIGNED_BYTE],[o.RGB10_A2]:[I.RGB10_A2,I.RGBA,I.UNSIGNED_INT_2_10_10_10_REV],[o.RGBA4]:[I.RGBA4,I.RGBA,I.UNSIGNED_BYTE],[o.RGBA16F]:[I.RGBA16F,I.RGBA,I.HALF_FLOAT],[o.RGBA32F]:[I.RGBA32F,I.RGBA,I.FLOAT],[o.RGBA8UI]:[I.RGBA8UI,I.RGBA_INTEGER,I.UNSIGNED_BYTE],[o.DEPTH_COMPONENT]:[I.DEPTH_COMPONENT,I.DEPTH_COMPONENT,I.UNSIGNED_INT],[o.DEPTH_STENCIL]:[I.DEPTH_STENCIL,I.DEPTH_COMPONENT,I.UNSIGNED_INT]}[w]}r.mapGLFormat=u}),kt=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.setImmediate=r.DoubleBuffer=r.fillArray=r.getUniformsLocation=r.decorator=r.warn=r.panic=r.panicNull=void 0,gr();function o(E,v){if(E===null)throw new Error(v);return E}r.panicNull=o;function u(E){throw new Error(E)}r.panic=u;function I(E){return console.warn(E),null}r.warn=I;function w(E,v=void 0,D=F=>F){let F=Symbol(E);return[Y=>(Y===void 0&&(Y=v),Reflect.metadata(F,D(Y))),(Y,z)=>z===void 0?Reflect.getMetadata(F,Y):Reflect.getMetadata(F,Y,z)]}r.decorator=w;function C(E,v,D){let F={};for(let Y in D)F[Y]=E.getUniformLocation(v,D[Y]);return F}r.getUniformsLocation=C;function s(E,v){let D=new Array(v);for(let F=0;F<v;F++)D[F]=typeof E=="function"?E(F):E;return D}r.fillArray=s;var l=class{constructor(E){this.currentIdx=0,this.buffers=[E(),E()]}get current(){return this.buffers[this.currentIdx%2]}set current(E){this.buffers[this.currentIdx%2]=E}get back(){return this.buffers[(this.currentIdx+1)%2]}set back(E){this.buffers[(this.currentIdx+1)%2]=E}update(){this.currentIdx++}};r.DoubleBuffer=l;function p(E){setTimeout(E,0)}r.setImmediate=p}),wr=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.EventEmitter=void 0;var o=class{constructor(){this.listeners=new Map}on(u,I){var w;this.listeners.has(u)||this.listeners.set(u,[]),(w=this.listeners.get(u))===null||w===void 0||w.push(I)}off(u,I){var w,C;this.listeners.has(u)&&this.listeners.set(u,(C=(w=this.listeners.get(u))===null||w===void 0?void 0:w.filter(s=>s!==I))!==null&&C!==void 0?C:[])}emit(u,...I){var w;(w=this.listeners.get(u))===null||w===void 0||w.forEach(C=>C(...I))}};r.EventEmitter=o}),Yt=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AssetManager=r.LazyInitAsset=r.Asset=void 0;var o=kt(),u=wr(),I=Ot(),w=class{constructor(l){this.destroyed=!1,this.assetID=r.AssetManager.newAssetID(this),this.name=l||`Asset_${this.assetID}`}destroy(){this.destroyed=!0,r.AssetManager.destroy(this.assetID)}};r.Asset=w;var C=class extends w{constructor(l=I.GlobalContext()){super(),this.initialzed=!1,this.ctx=l}tryInit(l=!1){if(this.initialzed)return!0;let p=this.ctx||I.GlobalContext();if(!p){if(l)throw new Error("Failed to initialize GPU resource withou a global GL context.");return!1}if(this.ctx=p,this.init())return this.initialzed=!0,!0;if(l)throw new Error("Failed to initialize required GPU resource.");return!1}};r.LazyInitAsset=C;var s=class{constructor(){this.assetsMap=new Map,this.id=1,this.eventEmitter=new u.EventEmitter}newAssetID(l){let p=++this.id;return this.assetsMap.set(p,l),o.setImmediate(()=>this.eventEmitter.emit("asset-created",l)),l.assetID=p}find(l){if(typeof l=="number")return this.assetsMap.get(l);if(typeof l=="string"){for(let p of this.assetsMap.values())if(p.name===l)return p}}destroy(l){let p=this.assetsMap.get(l);!p||(this.assetsMap.delete(l),o.setImmediate(()=>this.eventEmitter.emit("asset-destroyed",p)))}findAssetsOfType(l){return Array.from(this.assetsMap.values()).filter(p=>p instanceof l)}on(l,p){return this.eventEmitter.on(l,p)}off(l,p){return this.eventEmitter.off(l,p)}};r.AssetManager=new s}),Rr=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Shader=r.DefaultShaderAttributeNames=r.Culling=r.Blending=r.DepthTest=void 0;var o=kt(),u=Ot(),I=Xt(),w=kt(),C=Yt(),s;(function(v){v[v.Disable=-1]="Disable",v[v.Always=WebGL2RenderingContext.ALWAYS]="Always",v[v.Never=WebGL2RenderingContext.NEVER]="Never",v[v.Less=WebGL2RenderingContext.LESS]="Less",v[v.Equal=WebGL2RenderingContext.EQUAL]="Equal",v[v.LEqual=WebGL2RenderingContext.LEQUAL]="LEqual",v[v.Greater=WebGL2RenderingContext.GREATER]="Greater",v[v.NotEqual=WebGL2RenderingContext.NOTEQUAL]="NotEqual",v[v.GEqual=WebGL2RenderingContext.GEQUAL]="GEqual"})(s=r.DepthTest||(r.DepthTest={}));var l;(function(v){v[v.Disable=-1]="Disable",v[v.Zero=WebGL2RenderingContext.ZERO]="Zero",v[v.One=WebGL2RenderingContext.ONE]="One",v[v.SrcColor=WebGL2RenderingContext.SRC_COLOR]="SrcColor",v[v.OneMinusSrcColor=WebGL2RenderingContext.ONE_MINUS_SRC_COLOR]="OneMinusSrcColor",v[v.DstColor=WebGL2RenderingContext.DST_COLOR]="DstColor",v[v.OneMinusDstColor=WebGL2RenderingContext.ONE_MINUS_DST_COLOR]="OneMinusDstColor",v[v.SrcAlpha=WebGL2RenderingContext.SRC_ALPHA]="SrcAlpha",v[v.OneMinusSrcAlpha=WebGL2RenderingContext.ONE_MINUS_SRC_ALPHA]="OneMinusSrcAlpha",v[v.DstAlpha=WebGL2RenderingContext.DST_ALPHA]="DstAlpha",v[v.OneMinusDstAlpha=WebGL2RenderingContext.ONE_MINUS_DST_ALPHA]="OneMinusDstAlpha"})(l=r.Blending||(r.Blending={}));var p;(function(v){v[v.Disable=-1]="Disable",v[v.Back=WebGL2RenderingContext.BACK]="Back",v[v.Front=WebGL2RenderingContext.FRONT]="Front",v[v.Both=WebGL2RenderingContext.FRONT_AND_BACK]="Both"})(p=r.Culling||(r.Culling={})),r.DefaultShaderAttributeNames={vert:"aPos",color:"aColor",uv:"aUV",uv2:"aUV2",normal:"aNormal"};var E=class extends C.Asset{constructor(v,D,F={},Y=u.GL()){super(F.name),this.attributes=null,this.initialized=!1,this.gl=null,this.program=null,this.vertexShader=null,this.fragmentShader=null,this.pipelineStates=null,this.builtinUniformLocations=null,this._compiled=!1,F.name||(this.name=`Shader_${this.assetID}`),this.vertexShaderSource=v,this.fragmentShaderSouce=D,this.options=F,this.gl=Y,this.tryInit()}get compiled(){return this._compiled}uniformLocation(v){return this.tryInit(!0),this.gl.getUniformLocation(this.program,v)}use(){this.tryInit(!0),this.gl.useProgram(this.program)}setupPipelineStates(){let v=this.gl;if(this.pipelineStates.depth===s.Disable?v.disable(v.DEPTH_TEST):(v.enable(v.DEPTH_TEST),v.depthMask(this.pipelineStates.zWrite),v.depthFunc(this.pipelineStates.depth)),!this.pipelineStates.blend)v.disable(v.BLEND);else{let[D,F]=this.pipelineStates.blendRGB,[Y,z]=this.pipelineStates.blendAlpha;v.enable(v.BLEND),v.blendFuncSeparate(D,F,Y,z)}this.pipelineStates.cull===p.Disable?v.disable(v.CULL_FACE):(v.enable(v.CULL_FACE),v.cullFace(this.pipelineStates.cull),v.frontFace(v.CCW))}setupBuiltinUniform(v){this.tryInit(!0);let D=this.gl;this.builtinUniformLocations.matM&&D.uniformMatrix4fv(this.builtinUniformLocations.matM,!1,v.matM),this.builtinUniformLocations.matVP&&D.uniformMatrix4fv(this.builtinUniformLocations.matVP,!1,v.matVP),this.builtinUniformLocations.matMVP&&D.uniformMatrix4fv(this.builtinUniformLocations.matMVP,!1,v.matMVP),this.builtinUniformLocations.matM_IT&&D.uniformMatrix4fv(this.builtinUniformLocations.matM_IT,!1,v.matM_IT),this.builtinUniformLocations.matMV_IT&&D.uniformMatrix4fv(this.builtinUniformLocations.matMV_IT,!1,v.matMV_IT)}setPipelineStates(v){this.options=Object.assign(Object.assign({},this.options),v),this.initialized&&this.setPipelineStateInternal(v)}setPipelineStateInternal(v){let D=!1,F=[l.One,l.Zero],Y=[l.One,l.OneMinusSrcAlpha];typeof v.blend=="number"&&v.blend!==l.Disable?(D=!0,F=[v.blend,v.blend],Y=[v.blend,v.blend]):v.blend instanceof Array&&(D=!0,F=v.blend),v.blendRGB&&(D=v.blend!==!1&&v.blend!==l.Disable,F=v.blendRGB),v.blendAlpha&&(D=v.blend!==!1&&v.blend!==l.Disable,Y=v.blendAlpha),this.pipelineStates={depth:v.depth||s.Less,blend:D,blendRGB:F,blendAlpha:Y,zWrite:v.zWrite!==!1,cull:v.cull||p.Back}}_internal(){return this.tryInit(!0),{attributes:this.attributes,options:this.options}}tryInit(v=!1){if(this.initialized)return!0;let D=this.gl||u.GL();if(!D)return v?o.panic("Failed to init shader without a global GL context"):!1;this.gl=D,this.program=o.panicNull(D.createProgram(),"Failed to create shader program"),this.vertexShader=o.panicNull(D.createShader(D.VERTEX_SHADER),"Failed to create vertex shader"),this.fragmentShader=o.panicNull(D.createShader(D.FRAGMENT_SHADER),"Failed to create fragment shader"),this.compile(),D.useProgram(this.program);let F=Object.assign(Object.assign({},r.DefaultShaderAttributeNames),this.options.attributes);this.attributes={};for(let Y in F)this.attributes[Y]=D.getAttribLocation(this.program,F[Y]);return this.setPipelineStateInternal(this.options),this.builtinUniformLocations=w.getUniformsLocation(D,this.program,I.BuiltinUniformNames),this.initialized=!0,!0}compile(){if(this.gl.shaderSource(this.vertexShader,this.vertexShaderSource),this.gl.compileShader(this.vertexShader),!this.gl.getShaderParameter(this.vertexShader,this.gl.COMPILE_STATUS))throw new Error(`Failed to compile vertex shader:\r
`+this.gl.getShaderInfoLog(this.vertexShader));if(this.gl.shaderSource(this.fragmentShader,this.fragmentShaderSouce),this.gl.compileShader(this.fragmentShader),!this.gl.getShaderParameter(this.fragmentShader,this.gl.COMPILE_STATUS))throw new Error(`Failed to compile fragment shader:\r
`+this.gl.getShaderInfoLog(this.fragmentShader));if(this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))throw new Error(`Failed to link shader program:\r
`+this.gl.getProgramInfoLog(this.program))}};r.Shader=E}),Xt=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.compileBuiltinShaders=r.BuiltinUniformNames=r.BuiltinShaderSources=void 0;var o=Rr(),u=`#version 300 es
precision mediump float;

in vec3 aPos;
in vec4 aColor;
in vec2 aUV;
in vec3 aNormal;

uniform mat4 uTransformM;
uniform mat4 uTransformVP;
uniform mat4 uTransformMVP;

out vec4 vColor;
out vec4 vPos;
out vec2 vUV;
out vec3 vNormal;

void main()
{
    gl_Position = uTransformMVP * vec4(aPos, 1);
    vColor = aColor;
    vUV = aUV;
    vNormal = aNormal;
}
`,I=`#version 300 es
precision mediump float;

in vec4 vColor;
in vec4 vPos;
in vec2 vUV;

uniform sampler2D uMainTex;
uniform vec4 uColor;

out vec4 fragColor;

void main()
{
    vec4 color = texture(uMainTex, vUV.xy).rgba;
    color = color * vColor * uColor;
    fragColor = color;
}
`,w=`#version 300 es
precision mediump float;

in vec4 vColor;
in vec4 vPos;
in vec2 vUV;
in vec3 vNormal;

uniform sampler2D uMainTex;

out vec4 fragColor;

void main()
{
    fragColor = texture(uMainTex, vUV).rgba;
}
`,C=`#version 300 es
precision mediump float;

in vec3 aPos;
in vec2 aUV;

out vec2 vUV;

void main()
{
    gl_Position = vec4(aPos, 1);
    vUV = vec2(aUV.x, vec2(1) - aUV.y);
}`,s=`#version 300 es
precision mediump float;

in vec3 aPos;
in vec4 aColor;

uniform mat4 uTransformM;
uniform mat4 uTransformVP;
uniform mat4 uTransformMVP;

out vec4 vColor;
out vec4 vPos;

void main()
{
    gl_Position = uTransformMVP * vec4(aPos, 1);
    vColor = aColor;
}
`,l=`#version 300 es
precision mediump float;

in vec4 vColor;
in vec4 vPos;

out vec4 fragColor;

void main()
{
    fragColor = vColor;
}
`,p=`#version 300 es
precision mediump float;

in vec4 vPos;
in vec2 vUV;

uniform sampler2D uMainTex;

out vec4 fragColor;

void main()
{
    fragColor = texture(uMainTex, vUV).rgba;
}
`;r.BuiltinShaderSources={DefaultVert:u,DefaultFrag:I,BlitCopyFrag:w,FlipTexVert:C},r.BuiltinUniformNames={matM:"uTransformM",matM_IT:"uTransformM_IT",matMInv:"uTransformMInv",matVP:"uTransformVP",matMVP:"uTransformMVP",matMV_IT:"uTransformMV_IT",flipUV:"uFlipUV",mainTex:"uMainTex",color:"uColor"};function E(v){return{DefaultShader:new o.Shader(r.BuiltinShaderSources.DefaultVert,r.BuiltinShaderSources.DefaultFrag,{name:"DefaultShader"},v),BlitCopy:new o.Shader(r.BuiltinShaderSources.DefaultVert,r.BuiltinShaderSources.BlitCopyFrag,{name:"BlitCopy",depth:o.DepthTest.Always,blend:o.Blending.Disable,zWrite:!1},v),FlipTexture:new o.Shader(r.BuiltinShaderSources.FlipTexVert,r.BuiltinShaderSources.BlitCopyFrag,{},v),ColoredLine:new o.Shader(s,l,{blend:[o.Blending.SrcAlpha,o.Blending.OneMinusSrcAlpha],depth:o.DepthTest.Disable,zWrite:!1},v),ErrorShader:new o.Shader(u,p,{name:"Error"},v)}}r.compileBuiltinShaders=E}),Pr=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.imageResize=r.ImageSizing=void 0;var o=sr(),u=Lt(),I;(function(C){C[C.Stretch=1]="Stretch",C[C.Cover=2]="Cover",C[C.Contain=3]="Contain",C[C.KeepLower=4]="KeepLower",C[C.KeepHigher=5]="KeepHigher",C[C.Center=6]="Center"})(I=r.ImageSizing||(r.ImageSizing={}));function w(C,s,l){let p=new o.Rect(u.vec2.zero(),C),E=new o.Rect(u.vec2.zero(),s);if(l===I.Contain){let v=C.x/C.y,D=s.x/s.y;if(v>D){let F=s.y-C.y*(s.x/C.x);E.min.y+=F/2,E.max.y-=F/2}else{let F=s.x-C.x*(s.y/C.y);E.min.x+=F/2,E.max.x-=F/2}}else if(l===I.Cover){let v=C.x/C.y,D=s.x/s.y;if(v>D){let F=C.x-s.x*(C.y/s.y);p.min.x+=F/2,p.max.x-=F/2}else{let F=C.y-s.y*(C.x/s.x);p.min.y+=F/2,p.max.y-=F/2}}else{if(C.x<s.x)switch(l){case I.Center:let v=s.x-C.x;E.min.x+=v/2,E.max.x-=v/2;break;case I.KeepHigher:E.min.x=s.x-C.x;break;case I.KeepLower:E.max.x=C.x;break}else if(C.x>s.x)switch(l){case I.Center:let v=C.x-s.x;p.min.x+=v/2,p.max.x-=v/2;break;case I.KeepHigher:p.min.x=C.x-s.x;break;case I.KeepLower:p.max.x=s.x;break}if(C.y<s.y)switch(l){case I.Center:let v=s.y-C.y;E.min.y+=v/2,E.max.y-=v/2;break;case I.KeepHigher:E.min.y=s.y-C.y;break;case I.KeepLower:E.max.y=C.y;break}else if(C.y>s.y)switch(l){case I.Center:let v=C.y-s.y;p.min.y+=v/2,p.max.y-=v/2;break;case I.KeepHigher:p.min.y=C.y-s.y;break;case I.KeepLower:p.max.y=s.y;break}}return[p,E]}r.imageResize=w}),ir=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderTexture=r.DepthTexture=r.Texture2D=r.TextureResizing=r.Texture=r.WrapMode=r.FilterMode=void 0;var o=Ot(),u=er(),I=kt(),w=Yt(),C=Xt(),s=Lt(),l=Pr(),p;(function(U){U[U.Linear=WebGL2RenderingContext.LINEAR]="Linear",U[U.Nearest=WebGL2RenderingContext.NEAREST]="Nearest"})(p=r.FilterMode||(r.FilterMode={}));var E;(function(U){U[U.Repeat=WebGL2RenderingContext.REPEAT]="Repeat",U[U.Clamp=WebGL2RenderingContext.CLAMP_TO_EDGE]="Clamp",U[U.Mirror=WebGL2RenderingContext.MIRRORED_REPEAT]="Mirror"})(E=r.WrapMode||(r.WrapMode={}));var v=class extends w.Asset{};r.Texture=v;var D;(function(U){U[U.Discard=0]="Discard",U[U.Stretch=1]="Stretch",U[U.Cover=2]="Cover",U[U.Contain=3]="Contain",U[U.KeepLower=4]="KeepLower",U[U.KeepHigher=5]="KeepHigher",U[U.Center=6]="Center"})(D=r.TextureResizing||(r.TextureResizing={}));var F=class extends w.Asset{constructor(U,J,At=u.TextureFormat.RGBA,ht=p.Linear,lt=o.GlobalContext()){super(),this.autoMipmap=!0,this.wrapMode=E.Repeat,this._glTex=null,this.initialized=!1,this.created=!1,this.name=`Texture_${this.assetID}`,this.ctx=lt,this.format=At,this.width=U,this.height=J,this.filterMode=ht,this.tryInit(!1)}get size(){return s.vec2(this.width,this.height)}glTex(){return this.create(),this._glTex}bind(U){this.create();let J=this.ctx.gl;J.activeTexture(J.TEXTURE0+U),J.bindTexture(J.TEXTURE_2D,this._glTex)}unbind(U){this.create();let J=this.ctx.gl;J.activeTexture(J.TEXTURE0+U),J.bindTexture(J.TEXTURE_2D,null)}destroy(){!this.initialized||this.destroyed||(this.ctx.gl.deleteTexture(this._glTex),super.destroy())}resize(U,J,At=D.Discard){this.tryInit(!0);let ht=this.ctx.gl,lt=F.wrapGlTex(this._glTex,this.width,this.height,this.format,this.filterMode,this.ctx),ct=new k(U,J,!1,this.format,this.filterMode,this.ctx);ct.wrapMode=this.wrapMode,ct.autoMipmap=this.autoMipmap,ct.create(),ct.updateParameters();let dt=this.size;switch(this.width=U,this.height=J,At){case D.Discard:break;default:let[vt,yt]=l.imageResize(dt,ct.size,At);this.ctx.renderer.blit(lt,ct,this.ctx.assets.materials.blitCopy,vt,yt);break}this.autoMipmap&&ct.generateMipmap(),this._glTex=ct._glTex,ht.deleteTexture(lt._glTex)}generateMipmap(){this.create();let U=this.ctx.gl;U.bindTexture(U.TEXTURE_2D,this._glTex),U.generateMipmap(U.TEXTURE_2D)}updateParameters(){this.create();let U=this.ctx.gl;U.bindTexture(U.TEXTURE_2D,this._glTex),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,this.filterMode),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,this.filterMode),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_S,this.wrapMode),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_T,this.wrapMode)}create(){if(this.created)return;this.tryInit(!0);let U=this.ctx.gl;U.bindTexture(U.TEXTURE_2D,this._glTex);let[J,At,ht]=u.mapGLFormat(U,this.format);U.texImage2D(U.TEXTURE_2D,0,J,this.width,this.height,0,At,ht,null),this.created=!0,this.updateParameters()}setData(U){this.create();let J=this.ctx.gl;J.bindTexture(J.TEXTURE_2D,this._glTex),j(this.ctx,this._glTex,U,this.width,this.height,this.format,this.filterMode,this.wrapMode,0)}tryInit(U=!1){var J;if(this.initialized)return!0;let At=this.ctx||o.GlobalContext();if(!At){if(U)throw new Error("Failed to initialize texture without a global GL context");return!1}let ht=At.gl;return this._glTex=(J=ht.createTexture())!==null&&J!==void 0?J:I.panic("Failed to create texture."),this.initialized=!0,!0}static wrapGlTex(U,J,At,ht=u.TextureFormat.RGBA,lt=p.Linear,ct=o.GlobalContext()){var dt=new F(J,At,ht,lt,ct);return dt._glTex=U,dt.initialized=!0,dt.created=!0,dt}},Y=class extends F{constructor(U=0,J=0,At=u.TextureFormat.RGBA,ht=p.Linear,lt=o.GlobalContext()){super(U,J,At,ht,lt)}setData(U){U.width!==void 0&&U.height!==void 0&&(U=U,this.width=U.width,this.height=U.height),super.setData(U)}clone(){this.created||this.create();let U=new k(this.width,this.height,!1,this.format,this.filterMode,this.ctx);this.ctx.renderer.blit(this,U);let J=new Y(this.width,this.height,this.format,this.filterMode,this.ctx);return J._glTex=U.glTex(),J.initialized=!0,J.created=!0,J}};r.Texture2D=Y;var z=class extends F{constructor(U,J,At=o.GlobalContext()){super(U,J,u.TextureFormat.DEPTH_COMPONENT,p.Nearest,At)}create(){super.create()}};r.DepthTexture=z;var k=class extends F{constructor(U,J,At=!1,ht=u.TextureFormat.RGBA,lt=p.Linear,ct=o.GlobalContext()){super(U,J,ht,lt,ct),this.depthTexture=null,At&&(this.depthTexture=new z(U,J,ct))}setData(U){super.setData(U)}destroy(){var U;!this.initialized||this.destroyed||((U=this.depthTexture)===null||U===void 0||U.destroy(),super.destroy())}};r.RenderTexture=k;function j(U,J,At,ht,lt,ct,dt,vt,yt){var Mt,xt;let et=U.gl;U.renderer;let mt=(Mt=et.createTexture())!==null&&Mt!==void 0?Mt:I.panic("Failed to create texture."),[T,y,G]=u.mapGLFormat(et,ct);et.bindTexture(et.TEXTURE_2D,mt),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_MIN_FILTER,et.NEAREST),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_MAG_FILTER,et.NEAREST),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_WRAP_S,vt),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_WRAP_T,vt),At.width!==void 0&&At.height!==void 0?(At=At,et.texImage2D(et.TEXTURE_2D,yt,T,y,G,At)):(At=At,et.texImage2D(et.TEXTURE_2D,yt,T,ht,lt,0,y,G,At));let K=(xt=et.createFramebuffer())!==null&&xt!==void 0?xt:I.panic("Failed to create frame buffer");et.bindFramebuffer(et.FRAMEBUFFER,K),et.framebufferTexture2D(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_2D,J,0),et.viewport(0,0,ht,lt),et.drawBuffers([et.COLOR_ATTACHMENT0]);let $=U.assets.shaders.FlipTexture;$.use(),et.activeTexture(et.TEXTURE0),et.bindTexture(et.TEXTURE_2D,mt),et.uniform1i($.uniformLocation(C.BuiltinUniformNames.mainTex),0);let rt=U.assets.meshes.screenQuad;rt.bind($),et.drawElements(et.TRIANGLE_STRIP,rt.triangles.length,et.UNSIGNED_INT,0),et.activeTexture(et.TEXTURE0),et.bindTexture(et.TEXTURE_2D,null),et.deleteFramebuffer(K),et.bindFramebuffer(et.FRAMEBUFFER,null),et.deleteTexture(mt)}}),or=It(r=>{var o=r&&r.__decorate||function(k,j,U,J){var At=arguments.length,ht=At<3?j:J===null?J=Object.getOwnPropertyDescriptor(j,U):J,lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ht=Reflect.decorate(k,j,U,J);else for(var ct=k.length-1;ct>=0;ct--)(lt=k[ct])&&(ht=(At<3?lt(ht):At>3?lt(j,U,ht):lt(j,U))||ht);return At>3&&ht&&Object.defineProperty(j,U,ht),ht};Object.defineProperty(r,"__esModule",{value:!0}),r.materialDefine=r.SimpleTexturedMaterial=r.MaterialFromShader=r.shaderProp=r.Material=void 0;var u=Qt();gr();var I=Ot();gr();var w=ir(),C=Yt(),s=Xt(),l;(function(k){k[k.Field=0]="Field",k[k.Dynamic=1]="Dynamic"})(l||(l={}));var p=class extends C.Asset{constructor(k,j=I.GL()){super(),this.properties={},this.textureCount=0,this.initialized=!1,this.name=`Material_${this.assetID}`,this.gl=j,this._shader=k}get shader(){return this._shader}upload(k){this.tryInit(!0);for(let j in this.properties){let U=this.properties[j],J=U.key?this[U.key]:U.value;J!==void 0&&this.uploadUniform(U,J)}}setProp(k,j,U){this.tryInit(!0);let J=this.getOrCreatePropInfo(k,j);if(j!==J.type){console.warn("Uniform type missmatch");return}J.key?this[J.key]=U:J.value=U}unbindRenderTextures(){this.tryInit(!0),this.gl;for(let k in this.properties){let j=this.properties[k];j.uploaded instanceof w.RenderTexture&&(j.uploaded.unbind(j.textureUnit),j.uploaded=null)}}tryInit(k=!1){if(this.initialized)return!0;let j=this.gl||I.GL();if(!j){if(k)throw new Error("Failed to intialize material without global GL context");return!1}this.gl=j;for(let U in this){let J=D(this,U);if(!J)continue;let At=this.getOrCreatePropInfo(J.name,J.type);At.key=U}return this.initialized=!0,!0}setUniformDirectly(k,j,U){if(U===void 0)throw new Error("");this.tryInit(!0);let J=this.getOrCreatePropInfo(k,j);!J.location||this.uploadUniform(J,U)}getOrCreatePropInfo(k,j){let U=this.properties[k];if(U)return U;switch(j){case"tex2d":U={type:j,uploaded:void 0,location:this.shader.uniformLocation(k),textureUnit:this.textureCount++};break;default:U={type:j,location:this.shader.uniformLocation(k),uploaded:void 0}}return this.properties[k]=U,U}uploadUniform(k,j){let U=this.gl,J=I.GlobalContext();if(!k.location||k.uploaded===null&&j===null&&k.type!=="tex2d")return!1;switch(k.type){case"float":U.uniform1f(k.location,j);break;case"vec2":U.uniform2fv(k.location,j);break;case"vec3":U.uniform3fv(k.location,j);break;case"vec4":U.uniform4fv(k.location,j);break;case"color":U.uniform4fv(k.location,j);break;case"mat4":U.uniformMatrix4fv(k.location,!1,j);break;case"tex2d":j=j||J.renderer.assets.textures.default,j.bind(k.textureUnit),k.uniformSet||(U.uniform1i(k.location,k.textureUnit),k.uniformSet=!0);break}k.uploaded=j}};r.Material=p;var E=Symbol("shaderProp");function v(k,j){return Reflect.metadata(E,{name:k,type:j})}r.shaderProp=v;function D(k,j){return Reflect.getMetadata(E,k,j)}function F(k){return class extends p{constructor(j=I.GL()){super(k,j)}}}r.MaterialFromShader=F;function Y(k){class j extends F(k){constructor(){super(...arguments),this.texture=null,this.color=new u.Color(1,1,1,1)}}return o([v(s.BuiltinUniformNames.mainTex,"tex2d")],j.prototype,"texture",void 0),o([v(s.BuiltinUniformNames.color,"color")],j.prototype,"color",void 0),j}r.SimpleTexturedMaterial=Y;function z(k){return class extends k{constructor(...j){super(...j)}}}r.materialDefine=z}),Er=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),or()}),Cr=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Mesh=void 0;var o=Vt(),u=Lt(),I=Qt(),w=Ot(),C=kt(),s=Ht(),l=Yt(),p=14,E=class extends l.Asset{constructor(v=w.GL()){super(),this._verts=[],this._triangles=[],this._uvs=[],this._uv2=[],this._colors=[],this._normals=[],this.dirty=!0,this.uploaded=!1,this.vertices=new Float32Array(0),this.indices=new Uint32Array(0),this.VBO=null,this.EBO=null,this.initialized=!1,this.name=`Mesh_${this.assetID}`,this.gl=v,this.tryInit(!1)}get verts(){return this._verts}set verts(v){this._verts=v,this.dirty=!0}get triangles(){return this._triangles}set triangles(v){this._triangles=v,this.dirty=!0}get uvs(){return this._uvs}set uvs(v){this._uvs=v,this.dirty=!0}get uv2(){return this._uv2}set uv2(v){this._uv2=v,this.dirty=!0}get colors(){return this._colors}set colors(v){this._colors=v,this.dirty=!0}get normals(){return this._normals}set normals(v){this._normals=v,this.dirty=!0}clear(){this.verts=[],this.uvs=[],this.triangles=[],this.colors=[],this.normals=[]}calculateNormals(v=0){if(this.triangles.length%3!=0)throw new Error("Invalid triangles.");this.normals=C.fillArray(()=>o.vec3(0,0,0),this.verts.length);for(let D=0;D<this.triangles.length;D+=3){let F=this.verts[this.triangles[D]],Y=this.verts[this.triangles[D+1]],z=this.verts[this.triangles[D+2]],k=s.minus(Y,F),j=s.minus(z,F),U=s.cross(k,j).normalize();this.normals[this.triangles[D+0]].plus(U),this.normals[this.triangles[D+1]].plus(U),this.normals[this.triangles[D+2]].plus(U)}for(let D=0;D<this.normals.length;D++)this.normals[D]=this.normals[D].normalize()}update(){if(this.dirty){if(this.triangles.length%3!=0)throw new Error("Invalid triangles.");if(this.colors.length!==this.verts.length&&(this.colors=[...this.colors,...C.fillArray(I.Color.white,this.verts.length-this.colors.length)]),this.uvs.length!==this.verts.length&&(this.uvs=[...this.uvs,...C.fillArray(u.vec2(0,0),this.verts.length-this.uvs.length)]),this.uv2.length!==this.verts.length&&(this.uv2=[...this.uv2,...C.fillArray(u.vec2(0,0),this.verts.length-this.uv2.length)]),this.normals.length!==this.verts.length&&(this.normals=[...this.normals,...C.fillArray(o.vec3(0,0,0),this.verts.length-this.normals.length)]),this.vertices=new Float32Array(this.verts.flatMap((v,D)=>[...v,...this.colors[D],...this.uvs[D],...this.uv2[D],...this.normals[D]])),this.vertices.length!=this.verts.length*p)throw new Error("Buffer with invalid length.");this.indices=new Uint32Array(this.triangles.flat()),this.dirty=!1,this.uploaded=!1}}setup(){this.update(),this.tryInit(!0);let v=this.gl;return this.uploaded||(v.bindBuffer(v.ARRAY_BUFFER,this.VBO),v.bufferData(v.ARRAY_BUFFER,this.vertices,v.STATIC_DRAW),v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,this.EBO),v.bufferData(v.ELEMENT_ARRAY_BUFFER,this.indices,v.STATIC_DRAW),this.uploaded=!0),[this.VBO,this.EBO]}bind(v){this.setup();let D=this.gl,F=v._internal().attributes,Y=p*4;D.bindBuffer(D.ARRAY_BUFFER,this.VBO),F.vert>=0&&(D.vertexAttribPointer(F.vert,3,D.FLOAT,!1,Y,0),D.enableVertexAttribArray(F.vert)),F.color>=0&&(D.vertexAttribPointer(F.color,4,D.FLOAT,!1,Y,3*4),D.enableVertexAttribArray(F.color)),F.uv>=0&&(D.vertexAttribPointer(F.uv,2,D.FLOAT,!1,Y,7*4),D.enableVertexAttribArray(F.uv)),F.uv2>=0&&(D.vertexAttribPointer(F.uv2,2,D.FLOAT,!1,Y,9*4),D.enableVertexAttribArray(F.uv2)),F.uv&&F.normal>=0&&(D.vertexAttribPointer(F.normal,3,D.FLOAT,!0,Y,11*4),D.enableVertexAttribArray(F.normal)),D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,this.EBO)}destroy(){!this.initialized||this.destroyed||(this.gl.deleteBuffer(this.VBO),this.gl.deleteBuffer(this.EBO),super.destroy())}tryInit(v=!1){var D,F;if(this.initialized)return!0;let Y=this.gl||w.GL();if(!Y){if(v)throw new Error("Failed to init mesh without global GL context");return!1}return this.gl=Y,this.VBO=(D=Y.createBuffer())!==null&&D!==void 0?D:C.panic("Failed to create vertex buffer."),this.EBO=(F=Y.createBuffer())!==null&&F!==void 0?F:C.panic("Failed to create element buffer."),this.initialized=!0,!0}};r.Mesh=E}),Br=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderTarget=void 0;var o=Ot(),u=kt(),I=Lt(),w={canvasOutput:{tex:null,attachPoint:WebGL2RenderingContext.BACK},fromRenderTexture:l=>({tex:l.glTex()})},C=class{get width(){return o.GlobalContext().width}get height(){return o.GlobalContext().height}get size(){return o.GlobalContext().renderer.canvasSize}bind(){let l=o.GlobalContext().gl;l.bindFramebuffer(l.FRAMEBUFFER,null),l.viewport(0,0,this.width,this.height)}release(){}},s=class{constructor(l=0,p=0,E=o.GlobalContext()){var v;this.colorAttachments=[],this.depthAttachment=w.canvasOutput,this.isCanvasTarget=!1,this.width=l,this.height=p,E?this.frameBuffer=(v=E.gl.createFramebuffer())!==null&&v!==void 0?v:u.panic("Failed to create frame buffer"):this.frameBuffer=null}get size(){return I.vec2(this.width,this.height)}addColorAttachment(l){if(l!==null){if(this.width==0&&this.height==0&&(this.width=l.width,this.height=l.height),this.width!=l.width||this.height!=l.height)throw new Error("Framebuffer attachments must in same resolution.");this.colorAttachments.push(w.fromRenderTexture(l))}}setDepthAttachment(l){var p;if(this.width==0&&this.height==0&&(this.width=l.width,this.height=l.height),this.width!=l.width||this.height!=l.height)throw new Error("Framebuffer attachments must in same resolution.");this.depthAttachment={tex:(p=l==null?void 0:l.glTex)!==null&&p!==void 0?p:null,attachPoint:WebGL2RenderingContext.DEPTH_ATTACHMENT}}bind(l=o.GlobalContext()){let p=l.gl;if(this.isCanvasTarget)p.bindFramebuffer(p.FRAMEBUFFER,null),p.viewport(0,0,l.width,l.height);else{p.bindFramebuffer(p.FRAMEBUFFER,this.frameBuffer);let E=0;for(let D=0;D<this.colorAttachments.length;D++)this.colorAttachments[D].tex&&(this.colorAttachments[D].attachPoint=p.COLOR_ATTACHMENT0+E++,p.framebufferTexture2D(p.FRAMEBUFFER,this.colorAttachments[D].attachPoint,p.TEXTURE_2D,this.colorAttachments[D].tex,0));p.framebufferTexture2D(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.TEXTURE_2D,this.depthAttachment.tex,0),p.viewport(0,0,this.width,this.height);let v=this.colorAttachments.map(D=>D.attachPoint);p.drawBuffers(v)}}release(l=o.GlobalContext()){this.isCanvasTarget||l.gl.deleteFramebuffer(this.frameBuffer)}};r.RenderTarget=s,s.CanvasTarget=Object.freeze(new C)}),ie=It(r=>{var o=r&&r.__decorate||function(l,p,E,v){var D=arguments.length,F=D<3?p:v===null?v=Object.getOwnPropertyDescriptor(p,E):v,Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(l,p,E,v);else for(var z=l.length-1;z>=0;z--)(Y=l[z])&&(F=(D<3?Y(F):D>3?Y(p,E,F):Y(p,E))||F);return D>3&&F&&Object.defineProperty(p,E,F),F};Object.defineProperty(r,"__esModule",{value:!0}),r.createBuiltinMaterialTypes=r.createBuiltinMaterial=void 0;var u=or(),I=Qt();Er();var w=Lt();function C(l,p,E,v){let D=new u.Material(E.ErrorShader,l);return D.setProp("uMainTex","tex2d",v.error),{error:D,default:new p.DefaultMaterial(l),blitCopy:new p.BlitCopy(l),ColoredLine:new u.Material(E.ColoredLine,l)}}r.createBuiltinMaterial=C;function s(l,p,E){let v=class extends u.MaterialFromShader(E.DefaultShader){constructor(){super(...arguments),this.color=I.Color.white,this.mainTexture=p.default}};o([u.shaderProp("uColor","color")],v.prototype,"color",void 0),o([u.shaderProp("uMainTex","tex2d")],v.prototype,"mainTexture",void 0),v=o([u.materialDefine],v);let D=class extends u.MaterialFromShader(E.BlitCopy){constructor(){super(...arguments),this.source=null,this.flip=w.vec2(0,0)}};o([u.shaderProp("uMainTex","tex2d")],D.prototype,"source",void 0),o([u.shaderProp("uFlip","vec2")],D.prototype,"flip",void 0),D=o([u.materialDefine],D);let F=class extends u.MaterialFromShader(E.DefaultShader){constructor(){super(...arguments),this.color=I.Color.white,this.mainTexture=p.default,this.normalTexture=p.defaultNormal,this.emission=I.Color.black,this.specular=I.Color.white,this.metiallic=.023,this.smoothness=.5,this.fresnel=5}};return o([u.shaderProp("uColor","color")],F.prototype,"color",void 0),o([u.shaderProp("uMainTex","tex2d")],F.prototype,"mainTexture",void 0),o([u.shaderProp("uNormalTex","tex2d")],F.prototype,"normalTexture",void 0),o([u.shaderProp("uEmission","color")],F.prototype,"emission",void 0),o([u.shaderProp("uSpecular","color")],F.prototype,"specular",void 0),o([u.shaderProp("uMetallic","float")],F.prototype,"metiallic",void 0),o([u.shaderProp("uSmoothness","float")],F.prototype,"smoothness",void 0),o([u.shaderProp("uFresnel","float")],F.prototype,"fresnel",void 0),F=o([u.materialDefine],F),{DefaultMaterial:v,BlitCopy:D,DefaultLit:F}}r.createBuiltinMaterialTypes=s}),ge=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDefaultTextures=void 0;var o=kt(),u=ir(),I=er();function w(C){var s;let l=64,p=document.createElement("canvas");p.width=p.height=l;let E=(s=p.getContext("2d"))!==null&&s!==void 0?s:o.panic("Failed to create default texture.");E.fillStyle="black",E.fillRect(0,0,l,l),E.fillStyle="cyan",E.fillRect(0,0,l/2,l/2),E.fillRect(l/2,l/2,l/2,l/2);let v=new u.Texture2D(l,l,I.TextureFormat.RGBA,u.FilterMode.Linear,C);v.setData(p),v.name="Texture-Error",E.fillStyle="blue",E.fillRect(0,0,l,l);let D=new u.Texture2D(l,l,I.TextureFormat.RGBA,u.FilterMode.Linear,C);D.setData(p),D.name="Default-Normal",E.fillStyle="white",E.fillRect(0,0,l,l);let F=new u.Texture2D(l,l,I.TextureFormat.RGBA,u.FilterMode.Linear,C);return F.setData(p),F.name="Default-White",{default:F,defaultNormal:D,error:v}}r.createDefaultTextures=w}),Ir=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.MeshBuilder=void 0;var o=xr(),u=Ot(),I=Cr(),w=class{constructor(C=0,s=u.GlobalContext().gl){this.verts=[],this.triangles=[],this.uvs=[],this.colors=[],this.gl=s}addPolygon(C,s){let l=this.verts.length;for(let p=0;p<C.length;p++)this.verts.push(C[p]),this.uvs.push(s[p]),this.colors.push(o.Color.white);for(let p=2;p<C.length;p++)this.triangles.push(l+0,l+p-1,l+p)}addSubMesh(C,s,l=[o.Color.white],p=[o.vec2(0,0)]){let E=this.verts.length;if(s.length%3!=0)throw new Error("Invalid number of triangles.");for(let v=0;v<C.length;v++)this.verts.push(C[v]),this.uvs.push(v>=p.length?p[p.length-1]:p[v]),this.colors.push(v>=l.length?l[l.length-1]:l[v]);for(let v=0;v<s.length;v++)this.triangles.push(E+s[v])}toMesh(){let C=new I.Mesh(this.gl);return C.verts=this.verts,C.triangles=this.triangles,C.colors=this.colors,C.uvs=this.uvs,C.calculateNormals(),C}static quad(C=o.vec2.zero(),s=o.vec2.one()){let l=o.mul(s,o.vec2(.5)),p=new I.Mesh;return p.verts=[o.vec3(C.x-l.x,C.y-l.y,0),o.vec3(C.x+l.x,C.y-l.y,0),o.vec3(C.x+l.x,C.y+l.y,0),o.vec3(C.x-l.x,C.y+l.y,0)],p.triangles=[0,1,3,1,2,3],p.uvs=[o.vec2(0,0),o.vec2(1,0),o.vec2(1,1),o.vec2(0,1)],p.normals=[o.vec3(0,0,1),o.vec3(0,0,1),o.vec3(0,0,1),o.vec3(0,0,1)],p.name="mesh_quad",p}static ndcQuad(){return this.quad(o.vec2.zero(),o.vec2(2,2))}static ndcTriangle(){let C=new I.Mesh;return C.verts=[o.vec3(-1,-1,0),o.vec3(3,-1,0),o.vec3(-1,3,0)],C.triangles=[0,1,2],C.uvs=[o.vec2(0,0),o.vec2(2,0),o.vec2(0,2)],C.normals=[o.vec3(0,0,1),o.vec3(0,0,1),o.vec3(0,0,1)],C.name="mesh_ndc_triangle",C}};r.MeshBuilder=w}),Ae=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createBuiltinMesh=void 0;var o=Cr(),u=Vt(),I=Lt(),w=Ir();function C(E){return{quad:s(E),screenQuad:l(E),cube:p(E)}}r.createBuiltinMesh=C;function s(E){let v=new o.Mesh(E);return v.verts=[u.vec3(-.5,-.5,0),u.vec3(.5,-.5,0),u.vec3(.5,.5,0),u.vec3(-.5,.5,0)],v.triangles=[0,1,3,1,2,3],v.uvs=[I.vec2(0,0),I.vec2(1,0),I.vec2(1,1),I.vec2(0,1)],v.calculateNormals(),v.name="mesh_quad",v}function l(E){let v=new o.Mesh(E);return v.verts=[u.vec3(-1,-1,0),u.vec3(1,-1,0),u.vec3(1,1,0),u.vec3(-1,1,0)],v.triangles=[0,1,3,1,2,3],v.uvs=[I.vec2(0,0),I.vec2(1,0),I.vec2(1,1),I.vec2(0,1)],v.calculateNormals(),v.name="mesh_screen_quad",v}function p(E){let v=[u.vec3(-.5,-.5,-.5),u.vec3(.5,-.5,-.5),u.vec3(.5,.5,-.5),u.vec3(-.5,.5,-.5),u.vec3(-.5,-.5,.5),u.vec3(.5,-.5,.5),u.vec3(.5,.5,.5),u.vec3(-.5,.5,.5)],D=[I.vec2(0,0),I.vec2(1,0),I.vec2(1,1),I.vec2(0,1)],F=new w.MeshBuilder(24,E);F.addPolygon([v[1],v[0],v[3],v[2]],[D[0],D[1],D[2],D[3]]),F.addPolygon([v[5],v[1],v[2],v[6]],[D[0],D[1],D[2],D[3]]),F.addPolygon([v[4],v[5],v[6],v[7]],[D[0],D[1],D[2],D[3]]),F.addPolygon([v[0],v[4],v[7],v[3]],[D[0],D[1],D[2],D[3]]),F.addPolygon([v[7],v[6],v[2],v[3]],[D[0],D[1],D[2],D[3]]),F.addPolygon([v[0],v[1],v[5],v[4]],[D[0],D[1],D[2],D[3]]);let Y=F.toMesh();return Y.name="mesh_cube",Y}}),ne=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BuiltinAssets=void 0;var o=ie(),u=Xt(),I=ge(),w=Ae(),C=class{constructor(s){let l={assets:this,gl:s,width:0,height:0,renderer:null};this.gl=s,this.BuiltinUniforms=u.BuiltinUniformNames,this.shaderSources=u.BuiltinShaderSources,this.shaders=u.compileBuiltinShaders(s),this.meshes=w.createBuiltinMesh(s),this.textures=I.createDefaultTextures(l),this.types=o.createBuiltinMaterialTypes(s,this.textures,this.shaders),this.materials=o.createBuiltinMaterial(s,this.types,this.shaders,this.textures)}};r.BuiltinAssets=C}),ae=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ZograRenderer=void 0;var o=kt(),u=Ot(),I=Qt(),w=Mr(),C=Br(),s=ir(),l=Lt(),p=ne(),E=sr(),v=Ir(),D=Ht(),F=Xt(),Y=class{constructor(z,k,j){this.viewProjectionMatrix=w.mat4.identity(),this.viewMatrix=w.mat4.identity(),this.projectionMatrix=w.mat4.identity(),this.target=C.RenderTarget.CanvasTarget,this.shader=null,this.globalUniforms=new Map,this.globalTextures=new Map,this.canvas=z,this.width=k===void 0?z.width:k,this.height=j===void 0?z.height:j,this.canvas.width=this.width,this.canvas.height=this.height,this.scissor=new E.Rect(l.vec2.zero(),l.vec2(this.width,this.height)),this.gl=o.panicNull(this.canvas.getContext("webgl2"),"WebGL2 is not support on current device."),this.assets=new p.BuiltinAssets(this.gl),this.ctx={gl:this.gl,width:this.width,height:this.height,assets:this.assets,renderer:this},u.GlobalContext()||this.use(),this.helperAssets={clipBlitMesh:v.MeshBuilder.ndcQuad(),blitMesh:v.MeshBuilder.ndcTriangle()}}use(){u.setGlobalContext(this.ctx)}setSize(z,k){this.canvas.width=z,this.canvas.height=k,this.width=z,this.height=k,this.ctx.width=z,this.ctx.height=k}get canvasSize(){return l.vec2(this.width,this.height)}setViewProjection(z,k){this.viewProjectionMatrix=w.mat4.mul(k,z)}setRenderTarget(z,k){if(z===C.RenderTarget.CanvasTarget)this.target!==z&&this.target.release(),this.target=z;else if(z instanceof C.RenderTarget)this.target!==z&&this.target.release(),this.target=z,k&&this.target.setDepthAttachment(k);else{let j;if(z instanceof Array){this.target.release(),j=new C.RenderTarget(z[0].width,z[0].height,this.ctx);for(let U=0;U<z.length;U++)j.addColorAttachment(z[U])}else if(z instanceof s.RenderTexture)this.target.release(),j=new C.RenderTarget(z.width,z.height,this.ctx),j.addColorAttachment(z);else throw new Error("Invalid render target");k&&j.setDepthAttachment(k),this.target=j}this.scissor=new E.Rect(l.vec2.zero(),this.target.size),this.target.bind()}clear(z=I.Color.black,k=!0){this.gl.clearColor(z.r,z.g,z.b,z.a),this.gl.clear(this.gl.COLOR_BUFFER_BIT|(k?this.gl.DEPTH_BUFFER_BIT:0))}blit(z,k,j=this.assets.materials.blitCopy,U,J){if(k instanceof s.RenderTexture){let dt=new C.RenderTarget(k.width,k.height,this.ctx);dt.addColorAttachment(k),k=dt}else if(k instanceof Array){let dt=new C.RenderTarget(0,0,this.ctx);for(let vt=0;vt<k.length;vt++)dt.addColorAttachment(k[vt]);k=dt}let At=this.viewProjectionMatrix,ht=this.target,lt=this.helperAssets.blitMesh,ct=k===C.RenderTarget.CanvasTarget?new E.Rect(l.vec2.zero(),this.canvasSize):new E.Rect(l.vec2.zero(),k.size);if(z&&(U||J)&&(ct=J||ct,U)){lt=this.helperAssets.clipBlitMesh;let dt=D.div(U.min,z.size),vt=D.div(U.max,z.size);lt.uvs=[l.vec2(dt.x,dt.y),l.vec2(vt.x,dt.y),l.vec2(vt.x,vt.y),l.vec2(dt.x,vt.y)],lt.update()}this.target=k,this.scissor=ct,this.viewProjectionMatrix=w.mat4.identity(),z&&j.setProp(F.BuiltinUniformNames.mainTex,"tex2d",z),this.drawMesh(lt,w.mat4.identity(),j),this.setRenderTarget(ht),this.viewProjectionMatrix=At}useShader(z){this.gl,this.shader=z,z.use(),z.setupPipelineStates()}setupTransforms(z,k){this.gl;let j=w.mat4.mul(this.viewProjectionMatrix,k),U=w.mat4.transpose(w.mat4.invert(k)),J=w.mat4.transpose(w.mat4.invert(w.mat4.mul(this.viewMatrix,k)));z.setupBuiltinUniform({matM:k,matVP:this.viewProjectionMatrix,matMVP:j,matM_IT:U,matMV_IT:J})}setupGlobalUniforms(z){for(let k of this.globalUniforms.values())z.setUniformDirectly(k.name,k.type,k.value)}drawMeshInstance(z,k,j,U){j||(j=this.assets.materials.error);let J=this.gl,At={assets:this.assets,gl:J,nextTextureUnit:0,size:l.vec2(this.width,this.height)};this.target.bind(),this.setupScissor(),this.useShader(j.shader),j.upload(At),this.setupTransforms(j.shader,w.mat4.identity()),z.bind(j.shader),k.bindInstanceDraw(j.shader),J.drawElementsInstanced(J.TRIANGLES,z.triangles.length,J.UNSIGNED_INT,0,U),k.cleanupInstanceDraw(j.shader),j.unbindRenderTextures()}drawMeshProceduralInstance(z,k,j){k||(k=this.assets.materials.error);let U=this.gl,J={assets:this.assets,gl:U,nextTextureUnit:0,size:l.vec2(this.width,this.height)};this.target.bind(),this.setupScissor(),this.useShader(k.shader),k.upload(J),this.setupTransforms(k.shader,w.mat4.identity()),z.bind(k.shader),U.drawElementsInstanced(U.TRIANGLES,z.triangles.length,U.UNSIGNED_INT,0,j),k.unbindRenderTextures()}drawMesh(z,k,j){j||(j=this.assets.materials.error);let U=this.gl,J={assets:this.assets,gl:U,nextTextureUnit:0,size:l.vec2(this.width,this.height)};this.target.bind(),this.setupScissor(),this.useShader(j.shader),j.upload(J),this.setupTransforms(j.shader,k),this.setupGlobalUniforms(j),z.bind(j.shader),U.drawElements(U.TRIANGLES,z.triangles.length,U.UNSIGNED_INT,0),j.unbindRenderTextures()}drawLines(z,k,j){let U=this.gl,J={assets:this.assets,gl:U,nextTextureUnit:0,size:l.vec2(this.width,this.height)};this.target.bind(),this.setupScissor(),this.useShader(j.shader),j.upload(J),this.setupTransforms(j.shader,k),z.bind(j.shader),U.drawElements(U.LINES,z.lines.length,U.UNSIGNED_INT,0)}setGlobalUniform(z,k,j){this.globalUniforms.set(z,{name:z,type:k,value:j})}unsetGlobalUniform(z){this.globalUniforms.delete(z)}setupScissor(){this.gl.viewport(this.scissor.xMin,this.scissor.yMin,this.scissor.size.x,this.scissor.size.y)}};r.ZograRenderer=Y}),se=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LineBuilder=r.Lines=void 0;var o=Qt(),u=Ot(),I=kt(),w=Yt(),C=class extends w.Asset{constructor(l=u.GL()){var p,E;super(),this._verts=[],this._colors=[],this._lines=[],this.dirty=!0,this.vertices=new Float32Array(0),this.indices=new Uint32Array(0),this.name=`Lines_${this.assetID}`,this.gl=l,this.VBO=(p=l.createBuffer())!==null&&p!==void 0?p:I.panic("Failed to create vertex buffer."),this.EBO=(E=l.createBuffer())!==null&&E!==void 0?E:I.panic("Failed to create element buffer.")}get verts(){return this._verts}set verts(l){this._verts=l,this.dirty=!0}get colors(){return this._colors}set colors(l){this._colors=l,this.dirty=!0}get lines(){return this._lines}set lines(l){this._lines=l,this.dirty=!0}clear(){this.verts=[],this.colors=[],this.lines=[]}update(){if(this.dirty){let l=this.gl;if(this.lines.length%2!=0)throw new Error("Invalid lines.");if(this.colors.length!==this.verts.length&&(this.colors=[...this.colors,...I.fillArray(o.Color.white,this.verts.length-this.colors.length)]),this.vertices=new Float32Array(this.verts.flatMap((p,E)=>[...p,...this.colors[E]])),this.vertices.length!=this.verts.length*7)throw new Error("Buffer with invalid length.");this.indices=new Uint32Array(this.lines.flat()),l.bindBuffer(l.ARRAY_BUFFER,this.VBO),l.bufferData(l.ARRAY_BUFFER,this.vertices,l.DYNAMIC_DRAW),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,this.EBO),l.bufferData(l.ELEMENT_ARRAY_BUFFER,this.indices,l.DYNAMIC_DRAW),this.dirty=!1}}bind(l){let p=this.gl;this.update();let E=l._internal().attributes,v=7*4;p.bindBuffer(p.ARRAY_BUFFER,this.VBO),E.vert>=0&&(p.vertexAttribPointer(E.vert,3,p.FLOAT,!1,v,0),p.enableVertexAttribArray(E.vert)),E.color>=0&&(p.vertexAttribPointer(E.color,4,p.FLOAT,!1,v,3*4),p.enableVertexAttribArray(E.color)),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,this.EBO)}destroy(){this.destroyed||(this.gl.deleteBuffer(this.VBO),this.gl.deleteBuffer(this.EBO),super.destroy())}};r.Lines=C;var s=class{constructor(l=0,p=u.GL()){this.verts=[],this.colors=[],this.lines=[],this.gl=p}addLine(l,p=o.Color.white){let E=this.verts.length,[v,D]=l;this.verts.push(v,D),this.colors.push(p,p),this.lines.push(E,E+1)}toLines(){let l=new C(this.gl);return l.verts=this.verts,l.colors=this.colors,l.lines=this.lines,l.update(),l}};r.LineBuilder=s}),oe=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderBuffer=void 0;var o=kt(),u=Ot(),I=class extends Array{constructor(w,C,s=u.GlobalContext()){super(C),this.static=!1,this.dirty=!1,this.initialized=!1,this.glBuf=null,this.structure=w,this.ctx=s;let l=0;for(let E in w)switch(w[E]){case"float":l+=1;break;case"vec2":l+=2;break;case"vec3":l+=3;break;case"vec4":l+=4;break;case"mat4":l+=16;break}let p=l*4;this.buffer=null,this.byteSize=p*C,this.elementSize=l,this.elementByteSize=p,this.resize(C),this.tryInit(!1)}tryInit(w=!1){var C;if(this.initialized)return!0;let s=this.ctx||u.GlobalContext();if(!s){if(w)throw new Error("Failed to init render buffer without a global GL context.");return!1}this.ctx=s;let l=s.gl;return this.glBuf=(C=l.createBuffer())!==null&&C!==void 0?C:o.panic("Failed to create render buffer"),l.bindBuffer(l.ARRAY_BUFFER,this.glBuf),l.bufferData(l.ARRAY_BUFFER,this.byteSize,this.static?l.STATIC_DRAW:l.DYNAMIC_DRAW),this.initialized=!0,!0}resize(w,C=!0){let s=this.buffer;this.buffer=new Float32Array(this.elementSize*w),C&&s&&this.buffer.set(s,0),this.length=w;let l=this.elementByteSize;for(let p=0;p<this.length;p++){let E={},v=0;for(let D in this.structure)switch(this.structure[D]){case"float":E[D]=new Float32Array(this.buffer.buffer,p*l+v*4,1),v+=1;break;case"vec2":E[D]=new Float32Array(this.buffer.buffer,p*l+v*4,2),v+=2;break;case"vec3":E[D]=new Float32Array(this.buffer.buffer,p*l+v*4,3),v+=3;break;case"vec4":E[D]=new Float32Array(this.buffer.buffer,p*l+v*4,4),v+=4;break;case"mat4":E[D]=new Float32Array(this.buffer.buffer,p*l+v*4,16),v+=16;break}this[p]=E}this.dirty=!0}markDirty(){this.dirty=!0}upload(w=!1){if(this.tryInit(!0),!this.dirty&&!w&&this.static)return!1;let C=this.ctx.gl;return C.bindBuffer(C.ARRAY_BUFFER,this.glBuf),C.bufferData(C.ARRAY_BUFFER,this.buffer,this.static?C.STATIC_DRAW:C.DYNAMIC_DRAW),this.dirty=!1,!0}bindInstanceDraw(w){this.tryInit(!0);let C=this.ctx.gl;this.upload()||C.bindBuffer(C.ARRAY_BUFFER,this.glBuf);let s=w._internal().attributes,l=0;for(let p in this.structure){let E=s[p];switch(E>=0&&C.enableVertexAttribArray(E),this.structure[p]){case"float":E>=0&&C.vertexAttribPointer(E,1,C.FLOAT,!1,this.elementByteSize,l*4),l+=1;break;case"vec2":E>=0&&C.vertexAttribPointer(E,2,C.FLOAT,!1,this.elementByteSize,l*4),l+=2;break;case"vec3":E>=0&&C.vertexAttribPointer(E,3,C.FLOAT,!1,this.elementByteSize,l*4),l+=3;break;case"vec4":E>=0&&C.vertexAttribPointer(E,4,C.FLOAT,!1,this.elementByteSize,l*4),l+=4;break;case"mat4":E>=0&&(C.enableVertexAttribArray(E+0),C.enableVertexAttribArray(E+1),C.enableVertexAttribArray(E+2),C.enableVertexAttribArray(E+3),C.vertexAttribPointer(E+0,4,C.FLOAT,!1,this.elementByteSize,(l+0)*4),C.vertexAttribPointer(E+1,4,C.FLOAT,!1,this.elementByteSize,(l+4)*4),C.vertexAttribPointer(E+2,4,C.FLOAT,!1,this.elementByteSize,(l+8)*4),C.vertexAttribPointer(E+3,4,C.FLOAT,!1,this.elementByteSize,(l+12)*4),C.vertexAttribDivisor(E+0,1),C.vertexAttribDivisor(E+1,1),C.vertexAttribDivisor(E+2,1),C.vertexAttribDivisor(E+3,1)),l+=16;break}E>=0&&C.vertexAttribDivisor(E,1)}}cleanupInstanceDraw(w){this.tryInit(!0);let C=this.ctx.gl,s=w._internal().attributes;for(let l in this.structure){let p=s[l];switch(this.structure[l]){case"float":case"vec2":case"vec3":case"vec4":p>=0&&C.vertexAttribDivisor(p,0),p>=0&&C.disableVertexAttribArray(p);break;case"mat4":p>=0&&(C.vertexAttribDivisor(p+0,0),C.vertexAttribDivisor(p+1,0),C.vertexAttribDivisor(p+2,0),C.vertexAttribDivisor(p+3,0),C.disableVertexAttribArray(p+0),C.disableVertexAttribArray(p+1),C.disableVertexAttribArray(p+2),C.disableVertexAttribArray(p+3));break}}}};r.RenderBuffer=I}),Tr=It(r=>{var o=r&&r.__createBinding||(Object.create?function(w,C,s,l){l===void 0&&(l=s),Object.defineProperty(w,l,{enumerable:!0,get:function(){return C[s]}})}:function(w,C,s,l){l===void 0&&(l=s),w[l]=C[s]}),u=r&&r.__exportStar||function(w,C){for(var s in w)s!=="default"&&!Object.prototype.hasOwnProperty.call(C,s)&&o(C,w,s)};Object.defineProperty(r,"__esModule",{value:!0}),r.TextureFormat=void 0,u(or(),r),u(Er(),r),u(Cr(),r),u(ae(),r),u(Rr(),r),u(ir(),r),u(Yt(),r),u(se(),r),u(wr(),r),u(oe(),r),u(Br(),r);var I=er();Object.defineProperty(r,"TextureFormat",{enumerable:!0,get:function(){return I.TextureFormat}})}),Ce=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AssetsPack=void 0;var o=class{constructor(){this.mainAsset=null,this.assets=new Map}add(u,I){I.name=u,this.assets.set(u,I)}setMain(u){this.mainAsset=u}get(u){for(let[I,w]of this.assets)if(w instanceof u)return w;return null}getAll(u){return Array.from(this.assets.values()).filter(I=>I instanceof u)}};r.AssetsPack=o}),Sr=It(r=>{var o=r&&r.__createBinding||(Object.create?function(C,s,l,p){p===void 0&&(p=l),Object.defineProperty(C,p,{enumerable:!0,get:function(){return s[l]}})}:function(C,s,l,p){p===void 0&&(p=l),C[p]=s[l]}),u=r&&r.__exportStar||function(C,s){for(var l in C)l!=="default"&&!Object.prototype.hasOwnProperty.call(s,l)&&o(s,C,l)};Object.defineProperty(r,"__esModule",{value:!0}),r.AssetsImporter=void 0;var I=Ot();u(Ce(),r);var w=class{constructor(C){this.importers=C}async url(C,s=I.GlobalContext()){let l=await fetch(C).then(p=>p.arrayBuffer());return await this.buffer(l,s)}async blob(C,s=I.GlobalContext()){let l=await C.arrayBuffer();return await this.buffer(l,s)}async buffer(C,s=I.GlobalContext()){let l={};for(let p in this.importers)l[p]=E=>this.importers[p].import(C,E,s);return l}};r.AssetsImporter=w}),Ie=It(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TextureImporter=void 0;var o=Tr(),u=Ot(),I=er(),w=Sr(),C={import(l,p,E=u.GlobalContext()){return new Promise((v,D)=>{let F=new Blob([l]),Y=new Image;Y.src=URL.createObjectURL(F);let z=()=>{let k={width:Y.width,height:Y.height,filterMode:o.FilterMode.Linear,format:I.TextureFormat.RGBA,mipmap:!0,wrapMpde:o.WrapMode.Repeat},j=Object.assign(Object.assign({},k),p),U=new o.Texture2D(j.width,j.height,j.format,j.filterMode,E);U.autoMipmap=j.mipmap,U.wrapMode=j.wrapMpde,U.updateParameters(),U.setData(Y),v(U)};Y.complete?z():Y.onload=z})}},s={tex2d:C};r.TextureImporter=new w.AssetsImporter(s)}),cr=It(r=>{var o=r&&r.__createBinding||(Object.create?function(I,w,C,s){s===void 0&&(s=C),Object.defineProperty(I,s,{enumerable:!0,get:function(){return w[C]}})}:function(I,w,C,s){s===void 0&&(s=C),I[s]=w[C]}),u=r&&r.__exportStar||function(I,w){for(var C in I)C!=="default"&&!Object.prototype.hasOwnProperty.call(w,C)&&o(w,I,C)};Object.defineProperty(r,"__esModule",{value:!0}),u(Sr(),r),u(Ie(),r)}),ue=It(r=>{var o=r&&r.__createBinding||(Object.create?function(I,w,C,s){s===void 0&&(s=C),Object.defineProperty(I,s,{enumerable:!0,get:function(){return w[C]}})}:function(I,w,C,s){s===void 0&&(s=C),I[s]=w[C]}),u=r&&r.__exportStar||function(I,w){for(var C in I)C!=="default"&&!Object.prototype.hasOwnProperty.call(w,C)&&o(w,I,C)};Object.defineProperty(r,"__esModule",{value:!0}),u(Ir(),r)}),le=It(r=>{var o=r&&r.__createBinding||(Object.create?function(I,w,C,s){s===void 0&&(s=C),Object.defineProperty(I,s,{enumerable:!0,get:function(){return w[C]}})}:function(I,w,C,s){s===void 0&&(s=C),I[s]=w[C]}),u=r&&r.__exportStar||function(I,w){for(var C in I)C!=="default"&&!Object.prototype.hasOwnProperty.call(w,C)&&o(w,I,C)};Object.defineProperty(r,"__esModule",{value:!0}),u(Pr(),r)}),Zt=It(r=>{var o=r&&r.__createBinding||(Object.create?function(p,E,v,D){D===void 0&&(D=v),Object.defineProperty(p,D,{enumerable:!0,get:function(){return E[v]}})}:function(p,E,v,D){D===void 0&&(D=v),p[D]=E[v]}),u=r&&r.__setModuleDefault||(Object.create?function(p,E){Object.defineProperty(p,"default",{enumerable:!0,value:E})}:function(p,E){p.default=E}),I=r&&r.__exportStar||function(p,E){for(var v in p)v!=="default"&&!Object.prototype.hasOwnProperty.call(E,v)&&o(E,p,v)},w=r&&r.__importStar||function(p){if(p&&p.__esModule)return p;var E={};if(p!=null)for(var v in p)v!=="default"&&Object.prototype.hasOwnProperty.call(p,v)&&o(E,p,v);return u(E,p),E};Object.defineProperty(r,"__esModule",{value:!0}),r.Utils=r.GlobalContext=r.plugins=void 0,I(xr(),r),I(Tr(),r);var C=w(cr());r.plugins=C,I(cr(),r),I(ue(),r);var s=Ot();Object.defineProperty(r,"GlobalContext",{enumerable:!0,get:function(){return s.GlobalContext}});var l=w(le());r.Utils=l}),jt=Jt(Zt()),W=Jt(Zt()),he=Hr("iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5QIZBzY36WJJGwAAABJ0RVh0RmlsZSBOYW1lAM60serM4i0xjMwnJwAAOd9pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8eG1wOkNyZWF0ZURhdGU+MjAyMS0wMi0yNVQxNTo1NDo1MyswODowMDwveG1wOkNyZWF0ZURhdGU+CiAgICAgICAgIDx4bXA6TWV0YWRhdGFEYXRlPjIwMjEtMDItMjVUMTU6NTQ6NTMrMDg6MDA8L3htcDpNZXRhZGF0YURhdGU+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDIxLTAyLTI1VDE1OjU0OjUzKzA4OjAwPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDo4MjdmMjExZi1iNjczLWVlNDktYTc5NC05YTVjMWJmY2EzZmU8L3htcE1NOkluc3RhbmNlSUQ+CiAgICAgICAgIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDoxNTVhOWVmYy1kMmYwLTBkNDItYTcwYS02ZGY5M2UwNjljYWE8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDo2NjBiMDZmYi0xZjczLWFkNDQtYWQwMS1kNGU5ZDlhOTE4NDM8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jcmVhdGVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6NjYwYjA2ZmItMWY3My1hZDQ0LWFkMDEtZDRlOWQ5YTkxODQzPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDIxLTAyLTI1VDE1OjU0OjUzKzA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDo4MjdmMjExZi1iNjczLWVlNDktYTc5NC05YTVjMWJmY2EzZmU8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMjEtMDItMjVUMTU6NTQ6NTMrMDg6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpTZXE+CiAgICAgICAgIDwveG1wTU06SGlzdG9yeT4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9wbmc8L2RjOmZvcm1hdD4KICAgICAgICAgPHBob3Rvc2hvcDpDb2xvck1vZGU+MzwvcGhvdG9zaG9wOkNvbG9yTW9kZT4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzIwMDAwLzEwMDAwPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WVJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+NjU1MzU8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI1NjwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj4yNTY8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PsD6WFoAAAAYdEVYdFNvZnR3YXJlAEFkb2JlIFBob3Rvc2hvcDTLjmcAAAAPdEVYdFdyaXRlcgBTdXBlclBOR8XEr90AACAASURBVHja7V3pduPMCgTZz32f/LO4P6KFpllb7YyTKOfMxIvseFEVRUHT+L//wf1z/9w/f/RnuT+C++f++bs/z/sj+DU/+M1/j+6P/CaA++d3gnvWa7pJ4iaA++eHA/0d7+cmhpsA7p9fCPjR930Twk0AN+B/KInQTQg3Adw/7wUn/tD3SDch3ARwg/4zwF59XnrT36SLz3OTwU0Avwr4+A/+5uznpgvPS4Ov6yaCmwD+FOi/W1nQxeemgceO/s2bDG4C+Hjg4xuO/WQFMEIKV8ngJoKbAD4K+DOBjG98nVdVAQ6SAk0mg5sIbgL4McDHN98/gxCo8Dw0AHYsksFNBDcBfCzwr4L+Hfd9x/unpArAAmFklAbdRHATwE8H/qzb300Eo8DHJCHQAHDxJoKb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"),bt=Jt(Zt()),$t=`#version 300 es\r
precision mediump float;\r
\r
in vec3 aPos;\r
in vec4 aColor;\r
in vec2 aUV;\r
in vec3 aNormal;\r
\r
uniform mat4 uTransformM;\r
uniform mat4 uTransformVP;\r
uniform mat4 uTransformMVP;\r
uniform mat4 uTransformM_IT;\r
\r
out vec4 vColor;\r
out vec4 vPos;\r
out vec2 vUV;\r
out vec3 vNormal;\r
out vec3 vWorldPos;\r
\r
void main()\r
{\r
    gl_Position = uTransformMVP * vec4(aPos, 1);\r
    vPos = gl_Position;\r
    vColor = aColor;\r
    vUV = aUV;\r
    vNormal = (uTransformM_IT *  vec4(aNormal, 0)).xyz;\r
    vWorldPos = (uTransformM * vec4(aPos, 1)).xyz;\r
    \r
}`,ce=`#version 300 es\r
precision mediump float;\r
\r
in vec4 vColor;\r
in vec4 vPos;\r
in vec2 vUV;\r
\r
uniform sampler2D uMainTex;\r
uniform vec4 uTexSize; // (w, h, 1/w, 1/h)\r
uniform float uSampleOffset;\r
\r
out vec4 fragColor;\r
\r
void main()\r
{\r
    vec2 delta = vec2(-uSampleOffset, uSampleOffset);\r
    vec4 color = \r
      texture(uMainTex, clamp(vUV.xy + uTexSize.zw * delta.xx, vec2(0), vec2(1)))\r
    + texture(uMainTex, clamp(vUV.xy + uTexSize.zw * delta.yx, vec2(0), vec2(1)))\r
    + texture(uMainTex, clamp(vUV.xy + uTexSize.zw * delta.yy, vec2(0), vec2(1)))\r
    + texture(uMainTex, clamp(vUV.xy + uTexSize.zw * delta.xy, vec2(0), vec2(1)));\r
\r
    color /= vec4(4.0);\r
\r
    fragColor = color.rgba;\r
}`,tr=class extends bt.MaterialFromShader(new bt.Shader($t,ce)){constructor(){super(...arguments),this.texture=null,this.textureSize=bt.vec4.one(),this.sampleOffset=1}};wt([bt.shaderProp("uMainTex","tex2d")],tr.prototype,"texture",2),wt([bt.shaderProp("uTexSize","vec4")],tr.prototype,"textureSize",2),wt([bt.shaderProp("uSampleOffset","float")],tr.prototype,"sampleOffset",2);var fe=class{constructor(r){this.steps=[],this.mateiralBlur=new tr,this.renderer=r}init(r){this.steps[0]||(this.steps[0]=new bt.RenderTexture(r.width,r.height,!1,r.format,r.filterMode),this.steps[0].wrapMode=bt.WrapMode.Clamp,this.steps[0].updateParameters()),(this.steps[0].width!==r.width||this.steps[0].height!==r.height)&&this.steps[0].resize(r.width,r.height,bt.TextureResizing.Discard)}blur(r,o=4,u=this.steps[0]){return this.steps[0]||(this.steps[0]=new bt.RenderTexture(r.width,r.height,!1,r.format,r.filterMode)),u=u||this.steps[0],(this.steps[0].width!==r.width||this.steps[0].height!==r.height)&&this.steps[0].resize(r.width,r.height,bt.TextureResizing.Discard),this.downSample(r,o),this.upSample(o,u)}downSample(r,o){for(let u=1;u<=o;u++){let I=bt.vec2.floor(bt.div(r.size,bt.vec2(2)));this.steps[u]||(this.steps[u]=new bt.RenderTexture(I.x,I.y,!1,bt.TextureFormat.RGBA,bt.FilterMode.Linear),this.steps[u].wrapMode=bt.WrapMode.Clamp,this.steps[u].updateParameters());let w=this.steps[u];(w.width!==I.x||w.height!==I.y)&&w.resize(I.x,I.y,bt.TextureResizing.Discard),this.mateiralBlur.texture=r,this.mateiralBlur.textureSize=bt.vec4(r.width,r.height,1/r.width,1/r.height),this.mateiralBlur.sampleOffset=1,this.renderer.blit(r,w,this.mateiralBlur),r=w}}upSample(r,o=this.steps[0]){let u=this.steps[r];for(let I=r-1;I>=0;I--){let w=bt.mul(u.size,bt.vec2(2));this.steps[I]||(this.steps[I]=new bt.RenderTexture(w.x,w.y,!1,bt.TextureFormat.RGBA,bt.FilterMode.Linear),this.steps[I].wrapMode=bt.WrapMode.Clamp,this.steps[I].updateParameters());let C=I===0?o:this.steps[I];this.mateiralBlur.texture=u,this.mateiralBlur.textureSize=bt.vec4(u.width,u.height,1/u.width,1/u.height),this.mateiralBlur.sampleOffset=1,this.renderer.blit(u,C,this.mateiralBlur),u=C}return u}},de=Jt(Zt());function ve(r){return de.vec2(Math.random(),Math.random()).mul(r.size).plus(r.min)}function pe(){return Math.random()*2-1}function Ft(r,o){return Math.random()*(o-r)+r}var me=`#version 300 es\r
precision mediump float;\r
\r
in vec4 vColor;\r
in vec4 vPos;\r
in vec2 vUV;\r
\r
uniform sampler2D uMainTex;\r
uniform vec4 uColor;\r
\r
out vec4 fragColor;\r
\r
void main()\r
{\r
    vec4 color = texture(uMainTex, vUV.xy).rgba;\r
    color.rgba = color * uColor;\r
    fragColor = color.rgba;\r
}`,be=`#version 300 es\r
precision mediump float;\r
\r
in vec2 vUV;\r
\r
uniform sampler2D uMainTex;\r
uniform sampler2D uMistTex;\r
uniform vec4 uMistColor;\r
\r
out vec4 fragColor;\r
\r
void main()\r
{\r
    vec4 color = texture(uMainTex, vUV.xy).rgba;\r
    color.rgb += vec3(uMistColor);\r
    color.a = texture(uMistTex, vUV.xy).r * uMistColor.a;\r
    fragColor = color.rgba;\r
}`,ye=`#version 300 es\r
precision mediump float;\r
\r
in vec4 vColor;\r
in vec4 vPos;\r
in vec2 vUV;\r
\r
uniform sampler2D uMainTex;\r
uniform vec4 uBackgroundSize; // (x, y, 1/x, 1/y)\r
uniform sampler2D uRaindropTex;\r
uniform sampler2D uDropletTex;\r
uniform sampler2D uMistTex;\r
uniform vec4 uColor;\r
uniform vec2 uSmoothRaindrop;\r
uniform vec2 uRefractParams; // (refractBase, refractScale)\r
uniform vec4 uLightPos;\r
uniform vec4 uDiffuseColor; // (color.rgb, shadowOffset)\r
uniform vec4 uSpecularParams; // (color.rgb, exponent)\r
uniform float uBump;\r
\r
out vec4 fragColor;\r
\r
void main()\r
{\r
    // vec3 lightPos = vec3(0.5, 1, 1);\r
\r
    vec4 raindrop = texture(uRaindropTex, vUV.xy).rgba;\r
    vec4 droplet = texture(uDropletTex, vUV.xy).rgba;\r
    float mist = texture(uMistTex, vUV.xy).r;\r
\r
    vec4 compose = vec4(raindrop.rgb + droplet.rgb - vec3(2.0) * raindrop.rgb * droplet.rgb, max(droplet.a, raindrop.a));\r
\r
    float mask = smoothstep(uSmoothRaindrop.x, uSmoothRaindrop.y, compose.a);\r
    \r
    vec2 uv = vUV.xy + -(compose.xy - vec2(0.5)) * vec2(compose.b * uRefractParams.y + uRefractParams.x);\r
    vec3 normal = normalize(vec3((compose.xy - vec2(0.5)) * vec2(2), 1.0));\r
\r
    // vec3 lightDir = lightPos - vec3(vUV, 0);\r
    vec3 lightDir = uLightPos.xyz - uLightPos.w * vec3(vUV.xy, 0.0);\r
    vec3 viewDir = vec3(0, 0, 1);\r
    vec3 halfDir = normalize(lightDir + viewDir);\r
    float lambertian = clamp(dot(normalize(lightDir), normal), 0.0, 1.0);\r
    float blinnPhon = pow(max(dot(normal, halfDir), 0.0), uSpecularParams.a);\r
\r
\r
    // offset = pow(offset, vec2(2));\r
    vec4 color = texture(uMainTex, uv.xy).rgba;\r
    vec3 diffuse = vec3((lambertian - uDiffuseColor.a) * uDiffuseColor.rgb);\r
\r
    color.rgb += vec3((lambertian - uDiffuseColor.a) * uDiffuseColor.rgb);\r
    color.rgb += vec3(blinnPhon) * uSpecularParams.rgb;\r
    \r
\r
    // fragColor = vec4(mask, mask, mask, 1);\r
    // color = color * vec3(uColor);\r
\r
    fragColor = vec4(color.rgb, mask);// vec4(color.rgb, mask);\r
}`,Me=`#version 300 es\r
precision mediump float;\r
\r
in vec3 aPos;\r
in vec2 aUV;\r
\r
uniform mat4 uTransformVP;\r
\r
uniform float uSeed;\r
uniform vec4 uSpawnRect; // (xmin, ymin, xsize, ysize)\r
uniform vec2 uSizeRange; \r
\r
out vec2 vUV;\r
\r
// Gold Noise \xA92015 dcerisano@standard3d.com\r
// - based on the Golden Ratio\r
// - uniform normalized distribution\r
// - fastest static noise generator function (also runs at low precision)\r
// Ref: https://www.shadertoy.com/view/ltB3zD\r
const float PHI = 1.61803398874989484820459; // \u03A6 = Golden Ratio \r
\r
float gold_noise(in vec2 xy, in float seed)\r
{\r
    return fract(tan(distance(xy*PHI, xy)*seed)*xy.x);\r
}\r
\r
vec2 lerp(vec2 a, vec2 b, vec2 t)\r
{\r
    return a + (b - a) * t;\r
}\r
\r
void main()\r
{\r
    int id = gl_InstanceID + 1;\r
    vec2 pos = uSpawnRect.xy + uSpawnRect.zw * vec2(\r
        gold_noise(vec2(1, id), uSeed + 1.0),\r
        gold_noise(vec2(id, 1), uSeed + 2.0));\r
\r
    vec2 size = vec2(\r
        gold_noise(vec2(1, id), uSeed + 3.0),\r
        gold_noise(vec2(id, 1), uSeed + 4.0));\r
    size = lerp(vec2(uSizeRange.x), vec2(uSizeRange.y), size);\r
    \r
    mat4 model = mat4(size.x, 0.0, 0.0, 0.0,  \r
                      0.0, size.x, 0.0, 0.0,  \r
                      0.0, 0.0, 1, 0.0,  \r
                      pos.x, pos.y, 0.0, 1.0); \r
    mat4 mvp = uTransformVP * model;\r
    gl_Position = mvp * vec4(aPos, 1);\r
    vUV = aUV;\r
}`,xe=`#version 300 es\r
precision mediump float;\r
\r
in vec2 vUV;\r
\r
uniform sampler2D uMainTex;\r
uniform vec4 uColor;\r
\r
out vec4 fragColor;\r
\r
void main()\r
{\r
    vec4 color = texture(uMainTex, vUV.xy).rgba;\r
    color.rgb *= color.a;\r
    fragColor = vec4(color.rg, 0.0, color.a);\r
}`,we=`#version 300 es\r
precision mediump float;\r
\r
in vec4 vColor;\r
in vec4 vPos;\r
in vec2 vUV;\r
\r
uniform sampler2D uMainTex;\r
uniform vec4 uColor;\r
uniform vec2 uEraserSmooth;\r
\r
out vec4 fragColor;\r
\r
void main()\r
{\r
    vec4 color = texture(uMainTex, vUV.xy).rgba;\r
    color.a = smoothstep(uEraserSmooth.x, uEraserSmooth.y, color.a);\r
    fragColor = color.rgba;\r
}`,Re=`#version 300 es\r
precision mediump float;\r
\r
in vec4 vColor;\r
in vec4 vPos;\r
in vec2 vUV;\r
in float vSize;\r
\r
uniform sampler2D uMainTex;\r
uniform float uSize;\r
\r
out vec4 fragColor;\r
\r
void main()\r
{\r
    vec4 color = texture(uMainTex, vUV.xy).rgba;\r
    \r
    fragColor = vec4(color.rg * color.a, vSize * color.a, color.a);\r
}`,Pe=`#version 300 es\r
precision mediump float;\r
\r
in vec3 aPos;\r
in vec4 aColor;\r
in vec2 aUV;\r
in vec3 aNormal;\r
\r
in float aSize;\r
in mat4 aModelMatrix;\r
\r
uniform mat4 uTransformM;\r
uniform mat4 uTransformVP;\r
uniform mat4 uTransformMVP;\r
uniform mat4 uTransformM_IT;\r
\r
out vec4 vColor;\r
out vec4 vPos;\r
out vec2 vUV;\r
out vec3 vNormal;\r
out vec3 vWorldPos;\r
out float vSize;\r
\r
void main()\r
{\r
    mat4 mvp = uTransformVP * aModelMatrix;\r
    gl_Position = mvp * vec4(aPos, 1);\r
    vPos = gl_Position;\r
    vColor = aColor;\r
    vUV = aUV;\r
    vNormal = (uTransformM_IT *  vec4(aNormal, 0)).xyz;\r
    vWorldPos = (uTransformM * vec4(aPos, 1)).xyz;\r
    vSize = aSize;\r
}`,Ar=class extends W.MaterialFromShader(new W.Shader(Pe,Re,{blendRGB:[W.Blending.OneMinusDstColor,W.Blending.OneMinusSrcColor],depth:W.DepthTest.Disable,zWrite:!1,attributes:{size:"aSize",modelMatrix:"aModelMatrix"}})){constructor(){super(...arguments),this.texture=null,this.size=0}};wt([W.shaderProp("uMainTex","tex2d")],Ar.prototype,"texture",2),wt([W.shaderProp("uSize","float")],Ar.prototype,"size",2);var Wt=class extends W.MaterialFromShader(new W.Shader(Me,xe,{blendRGB:[W.Blending.OneMinusDstColor,W.Blending.OneMinusSrcColor],depth:W.DepthTest.Disable,zWrite:!1,attributes:{size:"aSize",modelMatrix:"aModelMatrix"}})){constructor(){super(...arguments),this.texture=null,this.spawnRect=W.vec4(0,0,1,1),this.sizeRange=W.vec2(10,20),this.seed=1}};wt([W.shaderProp("uMainTex","tex2d")],Wt.prototype,"texture",2),wt([W.shaderProp("uSpawnRect","vec4")],Wt.prototype,"spawnRect",2),wt([W.shaderProp("uSizeRange","vec2")],Wt.prototype,"sizeRange",2),wt([W.shaderProp("uSeed","float")],Wt.prototype,"seed",2);var Ut=class extends W.MaterialFromShader(new W.Shader($t,ye,{blend:[W.Blending.SrcAlpha,W.Blending.OneMinusSrcAlpha],depth:W.DepthTest.Disable,zWrite:!1})){constructor(){super(...arguments),this.background=null,this.backgroundSize=W.vec4.one(),this.raindropTex=null,this.dropletTex=null,this.mistTex=null,this.smoothRaindrop=W.vec2(.95,1),this.refractParams=W.vec2(.4,.6),this.lightPos=W.vec4(.5,.5,2,1),this.diffuseLight=new W.Color(.3,.3,.3,.8),this.specularParams=W.vec4(1,1,1,32),this.bump=1}};wt([W.shaderProp("uMainTex","tex2d")],Ut.prototype,"background",2),wt([W.shaderProp("uBackgroundSize","vec4")],Ut.prototype,"backgroundSize",2),wt([W.shaderProp("uRaindropTex","tex2d")],Ut.prototype,"raindropTex",2),wt([W.shaderProp("uDropletTex","tex2d")],Ut.prototype,"dropletTex",2),wt([W.shaderProp("uMistTex","tex2d")],Ut.prototype,"mistTex",2),wt([W.shaderProp("uSmoothRaindrop","vec2")],Ut.prototype,"smoothRaindrop",2),wt([W.shaderProp("uRefractParams","vec2")],Ut.prototype,"refractParams",2),wt([W.shaderProp("uLightPos","vec4")],Ut.prototype,"lightPos",2),wt([W.shaderProp("uDiffuseColor","color")],Ut.prototype,"diffuseLight",2),wt([W.shaderProp("uSpecularParams","vec4")],Ut.prototype,"specularParams",2),wt([W.shaderProp("uBump","float")],Ut.prototype,"bump",2);var Dr=class extends W.SimpleTexturedMaterial(new W.Shader($t,we,{blendRGB:[W.Blending.Zero,W.Blending.OneMinusSrcAlpha],blendAlpha:[W.Blending.Zero,W.Blending.OneMinusSrcAlpha]})){constructor(){super(...arguments),this.eraserSize=W.vec2(.93,1)}};wt([W.shaderProp("uEraserSmooth","vec2")],Dr.prototype,"eraserSize",2);var Ee=W.SimpleTexturedMaterial(new W.Shader($t,me,{blend:[W.Blending.One,W.Blending.One]})),nr=class extends W.SimpleTexturedMaterial(new W.Shader($t,be,{blend:[W.Blending.SrcAlpha,W.Blending.OneMinusSrcAlpha]})){constructor(){super(...arguments),this.mistColor=new W.Color(.01,.01,.01,1),this.mistTex=null}};wt([W.shaderProp("uMistColor","color")],nr.prototype,"mistColor",2),wt([W.shaderProp("uMistTex","tex2d")],nr.prototype,"mistTex",2);var Be=class{constructor(r){this.raindropTex=null,this.originalBackground=null,this.matrlCompose=new Ut,this.matrlRaindrop=new Ar,this.matrlDroplet=new Wt,this.matrlErase=new Dr,this.matrlMist=new Ee,this.matrlMistCompose=new nr,this.mesh=W.MeshBuilder.quad(),this.raindropBuffer=new W.RenderBuffer({size:"float",modelMatrix:"mat4"},3e3),this.renderer=new W.ZograRenderer(r.canvas),this.renderer.gl.getExtension("EXT_color_buffer_float"),this.options=r,this.projectionMatrix=W.mat4.ortho(0,r.width,0,r.height,1,-1),this.raindropComposeTex=new W.RenderTexture(r.width,r.height,!1),this.background=new W.RenderTexture(r.width,r.height,!1),this.dropletTexture=new W.RenderTexture(r.width,r.height,!1),this.blurryBackground=new W.RenderTexture(r.width,r.height,!1),this.mistBackground=new W.RenderTexture(r.width,r.height,!1),this.mistTexture=new W.RenderTexture(r.width,r.height,!1,W.TextureFormat.R16F),this.blurRenderer=new fe(this.renderer),this.renderer.setViewProjection(W.mat4.identity(),this.projectionMatrix)}async loadAssets(){this.raindropTex=await W.TextureImporter.buffer(he).then(r=>r.tex2d()),this.matrlRaindrop.texture=this.raindropTex,this.matrlDroplet.texture=this.raindropTex,await this.reloadBackground()}async reloadBackground(){var u;(u=this.originalBackground)==null||u.destroy(),typeof this.options.background=="string"?(this.originalBackground=await W.TextureImporter.url(this.options.background).then(I=>I.tex2d({wrapMpde:W.WrapMode.Clamp})),this.originalBackground.wrapMode=W.WrapMode.Clamp,this.originalBackground.updateParameters()):(this.originalBackground=new W.Texture2D,this.originalBackground.setData(this.options.background),this.originalBackground.updateParameters());let[r,o]=W.Utils.imageResize(this.originalBackground.size,this.background.size,W.Utils.ImageSizing.Cover);this.renderer.blit(this.originalBackground,this.background,this.renderer.assets.materials.blitCopy,r,o),this.background.generateMipmap(),this.blurBackground()}resize(){this.renderer.setSize(this.options.width,this.options.height),this.projectionMatrix=W.mat4.ortho(0,this.options.width,0,this.options.height,1,-1),this.renderer.setViewProjection(W.mat4.identity(),this.projectionMatrix),this.raindropComposeTex.resize(this.options.width,this.options.height),this.background.resize(this.options.width,this.options.height),this.dropletTexture.resize(this.options.width,this.options.height),this.blurryBackground.resize(this.options.width,this.options.height),this.mistBackground.resize(this.options.width,this.options.height),this.mistTexture.resize(this.options.width,this.options.height);let[r,o]=W.Utils.imageResize(this.originalBackground.size,this.background.size,W.Utils.ImageSizing.Cover);this.renderer.blit(this.originalBackground,this.background,this.renderer.assets.materials.blitCopy,r,o),this.background.generateMipmap(),this.blurBackground()}render(r,o){this.drawDroplet(o),this.drawMist(o.dt),this.drawRaindrops(r),this.renderer.setRenderTarget(W.RenderTarget.CanvasTarget),this.renderer.clear(W.Color.black),this.drawBackground(),this.matrlCompose.background=this.blurryBackground,this.matrlCompose.backgroundSize=W.vec4(this.options.width,this.options.height,1/this.options.width,1/this.options.height),this.matrlCompose.raindropTex=this.raindropComposeTex,this.matrlCompose.dropletTex=this.dropletTexture,this.matrlCompose.mistTex=this.mistTexture,this.matrlCompose.smoothRaindrop=W.vec2(...this.options.smoothRaindrop),this.matrlCompose.refractParams=W.vec2(this.options.refractBase,this.options.refractScale),this.matrlCompose.lightPos=W.vec4(...this.options.raindropLightPos),this.matrlCompose.diffuseLight=new W.Color(...this.options.raindropDiffuseLight,this.options.raindropShadowOffset),this.matrlCompose.specularParams=W.vec4(...this.options.raindropSpecularLight,this.options.raindropSpecularShininess),this.matrlCompose.bump=this.options.raindropLightBump,this.renderer.blit(null,W.RenderTarget.CanvasTarget,this.matrlCompose)}blurBackground(){this.options.mist?(this.blurRenderer.init(this.background),this.blurRenderer.downSample(this.background,Math.max(this.options.backgroundBlurSteps,this.options.mistBlurStep)),this.options.backgroundBlurSteps===this.options.mistBlurStep?(this.blurRenderer.upSample(this.options.backgroundBlurSteps,this.blurryBackground),this.renderer.blit(this.blurryBackground,this.mistBackground)):this.options.mistBlurStep>this.options.backgroundBlurSteps?(this.blurRenderer.upSample(this.options.backgroundBlurSteps,this.blurryBackground),this.blurRenderer.upSample(this.options.mistBlurStep,this.mistBackground)):(this.blurRenderer.upSample(this.options.mistBlurStep,this.mistBackground),this.blurRenderer.upSample(this.options.backgroundBlurSteps,this.blurryBackground))):this.blurRenderer.blur(this.background,this.options.backgroundBlurSteps,this.blurryBackground)}drawMist(r){!this.options.mist||(this.matrlMist.color.r=r/this.options.mistTime,this.renderer.blit(this.renderer.assets.textures.default,this.mistTexture,this.matrlMist))}drawBackground(){this.renderer.blit(this.blurryBackground,W.RenderTarget.CanvasTarget),this.options.mist&&(this.matrlMistCompose.mistTex=this.mistTexture,this.matrlMistCompose.texture=this.mistBackground,this.matrlMistCompose.mistColor=new W.Color(...this.options.mistColor),this.renderer.blit(this.mistBackground,W.RenderTarget.CanvasTarget,this.matrlMistCompose))}drawRaindrops(r){r.length>this.raindropBuffer.length&&this.raindropBuffer.resize(this.raindropBuffer.length*2),this.renderer.setRenderTarget(this.raindropComposeTex),this.renderer.clear(W.Color.black.transparent());for(let o=0;o<r.length;o++){let u=r[o],I=W.mat4.rts(W.quat.identity(),u.pos.toVec3(),u.size.toVec3(1));this.raindropBuffer[o].modelMatrix.set(I),this.raindropBuffer[o].size[0]=u.size.x/100}switch(this.options.raindropCompose){case"smoother":this.matrlRaindrop.shader.setPipelineStates({blendRGB:[W.Blending.OneMinusDstColor,W.Blending.OneMinusSrcColor]}),this.matrlDroplet.shader.setPipelineStates({blendRGB:[W.Blending.OneMinusDstColor,W.Blending.OneMinusSrcColor]});break;case"harder":this.matrlRaindrop.shader.setPipelineStates({blendRGB:[W.Blending.One,W.Blending.OneMinusSrcAlpha]}),this.matrlDroplet.shader.setPipelineStates({blendRGB:[W.Blending.One,W.Blending.OneMinusSrcAlpha]});break}this.renderer.drawMeshInstance(this.mesh,this.raindropBuffer,this.matrlRaindrop,r.length),this.matrlErase.eraserSize=W.vec2(...this.options.raindropEraserSize),this.renderer.blit(this.raindropComposeTex,this.dropletTexture,this.matrlErase),this.options.mist&&this.renderer.blit(this.raindropComposeTex,this.mistTexture,this.matrlErase)}drawDroplet(r){this.renderer.setRenderTarget(this.dropletTexture);let o=this.options.dropletsPerSeconds*r.dt;this.matrlDroplet.spawnRect=W.vec4(0,0,this.options.width,this.options.height),this.matrlDroplet.sizeRange=W.vec2(...this.options.dropletSize),this.matrlDroplet.seed=Ft(0,133),this.renderer.drawMeshProceduralInstance(this.mesh,this.matrlDroplet,o)}},Nt=Jt(Zt());function Te(r,o,u){return r+(o-r)*u}var fr=class{constructor(r,o,u,I=1){this.density=1,this.velocity=Nt.vec2.zero(),this.destroied=!1,this._mass=0,this._size=Nt.vec2.zero(),this.resistance=0,this.shifting=0,this.nextRandomTime=0,this.pos=o,this.simulator=r,this.density=I,this.lastTrailPos=o.clone(),this.nextTrailDistance=Ft(...r.options.trailDistance),this.spread=Nt.vec2(r.options.initialSpread),this.mass=(u*I)**2}get mass(){return this._mass}set mass(r){this._mass=r;let o=Math.sqrt(r)/this.density;this._size.x=(this.spread.x+1)*o,this._size.y=(this.spread.y+1)*o}get size(){return this._size}get mergeDistance(){return this.size.x*(1+this.spread.x)*.16*this.simulator.options.colliderSize}get options(){return this.simulator.options}updateRaindrop(r){this.nextRandomTime<=r.total&&(this.nextRandomTime=r.total+Ft(...this.simulator.options.motionInterval),this.randomMotion()),this.mass-=this.simulator.options.evaporate*r.dt;let o=(this.options.gravity*this.mass-this.resistance)/this.mass;this.velocity.y-=o*r.dt,this.velocity.y>0&&(this.velocity.y=0),this.velocity.x=Math.abs(this.velocity.y)*this.shifting,this.pos.x+=this.velocity.x*r.dt,this.pos.y+=this.velocity.y*r.dt;let u=this.simulator.options.velocitySpread*2*Math.atan(Math.abs(this.velocity.y*.005))/Math.PI;this.spread.y=Math.max(this.spread.y,u),this.spread.x*=Math.pow(this.simulator.options.shrinkRate,r.dt),this.spread.y*=Math.pow(this.simulator.options.shrinkRate,r.dt),Nt.Vector2.distanceSquared(this.lastTrailPos,this.pos)>this.nextTrailDistance*this.nextTrailDistance&&this.split()}split(){if(this.mass<1e3)return;let r=this.size.x*Ft(...this.simulator.options.trailDropSize),o=Nt.plus(Nt.vec2(Ft(-5,5),this.size.y/4),this.pos),u=this.simulator.spawner.spawn(o.clone(),r,this.simulator.options.trailDropDensity);u.spread=Nt.vec2(.1,Math.abs(this.velocity.y)*.01*this.options.trailSpread),u.parent=this,this.mass-=u.mass,this.simulator.add(u),this.lastTrailPos=this.pos.clone(),this.nextTrailDistance=Ft(...this.simulator.options.trailDistance)}randomMotion(){let r=Te(...this.simulator.options.spawnSize,1-this.simulator.options.slipRate)**2*4;this.resistance=Ft(0,1)*this.options.gravity*r,this.shifting=pe()*Ft(...this.simulator.options.xShifting)}merge(r){let o=Nt.mul(this.velocity,this.mass),u=Nt.mul(r.velocity,r.mass),I=Nt.plus(o,u);this.mass+=r.mass,this.velocity=Nt.div(I,this.mass)}},Se=class{constructor(r,o){this.currentTime=0,this.nextSpawn=0,this.simulator=r}get interval(){return this.simulator.options.spawnInterval}get size(){return this.simulator.options.spawnSize}get spawnRect(){return this.simulator.options.viewport}update(r){return this.currentTime+=r,this}*trySpawn(){for(;this.currentTime>=this.nextSpawn;){let r=Ft(...this.size),o=ve(this.spawnRect);this.nextSpawn+=Ft(...this.interval),yield new fr(this.simulator,o,r)}this.currentTime>=this.nextSpawn}spawn(r,o,u=1){return new fr(this.simulator,r,o,u)}},De=class extends Array{push(...r){return super.push(...r)}add(r){let o=super.push(r);r.gridIdx=o-1,r.grid=this}delete(r){this[r.gridIdx]=this[this.length-1],this[r.gridIdx].gridIdx=r.gridIdx,this.length--,r.gridIdx=-1,r.grid=void 0}},Oe=class{constructor(r){this.raindrops=[],this.grid=[],this.options=r,this.spawner=new Se(this,r),this.resize()}get gridSize(){return this.options.spawnSize[1]*.3}resize(){let r=Math.ceil(this.options.viewport.size.x/this.gridSize),o=Math.ceil(this.options.viewport.size.y/this.gridSize),u=0;this.grid.length<r*o&&(u=this.grid.length,this.grid.length=r*o);for(let I=u;I<this.grid.length;I++)this.grid[I]=new De}gridAt(r,o){if(r<0||o<0)return;let u=Math.ceil((this.options.viewport.xMax-this.options.viewport.xMin)/this.gridSize),I=o*u+r;if(!(I>=this.grid.length))return this.grid[I]}gridAtWorldPos(r,o){return this.gridAt(...this.worldToGrid(r,o))}worldToGrid(r,o){let u=Math.floor(r/this.gridSize),I=Math.floor(o/this.gridSize);return[u,I]}add(r){this.raindrops.push(r);let o=this.gridAtWorldPos(r.pos.x,r.pos.y);o&&(o.add(r),r.gridIdx=o.length-1)}update(r){var o;if(this.raindrops.length<=this.options.spawnLimit)for(let u of this.spawner.update(r.dt).trySpawn())this.raindrops.push(u);this.raindropUpdate(r),this.collisionUpdate();for(let u=0;u<this.raindrops.length;u++)this.raindrops[u].destroied&&((o=this.raindrops[u].grid)==null||o.delete(this.raindrops[u]),this.raindrops[u]=this.raindrops[this.raindrops.length-1],this.raindrops.length--)}raindropUpdate(r){var o;for(let u=0;u<this.raindrops.length;u++){let I=this.raindrops[u];if(I.destroied||(I.updateRaindrop(r),I.pos.y<-100&&(I.destroied=!0),I.destroied))continue;let[w,C]=this.worldToGrid(I.pos.x,I.pos.y),s=this.gridAt(w,C);s!==I.grid&&((o=I.grid)==null||o.delete(I),s==null||s.add(I),I.grid=s)}}collisionUpdate(){for(let r=0;r<this.raindrops.length;r++){let o=this.raindrops[r];if(o.destroied)continue;let[u,I]=this.worldToGrid(o.pos.x,o.pos.y);for(let w=-1;w<=1;w++)for(let C=-1;C<=1;C++){let s=this.gridAt(u+w,I+C);if(s)for(let l of s){let p=l===o,E=l.parent===o||o.parent===l,v=o.parent&&o.parent===l.parent;if(l.destroied||E||v||p)continue;let D=o.pos.x-l.pos.x,F=o.pos.y-l.pos.y;Math.sqrt(D*D+F*F)-o.mergeDistance-l.mergeDistance<0&&(o.mass>=l.mass?(o.merge(l),l.destroied=!0):(l.merge(o),o.destroied=!0))}}}}},Ue=class{constructor(r){this.animHandle=0;let o=r.canvas,u={spawnInterval:[.1,.1],spawnSize:[60,100],spawnLimit:2e3,viewport:new jt.Rect(jt.vec2.zero(),jt.vec2(o.width,o.height)),canvas:o,width:o.width,height:o.height,background:"",gravity:2400,slipRate:0,motionInterval:[.1,.4],colliderSize:1,trailDropDensity:.2,trailDistance:[20,30],trailDropSize:[.3,.5],trailSpread:.6,initialSpread:.5,shrinkRate:.01,velocitySpread:.3,evaporate:10,xShifting:[0,.1],backgroundBlurSteps:3,mist:!0,mistColor:[.01,.01,.01,1],mistBlurStep:4,mistTime:10,dropletsPerSeconds:500,dropletSize:[10,30],smoothRaindrop:[.96,.99],refractBase:.4,refractScale:.6,raindropCompose:"smoother",raindropLightPos:[-1,1,2,0],raindropDiffuseLight:[.2,.2,.2],raindropShadowOffset:.8,raindropEraserSize:[.93,1],raindropSpecularLight:[0,0,0],raindropSpecularShininess:256,raindropLightBump:1};this.options={...u,...r},this.simulator=new Oe(this.options),this.renderer=new Be(this.options)}async start(){await this.renderer.loadAssets();let r=o=>{let u={dt:.03,total:o/1e3};this.update(u),this.animHandle=requestAnimationFrame(r)};this.animHandle=requestAnimationFrame(r)}stop(){cancelAnimationFrame(this.animHandle)}resize(r,o){this.options.width=r,this.options.height=o,this.options.viewport=new jt.Rect(jt.vec2.zero(),jt.vec2(r,o)),this.renderer.resize()}async setBackground(r){this.renderer.options.background=r,await this.renderer.reloadBackground()}update(r){this.simulator.update(r),this.renderer.render(this.simulator.raindrops,r)}},Le=Ue;const Ge=Ur({__name:"RainDrop",setup(r){const o=Lr(),u=Gr(),{t:I}=Nr();let w,C=!1;Fr(async()=>{o.value.width=window.innerWidth,o.value.height=window.innerHeight;const E={canvas:o.value};document.querySelector(".global-bg-img")&&u.realBackgroundURL&&(E.background=u.realBackgroundURL);try{w=new Le(E),await w.start(),window.addEventListener("resize",s)}catch{C=!0,p()}}),kr(()=>{window.removeEventListener("resize",s)});function s(){if(w){const E=o.value.getBoundingClientRect();w.resize(E.width,E.height)}}let l;function p(){l&&clearTimeout(l),l=setTimeout(()=>{_r({title:I("\u9519\u8BEF"),type:"error",message:I("\u96E8\u6EF4\u7279\u6548\u5B9E\u73B0\u5931\u8D25, \u8BF7\u786E\u4FDD\u58C1\u7EB8\u5730\u5740\u5141\u8BB8\u8DE8\u57DF")})},300)}return Vr(()=>u.realBackgroundURL,async()=>{if(w&&document.querySelector(".global-bg-img")&&u.realBackgroundURL)try{await w.setBackground(u.realBackgroundURL),C&&(await w.start(),C=!1)}catch{p()}}),(E,v)=>(jr(),zr("canvas",{class:"bg-effect-canvas",ref_key:"bgEffectCanvas",ref:o},null,512))}});var Fe=Or(Ge,[["__scopeId","data-v-9edacb2a"]]);export{Fe as default};
