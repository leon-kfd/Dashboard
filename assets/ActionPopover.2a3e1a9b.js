import{_ as $,d as b,r as s,x as X,y as Y,w as D,o as m,c as N,f as w,b as V,h as I,z as L,g as O,A as M,C as U,D as j,E as q,p as F}from"./index.41c23f99.js";import{g as z}from"./direction.8b21c0ae.js";const G=b({__name:"ActionPopover",props:{popoverCustomClass:{type:String},closeOnClickOutside:{type:Boolean,default:!0},zIndex:{type:Number,default:2001}},emits:["opend","closed"],setup(d,{expose:P,emit:h}){const S=d,t=s(!1),l=s(!1),p=s(""),g=s();X(()=>{document.addEventListener("click",_)}),Y(()=>{document.removeEventListener("click",_)});const _=e=>{!S.closeOnClickOutside||t.value&&!g.value.contains(e.target)&&(t.value=!1)},n=s({width:200,height:200,top:0,left:0}),x=async(e,o)=>{setTimeout(()=>{if(!e.actionSetting)return;const{actionSetting:a}=e,{actionType:f,actionClickType:c,actionClickValue:i}=a;if(f===1&&c===1){const{w:r,h:u,direction:y}=i,[C,k,B,E]=z(o,{width:r||200,height:u||200},y);n.value={width:r||200,height:u||200,left:C,top:k},p.value=`${B-C}px ${E-k}px`,t.value=!0,l.value=y===0}})},v=()=>{t.value=!1,l.value=!1},T=(e,o)=>{t.value?v():x(e,o)},A=({w:e,h:o,direction:a},f)=>{setTimeout(()=>{const[c,i,r,u]=z(f,{width:e||200,height:o||200},a);n.value={width:e||200,height:o||200,left:c,top:i},p.value=`${r-c}px ${u-i}px`,t.value=!0,l.value=a===0})};return D(()=>t.value,e=>{h(e?"opend":"closed")}),P({open:x,close:v,toggle:T,defaultOpen:A}),(e,o)=>{const a=F("Icon");return m(),N(q,{to:"body"},[w(j,{name:"zoomIn"},{default:V(()=>[t.value?(m(),I("div",{key:0,ref_key:"actionPopover",ref:g,class:M(["action-popover",d.popoverCustomClass]),style:U({width:n.value.width+"px",height:n.value.height+"px",top:n.value.top+"px",left:n.value.left+"px",transformOrigin:p.value,zIndex:d.zIndex})},[L(e.$slots,"default",{},void 0,!0),l.value?(m(),I("div",{key:0,class:"close",onClick:v},[w(a,{name:"close"})])):O("",!0)],6)):O("",!0)]),_:3})])}}});var K=$(G,[["__scopeId","data-v-50df7cdc"]]);export{K as default};
