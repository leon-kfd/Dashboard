import{_ as S,d as A,r as i,u as I,G as L,I as z,x as W,o as n,h as o,e as a,t as $,f as v,b as j,F as f,j as C,g as D,p as x}from"./index.df1344dc.js";const N={class:"img-wrapper"},P=["src"],T={class:"mask"},F=["onClick"],H=["onClick"],M=A({__name:"PersonalWallpaper",setup(O){const p=i(!1),k=()=>{p.value=!0},h=I(),y=L(()=>h.wallpaperCollectionList),t=i([]),d=i(1),g=18,m=i(!0),{t:B}=z(),w=()=>{const e=y.value.slice((d.value-1)*g,d.value*g).map(l=>(l.includes("&w=")||l.includes("&h=")?(l=l.replace(/&w=\d+/,"&w=256"),l=l.replace(/&h=\d+/,"&h=144")):l.includes("sinaimg.cn")?l=l.replace("large","small"):l.includes("bing.com")&&(l=l.replace("1920x1080","320x240")),l));e.length?t.value.push(...e):m.value=!1};let c;const E=e=>{if(!m.value)return;const l=e.target;c&&(clearTimeout(c),c=null),c=setTimeout(()=>{const{scrollTop:r,scrollHeight:_,clientHeight:s}=l,u=_-r-s<=30;u&&(console.log("isReachBottom",u),d.value++,w())},200)},b=e=>{e.includes("&w=")||e.includes("&h=")?(e=e.replace(/&w=\d+/,"&w=1920"),e=e.replace(/&h=\d+/,"&h=1080")):e.includes("sinaimg.cn")?e=e.replace("small","large"):e.includes("bing.com")&&(e=e.replace("320x240","1920x1080")),window.open(e)},V=e=>{if(window.confirm(B("\u786E\u5B9A\u8981\u5220\u9664\u6240\u9009\u9879?"))){const l=t.value.indexOf(e);l>-1&&(t.value.splice(l,1),h.wallpaperCollectionList.splice(l,1))}};return W(()=>{w()}),(e,l)=>{const r=x("Icon"),_=x("easy-dialog");return n(),o(f,null,[a("button",{type:"button",class:"btn btn-primary btn-small",style:{margin:"0","margin-bottom":"10px"},onClick:k},$(e.$t("\u67E5\u770B\u4E2A\u4EBA\u58C1\u7EB8\u5E93")),1),v(_,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=s=>p.value=s),title:e.$t("\u4E2A\u4EBA\u58C1\u7EB8\u5E93"),width:"min(760px, 94vw)",height:"min(480px, 80vh)"},{default:j(()=>[a("div",{class:"content-wrapper",onScroll:E},[(n(!0),o(f,null,C(t.value,s=>(n(),o("div",{class:"item",key:s},[a("div",N,[s?(n(),o("img",{key:0,src:s,loading:"lazy"},null,8,P)):D("",!0),a("div",T,[a("div",{class:"icon-jump",onClick:u=>b(s)},[v(r,{name:"jump",size:"18"})],8,F),a("div",{class:"icon-delete",onClick:u=>V(s)},[v(r,{name:"delete",size:"18"})],8,H)])])]))),128)),(n(),o(f,null,C(4,s=>a("div",{class:"item-fake",key:s})),64))],32)]),_:1},8,["modelValue","title"])],64)}}});var G=S(M,[["__scopeId","data-v-3350f7e1"]]);export{G as default};
