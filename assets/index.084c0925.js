import{_ as x,d as b,u as I,H as _,r as h,z as A,A as C,w as L,I as F,o,k as n,h as s,D as l,j as d,F as z,n as T,t as w,x as j,y as B,K as D}from"./index.c92da63a.js";const E=e=>(j("data-v-4f50463a"),e=e(),B(),e),$={class:"weibo"},N=E(()=>s("div",{class:"logo-text"},"\u5FAE\u535A\u70ED\u641C",-1)),U={key:1,class:"loading"},V={key:2,class:"error"},q={key:3,class:"list"},H={class:"num",style:{width:"24px",height:"24px"}},K=["src"],M={class:"title"},O=["href"],P={key:0,class:"count"},R={class:"icon",style:{width:"24px",height:"24px"}},W=["src"],G="https://h5.sinaimg.cn/m/weibo-lite/img/pwalogo.417d1674.svg",J=b({__name:"index",props:{componentSetting:{type:Object,required:!0}},setup(e){const i=e,y=I(),S=_(()=>y.isLock),g=h([]),r=h(!1),u=h(!1),m=async()=>{try{r.value=!0,u.value=!1;const a=await fetch(`${D}/api/weiboList?limit=${i.componentSetting.limit||10}`),{list:v}=await a.json();g.value=v.map(t=>({num:t.pic,id:t.desc,title:t.desc,icon:t.icon,link:t.scheme,count:~~(t.desc_extr/1e4)}))}catch(a){u.value=!0,console.error(a)}finally{r.value=!1}};let c;function p(){m(),c&&window.clearInterval(c),c=window.setInterval(()=>{m()},i.componentSetting.duration*60*1e3)}A(()=>p()),C(()=>window.clearInterval(c)),L(()=>[i.componentSetting.duration,i.componentSetting.limit],()=>p());const f=_(()=>F(i.componentSetting.position)),k=()=>{i.componentSetting.clickActionType===1?p():i.componentSetting.clickActionType===2&&window.open("https://weibo.com/")};return(a,v)=>(o(),n("div",{class:"wrapper material-weibolist",style:l({fontSize:e.componentSetting.textFontSize+"px",color:e.componentSetting.textColor,textShadow:e.componentSetting.textShadow,padding:e.componentSetting.padding+"px",fontFamily:e.componentSetting.fontFamily,...f.value})},[s("div",$,[e.componentSetting.showTitle!==!1?(o(),n("div",{key:0,class:"logo",style:l({cursor:e.componentSetting.clickActionType?"pointer":"default"}),onClick:k},[s("img",{src:G,alt:"Weibo",style:l({filter:`drop-shadow(${e.componentSetting.iconShadow})`})},null,4),N],4)):d("",!0),r.value?(o(),n("div",U,"Loading...")):u.value?(o(),n("div",V,"Something error!")):(o(),n("div",q,[(o(!0),n(z,null,T(g.value,t=>(o(),n("div",{class:"list-item",key:t.id},[s("div",H,[t.num?(o(),n("img",{key:0,src:t.num,style:{width:"100%",height:"100%"}},null,8,K)):d("",!0)]),s("div",M,[s("a",{href:t.link,target:"_blank",style:l(S.value?"":"pointer-events: none")},w(t.title),13,O)]),t.count?(o(),n("div",P,w(t.count)+"w",1)):d("",!0),s("div",R,[t.icon?(o(),n("img",{key:0,src:t.icon,style:{width:"100%",height:"100%"}},null,8,W)):d("",!0)])]))),128))]))])],4))}});var X=x(J,[["__scopeId","data-v-4f50463a"]]);export{X as default};
