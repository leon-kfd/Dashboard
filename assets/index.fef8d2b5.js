import{_ as P,d as $,V as K,I as O,u as J,r as n,w as D,a1 as Q,x as X,y as Y,G as F,H as Z,o as f,i as S,N as d,P as g,C as v,h as q,f as o,t as z,R as ee,J as te,K as ne,s as oe,v as ae}from"./index.da282a5f.js";const A=e=>(oe("data-v-f98a0dd0"),e=e(),ae(),e),ie=["src"],ce={class:"quote-left"},se=A(()=>o("svg",{viewBox:"0 0 1024 1024"},[o("path",{d:"M928 512h-160v-128c0-70.6 57.4-128 128-128h16c26.6 0 48-21.4 48-48V112c0-26.6-21.4-48-48-48h-16c-176.8 0-320 143.2-320 320v480c0 53 43 96 96 96h256c53 0 96-43 96-96V608c0-53-43-96-96-96z m-576 0H192v-128c0-70.6 57.4-128 128-128h16c26.6 0 48-21.4 48-48V112c0-26.6-21.4-48-48-48h-16C143.2 64 0 207.2 0 384v480c0 53 43 96 96 96h256c53 0 96-43 96-96V608c0-53-43-96-96-96z"})],-1)),le=[se],re={class:"quote-right"},ue=A(()=>o("svg",{viewBox:"0 0 1024 1024"},[o("path",{d:"M928 64H672c-53 0-96 43-96 96v256c0 53 43 96 96 96h160v128c0 70.6-57.4 128-128 128h-16c-26.6 0-48 21.4-48 48v96c0 26.6 21.4 48 48 48h16c176.8 0 320-143.2 320-320V160c0-53-43-96-96-96z m-576 0H96C43 64 0 107 0 160v256c0 53 43 96 96 96h160v128c0 70.6-57.4 128-128 128h-16c-26.6 0-48 21.4-48 48v96c0 26.6 21.4 48 48 48h16c176.8 0 320-143.2 320-320V160c0-53-43-96-96-96z"})],-1)),me=[ue],de=$({__name:"index",props:{componentSetting:{type:Object,required:!0},element:{type:Object,required:!0}},setup(e){const t=e;K(s=>({"81a6fde8":R.value}));const{t:y}=O(),c=J(),l=n(),r=n(),u=n(),m=n(""),w=n(""),k=n(""),a=n(""),x=n(""),b=n(""),B=n(!1),p=async()=>{try{const s=await fetch(`${ee}/api/movieLines`),{name:I,img:E,img1:T,img2:W,img3:H,img4:N,link:U,quotes:j}=await s.json();m.value=j,w.value=I,k.value=E.replace("s_ratio_poster","m");const V=[T,T,W,H,N].filter(Boolean),G=~~(Math.random()*V.length),h=V[G];window.innerWidth<768?a.value=h.replace("original","w780"):window.innerWidth<1460?a.value=h.replace("original","w1280"):a.value=h,t.componentSetting.asBackground&&c.updateState({key:"realBackgroundURL",value:a.value}),x.value=U,b.value=`
      background-image: radial-gradient(
        ellipse at ${~~(Math.random()*50)+25}% ${~~(Math.random()*50)+25}%,
        rgba(0, 0, 0,.25),
        rgba(0, 04, 0,.75), 
        rgb(0, 0, 0));`}catch{}};let i;const C=()=>{const s=(t.componentSetting.duration||5)*60*1e3;i&&(window.clearInterval(i),i=null),i=window.setInterval(p,s)};D(()=>t.componentSetting.duration,()=>C(),{immediate:!0}),Q(()=>{t.componentSetting.asBackground&&(c.resetGlobalBackground(),c.updateGlobalKey({key:"backgroundFilter",value:t.componentSetting.posterFilter}),c.updateState({key:"realBackgroundURL",value:a.value}))}),X(()=>p()),Y(()=>i&&window.clearInterval(i));const L=F(()=>Z(t.componentSetting.position)),R=F(()=>t.componentSetting.themeColor);D(()=>m.value,()=>{l.value&&l.value.animate&&l.value.animate({opacity:[0,1]},400),r.value&&r.value.animate&&r.value.animate({opacity:[0,1]},400)});const _=()=>{B.value=!0,u.value&&u.value.animate&&u.value.animate({opacity:[0,1]},400)},M=()=>{!c.isLock||(t.componentSetting.clickActionType===1?(p(),C()):t.componentSetting.clickActionType===2?window.open(x.value):t.componentSetting.clickActionType===3&&te(m.value)&&ne({title:y("\u63D0\u793A"),type:"success",message:y("\u590D\u5236\u6210\u529F")}))};return(s,I)=>(f(),S("div",{class:"wrapper material-movielines",style:v({fontSize:e.componentSetting.textFontSize+"px",color:e.componentSetting.textColor,textShadow:e.componentSetting.textShadow,padding:e.componentSetting.padding+"px",fontFamily:e.componentSetting.fontFamily,...L.value,borderRadius:e.element.borderRadius+"px"})},[e.componentSetting.showPoster&&!e.componentSetting.asBackground?d((f(),S("img",{key:0,class:"bg",ref_key:"movieBg",ref:u,src:e.componentSetting.posterType===2?a.value:k.value,style:v({filter:e.componentSetting.posterFilter}),onLoad:_},null,44,ie)),[[g,B.value]]):q("",!0),e.componentSetting.useSpotlight?(f(),S("div",{key:1,class:"bg-effect-box",style:v(b.value)},null,4)):q("",!0),o("blockquote",{class:"blockquote",style:v({background:e.componentSetting.showDecoration?"":"none",maxWidth:e.componentSetting.maxWidth?e.componentSetting.maxWidth+"px":"",cursor:e.componentSetting.clickActionType?"pointer":"default"}),onClick:M},[o("p",{class:"lines",ref_key:"linesText",ref:l},z(m.value),513),d(o("p",{class:"cite",ref_key:"movieText",ref:r},"\u300E "+z(w.value)+" \u300F",513),[[g,e.componentSetting.showCite]]),d(o("div",ce,le,512),[[g,e.componentSetting.showDecoration]]),d(o("div",re,me,512),[[g,e.componentSetting.showDecoration]])],4)],4))}});var ve=P(de,[["__scopeId","data-v-f98a0dd0"]]);export{ve as default};
