import{_ as b,d as X,r as i,x as Y,y as D,w as N,b as V,o as h,c as H,g as T,e as M,i as I,z as U,h as O,A as W,C as j,D as q,E as F}from"./index.446d5233.js";import{g as P}from"./direction.8b21c0ae.js";const G=X({__name:"ActionPopover",props:{popoverCustomClass:{type:String},closeOnClickOutside:{type:Boolean,default:!0},zIndex:{type:Number,default:2001}},emits:["opend","closed"],setup(v,{expose:E,emit:g}){const S=v,n=i(!1),a=i(!1),d=i(""),w=i();Y(()=>{document.addEventListener("click",_)}),D(()=>{document.removeEventListener("click",_)});const _=e=>{!S.closeOnClickOutside||n.value&&!w.value.contains(e.target)&&(n.value=!1)},t=i({width:200,height:200,top:0,left:0});let p=null;const x=()=>{p&&clearTimeout(p),p=setTimeout(()=>{const e=(window.innerHeight-t.value.height)/2,o=(window.innerWidth-t.value.width)/2;t.value.top=e,t.value.left=o},200)},y=async(e,o)=>{setTimeout(()=>{if(!e.actionSetting)return;const{actionSetting:s}=e,{actionType:m,actionClickType:l,actionClickValue:r}=s;if(m===1&&l===1){const{w:c,h:u,direction:C}=r,[k,z,L,$]=P(o,{width:c||200,height:u||200},C);t.value={width:c||200,height:u||200,left:k,top:z},d.value=`${L-k}px ${$-z}px`,n.value=!0,a.value=C===0,a.value&&window.addEventListener("resize",x,!0)}})},f=()=>{a.value&&window.removeEventListener("resize",x,!0),n.value=!1,a.value=!1},A=(e,o)=>{n.value?f():y(e,o)},B=({w:e,h:o,direction:s},m)=>{setTimeout(()=>{const[l,r,c,u]=P(m,{width:e||200,height:o||200},s);t.value={width:e||200,height:o||200,left:l,top:r},d.value=`${c-l}px ${u-r}px`,n.value=!0,a.value=s===0})};return N(()=>n.value,e=>{g(e?"opend":"closed")}),E({open:y,close:f,toggle:A,defaultOpen:B}),(e,o)=>{const s=V("Icon");return h(),H(F,{to:"body"},[T(q,{name:"zoomIn"},{default:M(()=>[n.value?(h(),I("div",{key:0,ref_key:"actionPopover",ref:w,class:W(["action-popover",v.popoverCustomClass]),style:j({width:t.value.width+"px",height:t.value.height+"px",top:t.value.top+"px",left:t.value.left+"px",transformOrigin:d.value,zIndex:v.zIndex})},[U(e.$slots,"default",{},void 0,!0),a.value?(h(),I("div",{key:0,class:"close",onClick:f},[T(s,{name:"close"})])):O("",!0)],6)):O("",!0)]),_:3})])}}});var Q=b(G,[["__scopeId","data-v-362fa65f"]]);export{Q as default};
