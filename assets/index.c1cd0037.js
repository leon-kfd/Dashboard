import{_ as k,d as j,u as x,H as S,r as u,z as L,A as C,w as F,I as b,o,k as i,h as s,D as p,j as A,F as I,n as z,t as _,U as T}from"./index.7c50bf55.js";const $={class:"juejin"},B={key:0,class:"logo"},D={key:1,class:"loading"},U={key:2,class:"error"},N={key:3,class:"list"},V={class:"title"},q=["href"],E={class:"like"},H="https://sf3-scmcdn2-tos.pstatp.com/xitu_juejin_web/img/logo.a7995ad.svg",J=j({__name:"index",props:{componentSetting:{type:Object,required:!0}},setup(t){const n=t,f=x(),h=S(()=>f.isLock),m=u([]),l=u(!1),r=u(!1),g=async()=>{try{l.value=!0,r.value=!1;const c=await fetch(`${T}/api/juejinList?limit=${n.componentSetting.limit||10}`),{list:v}=await c.json();m.value=v.map(e=>({id:e.article_id,title:e.title,like:e.digg_count,view:e.view_count}))}catch(c){r.value=!0,console.error(c)}finally{l.value=!1}};let a;function d(){g(),a&&window.clearInterval(a),a=window.setInterval(()=>{g()},n.componentSetting.duration*60*1e3)}L(()=>d()),C(()=>window.clearInterval(a)),F(()=>[n.componentSetting.duration,n.componentSetting.limit],()=>d());const w=S(()=>b(n.componentSetting.position)),y=()=>{n.componentSetting.clickActionType===1?d():n.componentSetting.clickActionType===2&&window.open("https://juejin.cn/")};return(c,v)=>(o(),i("div",{class:"wrapper material-juejinlist",style:p({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily,...w.value})},[s("div",$,[t.componentSetting.showTitle!==!1?(o(),i("div",B,[s("img",{src:H,style:p({filter:`drop-shadow(${t.componentSetting.iconShadow})`,cursor:t.componentSetting.clickActionType?"pointer":"default"}),alt:"Juejin",onClick:y},null,4)])):A("",!0),l.value?(o(),i("div",D,"Loading...")):r.value?(o(),i("div",U,"Something error!")):(o(),i("div",N,[(o(!0),i(I,null,z(m.value,e=>(o(),i("div",{class:"list-item",key:e.id},[s("div",V,[s("a",{href:`https://juejin.cn/post/${e.id}`,target:"_blank",style:p(h.value?"":"pointer-events: none")},_(e.title),13,q)]),s("div",E,"\u{1F44D}"+_(e.like),1)]))),128))]))])],4))}});var O=k(J,[["__scopeId","data-v-4e4bf6db"]]);export{O as default};
