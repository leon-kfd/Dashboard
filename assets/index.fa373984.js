import{_ as N,d as O,W as $,J as P,u as J,r as o,w as m,z as Q,A as X,H as T,I as Y,o as f,k,O as g,Q as v,D as p,j as V,h as i,t as z,U as Z,K as ee,L as te,x as ne,y as oe}from"./index.7c50bf55.js";const A=e=>(ne("data-v-1dd1d5de"),e=e(),oe(),e),ae=["src"],ie={class:"quote-left"},ce=A(()=>i("svg",{viewBox:"0 0 1024 1024"},[i("path",{d:"M928 512h-160v-128c0-70.6 57.4-128 128-128h16c26.6 0 48-21.4 48-48V112c0-26.6-21.4-48-48-48h-16c-176.8 0-320 143.2-320 320v480c0 53 43 96 96 96h256c53 0 96-43 96-96V608c0-53-43-96-96-96z m-576 0H192v-128c0-70.6 57.4-128 128-128h16c26.6 0 48-21.4 48-48V112c0-26.6-21.4-48-48-48h-16C143.2 64 0 207.2 0 384v480c0 53 43 96 96 96h256c53 0 96-43 96-96V608c0-53-43-96-96-96z"})],-1)),se=[ce],le={class:"quote-right"},re=A(()=>i("svg",{viewBox:"0 0 1024 1024"},[i("path",{d:"M928 64H672c-53 0-96 43-96 96v256c0 53 43 96 96 96h160v128c0 70.6-57.4 128-128 128h-16c-26.6 0-48 21.4-48 48v96c0 26.6 21.4 48 48 48h16c176.8 0 320-143.2 320-320V160c0-53-43-96-96-96z m-576 0H96C43 64 0 107 0 160v256c0 53 43 96 96 96h160v128c0 70.6-57.4 128-128 128h-16c-26.6 0-48 21.4-48 48v96c0 26.6 21.4 48 48 48h16c176.8 0 320-143.2 320-320V160c0-53-43-96-96-96z"})],-1)),ue=[re],de=O({__name:"index",props:{componentSetting:{type:Object,required:!0},element:{type:Object,required:!0}},setup(e){const t=e;$(n=>({"6fc6f582":q.value}));const{t:y}=P(),a=J(),l=o(),r=o(),u=o(),d=o(""),w=o(""),x=o(""),c=o(""),b=o(""),B=o(""),I=o(!1),h=async()=>{try{const n=await fetch(`${Z}/api/movieLines`),{name:F,img:M,img1:D,img2:W,img3:j,img4:E,link:H,quotes:G}=await n.json();d.value=G,w.value=F,x.value=M.replace("s_ratio_poster","m");const L=[D,D,W,j,E].filter(Boolean),K=~~(Math.random()*L.length),S=L[K];window.innerWidth<768?c.value=S.replace("original","w780"):window.innerWidth<1460?c.value=S.replace("original","w1280"):c.value=S,t.componentSetting.asBackground&&a.updateState({key:"realBackgroundURL",value:c.value}),b.value=H,B.value=`
      background-image: radial-gradient(
        ellipse at ${~~(Math.random()*50)+25}% ${~~(Math.random()*50)+25}%,
        rgba(0, 0, 0,.25),
        rgba(0, 04, 0,.75), 
        rgb(0, 0, 0));`}catch{}};let s;const C=()=>{const n=(t.componentSetting.duration||5)*60*1e3;s&&(window.clearInterval(s),s=null),s=window.setInterval(h,n)};m(()=>t.componentSetting.duration,()=>C(),{immediate:!0}),m(()=>t.componentSetting.asBackground,n=>{n&&a.realBackgroundURL!==c.value&&(a.resetGlobalBackground(),a.updateGlobalKey({key:"backgroundFilter",value:t.componentSetting.posterFilter}),a.updateState({key:"realBackgroundURL",value:c.value}))},{immediate:!0}),m(()=>t.componentSetting.posterFilter,n=>{n&&a.global.backgroundFilter!==n&&a.updateGlobalKey({key:"backgroundFilter",value:t.componentSetting.posterFilter})}),Q(()=>h()),X(()=>{t.componentSetting.asBackground&&a.updateState({key:"realBackgroundURL",value:""}),s&&window.clearInterval(s)});const R=T(()=>Y(t.componentSetting.position)),q=T(()=>t.componentSetting.themeColor);m(()=>d.value,()=>{l.value&&l.value.animate&&l.value.animate({opacity:[0,1]},400),r.value&&r.value.animate&&r.value.animate({opacity:[0,1]},400)});const U=()=>{I.value=!0,u.value&&u.value.animate&&u.value.animate({opacity:[0,1]},400)},_=()=>{!a.isLock||(t.componentSetting.clickActionType===1?(h(),C()):t.componentSetting.clickActionType===2?window.open(b.value):t.componentSetting.clickActionType===3&&ee(d.value)&&te({title:y("\u63D0\u793A"),type:"success",message:y("\u590D\u5236\u6210\u529F")}))};return(n,F)=>(f(),k("div",{class:"wrapper material-movielines",style:p({fontSize:e.componentSetting.textFontSize+"px",color:e.componentSetting.textColor,textShadow:e.componentSetting.textShadow,padding:e.componentSetting.padding+"px",fontFamily:e.componentSetting.fontFamily,...R.value,borderRadius:e.element.borderRadius+"px"})},[e.componentSetting.showPoster&&!e.componentSetting.asBackground?g((f(),k("img",{key:0,class:"bg",ref_key:"movieBg",ref:u,src:e.componentSetting.posterType===2?c.value:x.value,style:p({filter:e.componentSetting.posterFilter}),onLoad:U},null,44,ae)),[[v,I.value]]):V("",!0),e.componentSetting.useSpotlight?(f(),k("div",{key:1,class:"bg-effect-box",style:p(B.value)},null,4)):V("",!0),i("blockquote",{class:"blockquote",style:p({background:e.componentSetting.showDecoration?"":"none",maxWidth:e.componentSetting.maxWidth?e.componentSetting.maxWidth+"px":"",cursor:e.componentSetting.clickActionType?"pointer":"default"}),onClick:_},[i("p",{class:"lines",ref_key:"linesText",ref:l},z(d.value),513),g(i("p",{class:"cite",ref_key:"movieText",ref:r},"\u300E "+z(w.value)+" \u300F",513),[[v,e.componentSetting.showCite]]),g(i("div",ie,se,512),[[v,e.componentSetting.showDecoration]]),g(i("div",le,ue,512),[[v,e.componentSetting.showDecoration]])],4)],4))}});var ge=N(de,[["__scopeId","data-v-1dd1d5de"]]);export{ge as default};
