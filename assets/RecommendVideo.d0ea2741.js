import{_ as L,d as R,I as E,r as l,x as S,R as v,b as I,o as t,i as a,f as s,t as x,g as N,e as j,F as d,k as p,h as _,K as A,s as D,v as U}from"./index.da282a5f.js";const g=c=>(D("data-v-0d09f830"),c=c(),U(),c),F={class:"tips"},z={key:0,class:"video-content"},O=g(()=>s("div",{class:"title"},"Basic",-1)),K={class:"video-wrapper"},M=["onClick"],P={class:"img-wrapper"},Q=["src"],T=g(()=>s("div",{class:"title"},"Pixabay",-1)),W={class:"video-wrapper"},q=["onClick"],G={class:"img-wrapper"},H=["src"],J={key:1,class:"loading-wrapper"},X=g(()=>s("div",{class:"custom-loading"},[s("span",{class:"loader"})],-1)),Y=[X],Z=R({__name:"RecommendVideo",emits:["submit"],setup(c,{emit:y}){const{t:V}=E(),m=l(!1),n=l(!1),h=l(!1),b=l([]),w=l([]);S(async()=>{const o=await(await fetch(`${v}/staticVideos`)).json(),e=await(await fetch(`${v}/pixabayVideos`)).json();b.value=o.data.list,w.value=e.data.list});const C=()=>{n.value=!0,m.value||(m.value=!0)},k=async(i,o)=>{try{if(h.value=!0,o==="pixabay"){const e=await(await fetch(`${v}/tapi/pixabay/videos/?id=${i.id}`)).json();if((e==null?void 0:e.hits)&&e.hits.length){const u=e.hits[0];let f=Object.values(u.videos).find(B=>B.width===1920);f||(f=u.videos.large);const $=f.url;y("submit",$),n.value=!1}else throw new Error("Something error")}else if(o==="static"){const e=await(await fetch(`${v}/getQiNiuWallpaperURL?fileName=${i.filename}`)).json();if(e.url)y("submit",e.url),n.value=!1;else throw new Error("Something error")}}catch{A({title:V("\u9519\u8BEF"),type:"error",message:V("\u83B7\u53D6\u52A8\u6001\u58C1\u7EB8URL\u5931\u8D25")})}finally{h.value=!1}};return(i,o)=>{const r=I("easy-dialog");return t(),a(d,null,[s("button",{type:"button",class:"btn btn-small btn-primary",style:{margin:"0","margin-right":"5px"},onClick:C},x(i.$t("\u52A8\u6001\u58C1\u7EB8\u63A8\u8350")),1),N(r,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e),title:i.$t("\u52A8\u6001\u58C1\u7EB8\u63A8\u8350"),width:"min(760px, 94vw)",height:"min(480px, 80vh)"},{default:j(()=>[s("div",F,x(i.$t("recommendVideoTips")),1),m.value?(t(),a("div",z,[O,s("div",K,[(t(!0),a(d,null,p(b.value,e=>(t(),a("div",{class:"video",key:e.img,onClick:u=>k(e,"static")},[s("div",P,[e.img?(t(),a("img",{key:0,src:e.img,loading:"lazy"},null,8,Q)):_("",!0)])],8,M))),128)),(t(),a(d,null,p(4,e=>s("div",{class:"video-fake",key:e})),64))]),T,s("div",W,[(t(!0),a(d,null,p(w.value,e=>(t(),a("div",{class:"video",key:e.img,onClick:u=>k(e,"pixabay")},[s("div",G,[e.img?(t(),a("img",{key:0,src:e.img,loading:"lazy"},null,8,H)):_("",!0)])],8,q))),128)),(t(),a(d,null,p(4,e=>s("div",{class:"video-fake",key:e})),64))])])):_("",!0),h.value?(t(),a("div",J,Y)):_("",!0)]),_:1},8,["modelValue","title"])],64)}}});var te=L(Z,[["__scopeId","data-v-0d09f830"]]);export{te as default};
